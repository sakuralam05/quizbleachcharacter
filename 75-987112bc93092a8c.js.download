!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="ab18d100-be00-4973-9223-9258fd68f61d",e._sentryDebugIdIdentifier="sentry-dbid-ab18d100-be00-4973-9223-9258fd68f61d")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"b071f675"};"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[75,5250],{4251:function(e,t,r){r.d(t,{Z:function(){return E}});var n=r(3796),i=r(55992),o=Array.prototype.concat,a=function(e){return{recursive:!!e.recursive,bail:e.bail&&e.bail>0?e.bail:1e3}},l=function(e){return o.apply([],e)},u=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0;if(!e||r>=t.bail||!e.isDirectory||!e.createReader)return Promise.resolve([]);var o=null!=n?n:e.name;return new Promise(function(n){e.createReader().readEntries(function(e){return Promise.all(e.map(function(e){var n,a,l,c;return n=e,a=t,l=r,c=o,n.isDirectory?a.recursive?u(n,a,l+1,(0,i.join)(c,n.name)):Promise.resolve([]):new Promise(function(e,t){n.file?n.file(e,t):e(null)}).catch(function(){return null}).then(function(e){return e&&(e.dirPath=(0,i.join)(c,e.name)),e?[e]:[]})})).then(function(e){return n(l(e))})},function(){return n([])})})},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return u("function"==typeof e.getAsEntry?e.getAsEntry():e.webkitGetAsEntry?e.webkitGetAsEntry():null,a(t))},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=a(t),new Promise(function(r){var n,i;(null==e?void 0:null===(n=e.dataTransfer)||void 0===n?void 0:n.items)?Promise.all(l(e.dataTransfer.items).filter(function(e){return"file"===e.kind}).map(function(e){return c(e,t).then(function(t){if(!t.length){var r=e.getAsFile();t=r?[r]:t}return t})})).then(function(e){return r(l(e))}):(null==e?void 0:null===(i=e.dataTransfer)||void 0===i?void 0:i.files)?r(l(e.dataTransfer.files)):r([])})},f=r(24281),d=r(78348);r(75271);var h=r(31114),p=r(21769),v=r(6191),m=r(86498),y=null,g=null;function E(e){var t=function(e){var t=e.isTouchBackend;if(g&&t)return g;if(y&&!t)return y;var r={dragDropManager:(0,d.i)(function(e){var r=t?(0,m.zr)(e,void 0,{delayTouchStart:500}):(0,p.PD)(e),n=r.handleTopDropCapture;return r.handleTopDropCapture=function(e){var t,i=r.monitor.getItemType();i===v.HTML||i===v.TEXT?(r.dropTargetIds=[],null===(t=r.currentNativeSource)||void 0===t||t.loadDataTransfer(e.dataTransfer),r.enterLeaveCounter.reset()):n.call(r,e),r.currentNativeSource&&(r.currentNativeSource.item.dirContent=s(e,{recursive:!0}))},r})};return t?g=r:y=r,r}({isTouchBackend:(0,f.w8)()});return(0,n.tZ)(h.L.Provider,{value:t,children:e.children})}},4573:function(e,t,r){r.d(t,{x:function(){return f}});var n=r(3796),i=r(62279),o=r(24766),a=r(63163),l=(0,i.iv)([a.l0.flex.shrink(1),a.l0.fontSize("inherit"),{lineHeight:"inherit"}]),u=(0,i.iv)([l,a.l0.truncate]),c=(0,i.iv)([l]),s={normal:{matched:a.TV.foregroundDefault,unmatched:a.TV.foregroundDimmer},dimmed:{matched:a.TV.foregroundDimmer,unmatched:a.TV.foregroundDimmest}};function f(e){var t,r,i,l,f=null===(l=e.highlight)||void 0===l?void 0:l.filter(function(e){return e.to>0}),d=e.dimmed?s.dimmed:s.normal;return(null==f?void 0:f.length)?(0,n.tZ)(o.xv,{className:e.className,css:e.multiline?c:u,children:(t=e.text,r=0,i=[],f.forEach(function(e){var n=e.from,o=e.to,a=t.slice(r,n);a&&i.push({text:a,match:!1});var l=t.slice(n,o);l&&i.push({text:l,match:!0}),r=o}),r<t.length&&i.push({text:t.slice(r),match:!1}),i).map(function(e,t){return(0,n.tZ)("span",{style:{fontWeight:e.match?a.TV.fontWeightBold:a.TV.fontWeightRegular,color:e.match?d.matched:d.unmatched},children:e.text},e.text+t)})}):(0,n.tZ)(o.xv,{className:e.className,style:{color:d.matched},css:e.multiline?c:u,children:e.text})}},67887:function(e,t,r){r.d(t,{Z:function(){return w}});var n=r(3796),i=r(54505),o=r(79904),a=r(39808),l=r(9602),u=r(44134),c=r(24766),s=r(22419),f=r(93245),d=r(30231),h=r(86201),p=r(41733),v=r(30509),m=r(28065),y=function(e){return(0,n.tZ)(m.ZP,(0,v._)((0,p._)({viewBox:"0 0 800.5 907.77"},e),{children:(0,n.tZ)("path",{d:"M303.36,238.61c31.36-21.37,71.76-12.97,65-6.53c-12.89,12.28,4.26,8.65,6.11,31.31 c1.36,16.69-4.09,25.88-8.78,31.11c-9.79,1.28-21.69,3.67-36.02,8.33c-8.48,2.76-15.85,5.82-22.31,8.9 c-1.7-1.11-3.55-2.47-5.74-4.36C279.5,288.19,280.24,254.37,303.36,238.61 M490.68,370.72c5.69-4.41,31.55-12.72,55.49-15.55 c12.57-1.48,30.49-2.34,34.31-0.2c7.59,4.19,7.59,17.16,2.39,29.14c-7.57,17.4-18.27,36.63-30.39,38.21 c-19.77,2.61-38.46-8.09-59.8-24.03C485.06,392.56,480.38,378.68,490.68,370.72 M526.75,201.27c29.19,13.58,25.37,39.42,26.18,54.6 c0.22,4.36,0.15,7.3-0.22,9.32c-4.04-2.19-10.43-3.8-20.56-3.35c-2.96,0.12-5.84,0.47-8.63,0.91c-10.77-5.77-17.21-17.06-23.1-29.06 c-0.54-1.11-0.96-2.1-1.36-3.06c-0.17-0.44-0.35-0.91-0.52-1.31c-0.07-0.22-0.12-0.39-0.2-0.59c-3.23-10.25-1.06-12.3,0.3-15.46 c1.41-3.23,6.68-5.89-1.11-8.58c-0.67-0.25-1.5-0.39-2.44-0.57C500.25,197.72,515.7,196.17,526.75,201.27 M367.62,510.22 c-31.45-20.19-63.99-49.15-78.22-65.18c-2.39-1.8-2-9.79-2-9.79c12.84,9.98,66.11,48.04,122.44,65.42 c19.87,6.14,50.36,8.46,76.81-6.53c20.21-11.46,44.54-31.43,59.06-52.01l2.66,4.61c-0.1,3.06-6.78,17.97-10.18,23.96 c6.14,3.53,10.72,4.49,17.55,6.36l46.64-7.27c16.74-27.04,28.74-70.65,15.95-112.16c-7.3-23.81-45.36-71.22-48.09-73.83 c-9.56-9.19,1.6-44.69-17.35-83.42C532.86,159.41,480.67,116.69,458,98.1c6.68,4.88,47.82,21.47,67,44.62 c1.8-2.39,2.54-14.82,4.19-17.97c-16.47-21.57-17.75-59.95-17.75-70.21c0-18.81-9.56-40.13-9.56-40.13s16.47,13.04,20.73,35.5 c5.03,26.6,15.75,47.55,29.93,65.28c26.84,33.43,51.08,50.58,63.33,38.23C630.53,138.58,601,72.2,563.28,35.15 C519.25-8.09,507.74-2.52,481.91,6.7c-20.61,7.35-31.75,65.87-85.47,64.71c-9.1-1.06-32.54-1.63-44.13-1.53 c6.04-8.43,11.22-14.94,11.22-14.94s-18.02,7.25-33.38,16.44l-1.18-1.77c5.18-10.92,10.75-17.82,10.75-17.82s-14.4,8.65-27.54,19.01 c2.39-13.02,11.44-21.27,11.44-21.27s-18.19,3.28-41.36,28.77c-26.33,7.2-32.66,11.93-53.64,21.22 c-34.12-7.44-50.21-19.45-65.55-41.56c-11.68-16.89-32.47-19.45-53.71-10.72c-30.97,12.8-70.14,30.33-70.14,30.33 s12.77-0.52,26.08,0.05c-18.22,6.9-35.72,16.39-35.72,16.39s8.53-0.3,19.06-0.12c-7.27,6.04-11.29,8.92-18.22,13.51 c-16.66,12.1-30.17,26.08-30.17,26.08s11.31-5.15,21.47-8.04c-7.1,16.27-21.18,28.25-18.59,48.17 c2.49,18.19,24.82,55.66,53.64,78.66c2.49,2,41.86,38.43,71.56,23.47c29.68-14.94,41.39-28.25,46.27-48.66 c5.74-23.44,2.47-41.17-9.79-92.05c-4.04-16.79-14.57-51.37-19.65-67.91l1.13-0.81c9.71,20.49,34.56,74.5,44.57,110.78 c15.63,56.57,10.75,85.27,3.6,95.79c-21.57,31.73-76.84,35.92-101.98,18.34c-3.85,60.91,9.76,87.73,14.37,101.24 c-2.29,15.53,7.77,44.37,7.77,44.37s1.13-13.11,5.74-20.02c1.23,15.41,9,33.72,9,33.72s-0.47-11.31,3.06-21.08 c4.98,8.43,8.63,10.43,13.34,16.76c4.71,16.47,14.15,28.5,14.15,28.5s-1.53-8.83-0.69-18.02c23.05,22.14,27.02,54.45,29.31,79.28 c6.46,68.26-107.63,122.54-129.74,165.24c-16.76,25.29-26.8,65.3,1.58,88.89c68.6,56.97,42.25,72.65,76.59,97.69 c47.11,34.34,106.05,18.96,126.11-8.97c27.93-38.92,20.76-75.63,10.38-109.97c-8.11-26.85-30.15-71.46-57.41-88.72 c-27.86-17.65-54.95-20.95-77.9-18.59l2.12-2.44c33.01-6.56,67.52-2.96,92.49,13.14c28.35,18.22,54.28,49.47,67.84,97.37 c15.38-2.19,17.55-3.18,31.63-5.18l-31.7-246.76L367.62,510.22z M385.94,819.52l-3.65-34.22l71.29-108.74l80.93,23.64l69.59-116.23 L687.52,639l63.38-132.92l22.53,242.07L385.94,819.52z M774.27,456.51l-254.72,46.17c-6.31,8.13-21.91,22.41-29.41,26.13 c-32.17,16.2-53.91,11.51-72.7,6.63c-12.08-3.06-19.08-4.78-29.11-9.29l-62.17,8.53l37.74,314.87l436.35-78.66L774.27,456.51z"})}))},g=r(25),E=r(63163),D=r(14861),b=(0,r(36809).X)({styles0:[E.l0.rowWithGap(2),{alignItems:"center"}],styles1:[E.l0.align.center]});function w(e){var t=e.replId,r=e.showFlag,p=e.buttonsOnly,v=(0,D.F)().isDarkColorScheme;return(0,n.BX)(n.HY,{children:[(0,n.tZ)(a.Z,{href:"https://us5.datadoghq.com/logs?"+new URLSearchParams({query:"@replid:".concat(t)}).toString(),iconLeft:(0,n.tZ)(y,{color:v?"#FFFFFF":"#632CA6"}),iconRight:(0,n.tZ)(d.Z,{}),target:"_blank",text:"View Datadog Logs by Repl ID"}),(0,n.tZ)(a.Z,{href:"https://us5.datadoghq.com/logs?"+new URLSearchParams({query:"@replid:".concat(t),agg_q:"@containerid",agg_q_source:"base",cols:"host,service",messageDisplay:"inline",stream_sort:"desc",top_n:"30",top_o:"top",viz:"transaction",x_missing:"true",live:"true"}).toString(),iconLeft:(0,n.tZ)(y,{color:v?"#FFFFFF":"#632CA6"}),iconRight:(0,n.tZ)(d.Z,{}),target:"_blank",text:"View Datadog Logs by Container ID"}),void 0!==p&&p?(0,n.tZ)(s.u,{maxWidth:300,tooltip:(0,n.tZ)(c.xv,{multiline:!1,children:t}),children:(0,n.tZ)(o.zx,{iconLeft:(0,n.tZ)(h.Z,{}),text:"Copy Repl ID",onClick:function(){return(0,i.Z)(t)}})}):(0,n.BX)(f.G,{css:b.styles0,children:[void 0!==r&&r?(0,n.BX)(s.u,{tooltip:"You are seeing this functionality because you have special permissions.",children:[(0,n.tZ)(g.Z,{})," "]}):null,(0,n.BX)(c.xv,{css:b.styles1,multiline:!1,children:["Repl ID: ",(0,n.tZ)(u.Z,{children:t})]}),(0,n.tZ)(l.hU,{alt:"Copy to clipboard",onClick:function(){return(0,i.Z)(t)},children:(0,n.tZ)(h.Z,{})})]})]})}},83619:function(e,t,r){r.d(t,{K:function(){return o}});var n=r(75271),i=r(98314);function o(e){(0,n.useEffect)(function(){e((0,i.r)(),{captureDraggingState:!0})},[e])}},95188:function(e,t,r){r.d(t,{UV:function(){return o},fN:function(){return i}});var n=r(63257);function i(e,t){for(var r=0;r<t.length;r+=1e4)e.push.apply(e,(0,n._)(t.slice(r,r+1e4)))}function o(e){return(0,n._)(Array(e))}},92331:function(e,t,r){r.d(t,{FW:function(){return h},NH:function(){return m}});var n=r(41733),i=r(21262),o=r(71440),a=r(71793),l=r(48574),u=r(9122);function c(){var e=(0,i._)(["\n  fragment PublishReplData on Repl {\n    id\n    url\n    title\n    description\n    iconUrl\n    lastPublishedAt\n    publishedAs\n    imageUrl\n    isRenamed\n    templateInfo {\n      iconUrl\n    }\n    replViewSettings {\n      id\n      defaultView\n      replImage\n      replFile\n    }\n    tags {\n      id\n      isOfficial\n    }\n    authorizations {\n      editMetadata {\n        isAuthorized\n      }\n      editFileContents {\n        isAuthorized\n      }\n      publish {\n        isAuthorized\n      }\n    }\n    ...CrosisContextRepl\n    ...PublishedReplShareInfoReplData\n  }\n  ","\n  ","\n"]);return c=function(){return e},e}function s(){var e=(0,i._)(["\n  fragment PublishCurrentUser on CurrentUser {\n    id\n    image\n    isTemplateDeveloper: hasRole(role: TEMPLATE_DEVELOPER)\n    ...CrosisContextCurrentUser\n  }\n  ","\n"]);return s=function(){return e},e}function f(){var e=(0,i._)(["\n  query PublishCurrentUser {\n    currentUser {\n      id\n      ...PublishCurrentUser\n    }\n  }\n  ","\n"]);return f=function(){return e},e}var d={},h=(0,o.Ps)(c(),a.C,l.B),p=(0,o.Ps)(s(),a.D),v=(0,o.Ps)(f(),p);function m(e){var t=(0,n._)({},d,e);return u.a(v,t)}},48574:function(e,t,r){r.d(t,{B:function(){return o}});var n=r(21262);function i(){var e=(0,n._)(["\n  fragment PublishedReplShareInfoReplData on Repl {\n    id\n    url\n    publishedAs\n    title\n  }\n"]);return i=function(){return e},e}var o=(0,r(71440).Ps)(i())},48718:function(e,t,r){r.d(t,{ZP:function(){return T},fv:function(){return _},p0:function(){return R}});var n=r(41733),i=r(30509),o=r(3796),a=r(62279),l=r(43769),u=r(30851),c=r(29626),s=r(15023),f=r(6065),d=r(86466),h=r(14548),p=r(24766),v=r(93245),m=r(63163),y=r(4204),g=r(38865),E=r(9834),D=r.n(E);r(75271);var b=v.K.a,w=(0,a.iv)([m.l0.focusRingOnAfter,{"::after":{borderRadius:m.TV.space8,content:'""',position:"absolute",top:0,right:0,bottom:0,left:0,display:"block",zIndex:1}}]);function _(e){var t=e.tags,r=e.maxVisible,n=t.slice(0,void 0===r?3:r),i=t.length-n.length;return(0,o.BX)(v.G,{css:[m.l0.rowWithGap(4),m.l0.align.center],children:[n.map(function(e){return(0,o.tZ)(c.c,{small:!0,tag:e},e.id)}),i>0?(0,o.BX)(p.xv,{variant:"small",color:"dimmest",multiline:!1,children:["+",i]}):null]})}function R(e){var t=e.repl,r=e.showOwner,a=e.maxVisibleTags,c=e.smallerTitle,d=e.onReplClick,h=e.onUserClick,E=t.owner;return(0,o.BX)(v.G,{css:[m.l0.colWithGap(16),m.l0.justify.spaceBetween,m.l0.height("100%")],children:[(0,o.BX)(v.G,{css:[m.l0.rowWithGap(8),m.l0.align.start,m.l0.flex.growAndShrink(1)],children:[(0,o.tZ)(s.ZP,{size:84,iconUrl:t.iconUrl,alt:t.title}),(0,o.BX)(v.G,{css:[m.l0.flex.growAndShrink(1),m.l0.colWithGap(4)],children:[(0,o.tZ)(D(),(0,i._)((0,n._)({legacyBehavior:!0,passHref:!0},(0,l.j3)(t)),{children:(0,o.tZ)(b,{css:[{color:"inherit"},w],onClick:d,children:(0,o.tZ)(p.xv,{variant:c?"subheadDefault":"subheadBig",multiline:!1,children:t.title})})})),r&&E?(0,o.tZ)(v.G,{css:[{maxWidth:"fit-content",zIndex:1}],children:(0,o.tZ)(y.Z,{username:E.username,children:(0,o.tZ)(g.ZP,{user:E,children:(0,o.BX)(b,{css:[{color:"inherit"},m.l0.rowWithGap(4),m.l0.align.center,m.l0.focusRing,{"&:focus":{outlineOffset:2}},m.l0.borderRadius(8)],onClick:h,children:[(0,o.tZ)(f.q,{src:E.image,username:E.username,size:16,layout:"intrinsic"}),(0,o.tZ)(p.xv,{multiline:!1,children:E.username})]})})})}):null,t.description?(0,o.tZ)(p.xv,{color:"dimmer",maxLines:2,css:[m.l0.maxWidth(450)],multiline:!1,children:t.description}):null]})]}),(0,o.BX)(v.G,{css:[m.l0.rowWithGap(8),m.l0.justify.spaceBetween,m.l0.flex.wrap],children:[(0,o.tZ)(u.Z,{css:[m.l0.pb(2)],repl:t}),a?(0,o.tZ)(v.G,{css:[m.l0.position.relative,m.l0.pt(2),{zIndex:1}],children:(0,o.tZ)(_,{tags:t.tags,maxVisible:a})}):null]})]})}function T(e){var t=e.repl,r=e.showOwner,n=e.maxVisibleTags,i=e.smallerTitle,a=e.onReplClick,l=e.onUserClick,u=e.dataCy;return(0,o.tZ)(h.Tg,{css:[m.l0.borderRadius(8),m.l0.p(8),m.l0.position.relative,d.gU.filledAndOutlined,{border:"1px solid "+m.TV.outlineDimmest}],dataCy:u,children:(0,o.tZ)(R,{repl:t,showOwner:r,maxVisibleTags:n,smallerTitle:i,onReplClick:a,onUserClick:l})})}},30851:function(e,t,r){r.d(t,{Z:function(){return h}});var n=r(3796),i=r(71051),o=r(96399),a=r(24766),l=r(93245),u=r(28065),c=r(63163);function s(e){var t=e.count,r=e.children,i=e.tooltip,s=e.small,f=(0,o.d)(t);return(0,n.BX)(l.G,{"aria-label":i,"data-microtip-position":"left",role:"tooltip",css:[c.l0.rowWithGap(4),c.l0.align.center,c.l0.color.foregroundDimmer,{userSelect:"none",lineHeight:1}],children:[(0,n.tZ)(u.jS,{size:s?12:void 0,children:r}),(0,n.tZ)(a.xv,{variant:s?"small":void 0,color:"dimmer",multiline:!1,children:f})]})}r(75271);var f=r(4135),d=r(39290);function h(e){var t=e.repl;return(0,n.BX)(l.G,{css:[c.l0.rowWithGap(16),c.l0.align.center],children:[(0,n.tZ)(s,{small:!0,count:t.publicForkCount,tooltip:(0,i.Z)("fork",t.publicForkCount),children:(0,n.tZ)(f.Z,{})}),(0,n.tZ)(s,{small:!0,count:t.likeCount,tooltip:(0,i.Z)("like",t.likeCount),children:(0,n.tZ)(d.Z,{})})]})}},29626:function(e,t,r){r.d(t,{c:function(){return v},g:function(){return y}});var n=r(3796),i=r(62279),o=r(86466),a=r(14548),l=r(24766),u=r(93245),c=r(7935),s=r(63163),f=r(76547);r(75271);var d=(0,i.iv)({border:"1px solid "+s.TV.accentPrimaryDefault,backgroundColor:"transparent"}),h=function(e){var t=e.isActive,r=e.small;return(0,i.iv)([s.l0.p(r?4:8),s.l0.align.center,s.l0.rowWithGap(4),s.l0.fontSize(12),t?d:o.gU.outlined,s.l0.borderRadius(16),{color:"inherit","&:active":d,height:r?"auto":s.TV.space32}])};function p(e){var t=e.tag,r=e.isActive,i=e.isRemovable,o=e.small,d=o?"small":"text";return(0,n.tZ)(a.Tg,{elevated:!0,css:[s.l0.borderRadius(16)],children:(0,n.BX)(a.Tg,{elevated:r,css:[h({isActive:r,small:o})],children:[(0,n.BX)(u.G,{css:[s.l0.flex.row,s.l0.align.center,s.l0.flex.shrink(1)],children:[(0,n.tZ)(l.xv,{variant:d,color:"dimmest",multiline:!1,children:"#"}),(0,n.tZ)(l.xv,{color:"dimmer",variant:d,css:[s.l0.flex.shrink(1)],multiline:!1,children:t.id})]}),t.isOfficial&&!o?(0,n.tZ)(f.Z,{}):null,i?(0,n.tZ)(c.Z,{size:o?12:16}):null]})})}function v(e){var t=e.tag,r=e.isActive,i=e.small;return(0,n.tZ)(p,{tag:t,isActive:r,small:i,isRemovable:r})}var m=u.K.button;function y(e){var t=e.tag,r=e.onClick,i=e.isActive,o=e.small;return(0,n.tZ)(m,{css:[s.l0.reset.button],onClick:r,children:(0,n.tZ)(p,{tag:t,isActive:i,small:o,isRemovable:!0})})}},35328:function(e,t,r){r.d(t,{sI:function(){return a}});var n=r(21262);function i(){var e=(0,n._)(["\n  fragment ReplViewerOutputOverlayRepl on Repl {\n    id\n    title\n    imageUrl\n    lastPublishedAt\n    authorizations {\n      editMetadata {\n        isAuthorized\n      }\n    }\n  }\n"]);return i=function(){return e},e}function o(){var e=(0,n._)(["\n  mutation ReplViewerOutputOverlayUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        imageUrl\n      }\n    }\n  }\n"]);return o=function(){return e},e}var a=(0,r(71440).Ps)(i());o()},79317:function(e,t,r){r.d(t,{D:function(){return i},V:function(){return a}});var n,i,o=r(35370);function a(e){return(0,o.gK)(e)?"Markdown":(0,o.sL)(e)?"Draw":(0,o.IQ)(e)?"Pedit":(0,o.T3)(e)?"Media":(0,o.hj)(e)?"Binary":"Code"}(n=i||(i={})).Media="Media",n.Binary="Binary",n.Code="Code",n.Markdown="Markdown",n.Draw="Draw",n.Pedit="Pedit"},29193:function(e,t,r){r.d(t,{Z:function(){return w}});var n=r(66626),i=r(3796),o=r(99595),a=r(96949),l=r(79904),u=r(24766),c=r(93245),s=r(61010),f=r(63163),d=r(85983),h=r(41733),p=r(21262),v=r(71440),m=r(32893),y=r(82303);function g(){var e=(0,p._)(["\n  mutation UnpublishReplUnpublish($input: UnpublishReplFromCommunityInput!) {\n    unpublishReplFromCommunity(input: $input) {\n      ... on Repl {\n        id\n        ...ReplViewReplActionsPermissions\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return g=function(){return e},e}var E={},D=(0,v.Ps)(g(),m.jN),b=c.K.form;function w(e){var t,r,p=e.repl,v=e.source,m=e.onDone,g=(0,o.Z)(),w=g.showConfirm,_=g.showError,R=(0,n._)((t={variables:{input:{replId:p.id}},onCompleted:function(e){if("Repl"===e.unpublishReplFromCommunity.__typename){var t=e.unpublishReplFromCommunity.likeCount;(0,a.j)(a.U3.REPL_UNPUBLISHED,{source:v,numLikes:t,replType:p.publishedAs===d.O2.Template?"template_repl":"regular_repl"}),w("Repl removed from the community.")}else"NotFoundError"===e.unpublishReplFromCommunity.__typename||"UnauthorizedError"===e.unpublishReplFromCommunity.__typename?_(e.unpublishReplFromCommunity.message):_("An unexpected error occurred.");m()},onError:function(){_("Something went wrong. Please try again.")},update:function(e){e.modify({id:e.identify({__typename:"Repl",id:p.id}),fields:{comments:function(e,t){return t.DELETE},tags:function(e,t){return t.DELETE}}})}},r=(0,h._)({},E,t),y.D(D,r)),2),T=R[0],x=R[1].loading;return(0,i.BX)(c.G,{css:[f.l0.colWithGap(24)],children:[(0,i.tZ)(u.xv,{variant:"subheadBig",children:"Unpublish this Repl from the Community"}),(0,i.BX)(b,{onSubmit:function(e){e.preventDefault(),T()},css:[f.l0.colWithGap(32)],children:[(0,i.tZ)(u.xv,{children:"Unpublishing a Repl will remove it from the Community. This action will delete all associated posts and tags. The Repl and all its comments will still be visible in your profile, but will not be shown in the Community or Trending views anymore. You can always re-publish the Repl again later."}),(0,i.BX)(c.G,{css:[f.l0.rowWithGap(8),f.l0.justify.end],children:[(0,i.tZ)(c.G,{children:(0,i.tZ)(l.zx,{type:"button",text:"Cancel",onClick:function(){return m()}})}),(0,i.tZ)(c.G,{children:(0,i.tZ)(l.zx,{disabled:x,colorway:"negative",text:x?"Unpublishing...":"Yes, unpublish this Repl",type:"submit",iconLeft:(0,i.tZ)(s.Z,{})})})]})]})]})}},44134:function(e,t,r){r.d(t,{Z:function(){return a}});var n=r(3796);r(75271);var i=r(63163),o=r(14548);function a(e){var t=e.className,r=e.children;return(0,n.tZ)(o.Tg,{elevated:!0,tag:"span",css:[{display:"inline",lineHeight:1},i.l0.fontSize(i.TV.fontSizeSmall),i.l0.borderRadius(4),i.l0.px(4),i.l0.font.code,t],children:r})}},16197:function(e,t,r){r.d(t,{Z:function(){return g}});var n=r(42516),i=r(41733),o=r(30509),a=r(3796),l=r(6065),u=r(22419),c=r(93245),s=r(22192),f=r(63163),d=r(36809),h=(0,s.$)(["size","fontSize","listGap","iconTextGap","avatarOverlap","tooltipFontSize"]),p=h.styleTokens,v=h.cssVars,m=(0,d.X)({avatarsRow:[f.l0.flex.row,{"& > *":{marginLeft:"calc(-0.4 * ".concat(p.size,")")},"& > *:first-child":{marginLeft:0}}],countCirlce:[f.l0.center,f.l0.overflow("hidden"),f.l0.backgroundColor.backgroundDefault,f.l0.color.foregroundDimmer,f.l0.px(2),{borderRadius:"50%",minWidth:p.size,height:p.size,fontSize:p.fontSize}],tooltop:[{gap:p.listGap,gridTemplateColumns:"repeat(auto-fill, 200px)"}],tooltipRow:[f.l0.rowWithGap(f.TV.space2),f.l0.align.center],tooltipText:[f.l0.flex.growAndShrink(1),f.l0.truncate,f.l0.color.foregroundDimmer,{paddingLeft:p.iconTextGap,fontSize:p.tooltipFontSize}],stackItem:[]}),y={12:{fontSize:8,listGap:2,iconTextGap:2,tooltipAvatarSize:12,tooltipFontSize:8},16:{fontSize:10,listGap:2,iconTextGap:2,tooltipAvatarSize:16,tooltipFontSize:10},24:{fontSize:12,listGap:4,iconTextGap:4,tooltipAvatarSize:16,tooltipFontSize:12},32:{fontSize:14,listGap:4,iconTextGap:4,tooltipAvatarSize:16,tooltipFontSize:14},40:{fontSize:16,listGap:8,iconTextGap:4,tooltipAvatarSize:24,tooltipFontSize:14},48:{fontSize:24,listGap:8,iconTextGap:4,tooltipAvatarSize:24,tooltipFontSize:14}};function g(e){var t,r,s,f,d,h,p,g,E,D=e.activeUsers,b=e.visibleNumOfUsers,w=void 0===b?3:b,_=e.size,R=void 0===_?24:_,T=D.length,x=(E={},(0,n._)(E,v.size,R+"px"),(0,n._)(E,v.fontSize,(null!==(d=null===(t=y[R])||void 0===t?void 0:t.fontSize)&&void 0!==d?d:R)+"px"),(0,n._)(E,v.listGap,(null!==(h=null===(r=y[R])||void 0===r?void 0:r.listGap)&&void 0!==h?h:8)+"px"),(0,n._)(E,v.iconTextGap,(null!==(p=null===(s=y[R])||void 0===s?void 0:s.iconTextGap)&&void 0!==p?p:8)+"px"),(0,n._)(E,v.tooltipFontSize,(null!==(g=null===(f=y[R])||void 0===f?void 0:f.tooltipFontSize)&&void 0!==g?g:14)+"px"),E),I=T>w,A=D.slice(0,I?w-1:w);return(0,a.tZ)(u.u,{tooltip:(0,a.tZ)(c.G,{css:m.tooltop,style:x,children:D.map(function(e){var t;return(0,a.BX)(c.G,{css:m.tooltipRow,children:[(0,a.tZ)(l.q,{size:(null===(t=y[R])||void 0===t?void 0:t.tooltipAvatarSize)||R,src:e.image||null,ringColor:e.color,username:e.username},e.id),(0,a.tZ)(c.G,{css:m.tooltipText,children:e.username})]},e.username)})}),children:function(e,t){return(0,a.BX)(c.G,(0,o._)((0,i._)({},e),{tag:"ul",innerRef:t,css:m.avatarsRow,style:x,children:[A.map(function(e,t){return(0,a.tZ)(c.G,{tag:"li",style:{zIndex:t+1},css:m.stackItem,children:(0,a.tZ)(l.q,{size:R,src:e.image||null,ringColor:e.color,username:e.username})},e.id)}),I?(0,a.tZ)(c.G,{tag:"li",css:m.stackItem,style:{zIndex:A.length},children:(0,a.tZ)(c.G,{css:m.countCirlce,children:(0,a.BX)(c.G,{children:["+",T-w+1]})})}):null]}))}})}},59140:function(e,t,r){r.d(t,{Z:function(){return l}});var n=r(41733),i=r(30509),o=r(3796),a=r(28065);function l(e){return(0,o.tZ)(a.ZP,(0,i._)((0,n._)({},e),{children:(0,o.tZ)("path",{fillRule:"evenodd",d:"M12 4.25a.75.75 0 0 1 .75.75v12.19l5.72-5.72a.75.75 0 1 1 1.06 1.06l-7 7a.75.75 0 0 1-1.06 0l-7-7a.75.75 0 1 1 1.06-1.06l5.72 5.72V5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}))}},49549:function(e,t,r){r.d(t,{Z:function(){return l}});var n=r(41733),i=r(30509),o=r(3796),a=r(28065);function l(e){return(0,o.tZ)(a.ZP,(0,i._)((0,n._)({},e),{children:(0,o.tZ)("path",{fillRule:"evenodd",d:"M2.25 4.5A2.25 2.25 0 0 1 4.5 2.25h15a2.25 2.25 0 0 1 2.25 2.25v3c0 .576-.217 1.102-.573 1.5.356.398.573.924.573 1.5v3c0 .576-.217 1.102-.573 1.5.356.398.573.924.573 1.5v3a2.25 2.25 0 0 1-2.25 2.25h-11a2.25 2.25 0 0 1-2.25-2.25v-3c0-.576.217-1.102.573-1.5a2.242 2.242 0 0 1-.573-1.5v-3c0-.263.045-.515.128-.75H4.5A2.25 2.25 0 0 1 2.25 7.5v-3ZM19.5 8.25a.75.75 0 0 0 .75-.75v-3a.75.75 0 0 0-.75-.75h-15a.75.75 0 0 0-.75.75v3c0 .414.336.75.75.75h15Zm-11 1.5a.75.75 0 0 0-.75.75v3c0 .414.336.75.75.75h11a.75.75 0 0 0 .75-.75v-3a.75.75 0 0 0-.75-.75h-11Zm11 6h-11a.75.75 0 0 0-.75.75v3c0 .414.336.75.75.75h11a.75.75 0 0 0 .75-.75v-3a.75.75 0 0 0-.75-.75Z",clipRule:"evenodd"})}))}},96134:function(e,t,r){r.d(t,{Z:function(){return l}});var n=r(41733),i=r(30509),o=r(3796),a=r(28065);function l(e){return(0,o.tZ)(a.ZP,(0,i._)((0,n._)({},e),{children:(0,o.tZ)("path",{fillRule:"evenodd",d:"M4 21.75A2.75 2.75 0 0 1 1.25 19V5A2.75 2.75 0 0 1 4 2.25h5a.75.75 0 0 1 .624.334l1.777 2.666H20A2.75 2.75 0 0 1 22.75 8v1.213c.835.559 1.34 1.56 1.2 2.643l-.98 7.5a2.75 2.75 0 0 1-2.726 2.394H4ZM3.116 4.116A1.25 1.25 0 0 1 4 3.75h4.599l1.777 2.666A.75.75 0 0 0 11 6.75h9A1.25 1.25 0 0 1 21.25 8v.75H5.256a2.75 2.75 0 0 0-2.506 1.617V5c0-.332.132-.65.366-.884ZM4.278 20.25h15.966a1.25 1.25 0 0 0 1.24-1.088l.978-7.5a1.25 1.25 0 0 0-1.24-1.412H5.256a1.25 1.25 0 0 0-1.24 1.088l-.978 7.5a1.25 1.25 0 0 0 1.24 1.412Z",clipRule:"evenodd"})}))}},81253:function(e,t,r){r.d(t,{Z:function(){return l}});var n=r(41733),i=r(30509),o=r(3796),a=r(28065);function l(e){return(0,o.tZ)(a.ZP,(0,i._)((0,n._)({},e),{children:(0,o.tZ)("path",{fillRule:"evenodd",d:"M20.593 10.91a1.25 1.25 0 0 1 0 2.18l-14.48 8.145a1.25 1.25 0 0 1-1.863-1.09V3.855a1.25 1.25 0 0 1 1.863-1.09l14.48 8.146Z",clipRule:"evenodd"})}))}},40523:function(e,t,r){r.d(t,{P:function(){return m},n:function(){return v}});var n=r(66626),i=r(74044),o=r(37654),a=r(16155),l=r(83059),u=r(82973),c=r(70657),s=r(75271),f=r(58997),d=i.Dy.Array(i.Dy.String()),h=function(e){return"repl:hiddenFiles:"+e},p={get:function(e){var t=u.Z.get(h(e));return o.B4.Check(d,t)?t:null},set:function(e,t){u.Z.set(h(e),t)}},v=function(e){var t=(0,a.Z)(),r=(0,n._)((0,s.useState)(function(){return p.get(t)}),2),i=r[0],o=r[1];return(0,s.useEffect)(function(){return e.watch(function(e){var r=function(e){p.set(t,e),o(e)};if(e.error){e.error===f.Yt.NotFound&&r([]);return}if(!e.config.hidden){r([]);return}r(e.config.hidden)})},[e,t]),i},m=function(e){var t=v(e);return(0,l.Z)(function(){return null===t?null:t.map(function(e){return(0,c.P)(e)||e})},[t])}},32992:function(e,t,r){r.d(t,{N5:function(){return a},f0:function(){return o},gs:function(){return l},i7:function(){return i}});var n=Object.values(r(9).Z.multiplayer);function i(e){var t={};return n.forEach(function(e){t[e]=0}),e.forEach(function(e){t[e.color]++}),Object.keys(t).sort(function(e,r){return t[e]-t[r]})[0]}function o(e){var t=e.sessions.sort(function(e,t){return e.timestamp-t.timestamp}),r=!0,n=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var l=o.value;if(l.activeFile)return l.activeFile}}catch(e){n=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}return null}function a(e,t){var r=t.find(function(t){return t.sessions.some(function(t){return t.id===e})});if(!r)throw Error("Expected user with session ID ".concat(e));return r}function l(e){var t=e.seconds,r=e.nanos;return Number(t||0)+(r||0)/1e9}},9:function(e,t){t.Z={brand:{darkBlue:"#0D101E",lightBlue:"#68CDEE",gray:"#6D7D84"},main:{green:{dark:"#0A6640",default:"#0F9960",light:"#3DCC91",25:"rgba(15,153,96,0.25)",15:"rgba(15,153,96,0.15)"},red:{dark:"#A82A2A",default:"#DB3737",light:"#FF7373",25:"rgba(219, 55, 55, 0.25)",15:"rgba(219, 55, 55, 0.15)"},blue:{dark:"#0068AD",default:"#0097FB",light:"#73C4FA",25:"rgba(0, 151, 251, 0.25)",15:"rgba(0, 151, 251, 0.15)"},orange:{dark:"#A14809",default:"#E16D1A",light:"#FC9C58",25:"rgba(225, 109, 26, 0.25)",15:"rgba(225, 109, 26, 0.15)"},purple:{dark:"#6213B1",default:"#9D43F7",light:"#BF80FF",25:"rgba(98, 19, 177, 0.25)",15:"rgba(98, 19, 177, 0.15)"},gold:{dark:"#A67908",default:"#D99E0B",light:"#FFC940",25:"rgba(217, 158, 11, 0.25)",15:"rgba(217, 158, 11, 0.15)"}},neutrals:{black:"#21242C",white:"#FFFFFF",offWhite:"#F7F8FA",black64:"rgba(33, 36, 44, 0.64)",black50:"rgba(33, 36, 44, 0.50)",black16:"rgba(33, 36, 44, 0.16)",black8:"rgba(33, 36, 44, 0.08)",white64:"rgba(255, 255, 255, 0.64)",white50:"rgba(255, 255, 255, 0.50)",white16:"rgba(255, 255, 255, 0.16)",white8:"rgba(255, 255, 255, 0.08)"},multiplayer:{green:"#1BC47D",red:"#EF5533",blue:"#18A0FB",purple:"#907CFF",teal:"#00B5CE",pink:"#EE46D3"},languages:{java:"#b07219",scheme:"#1e4aec",clojure:"#db5855",haskell:"#5e5086",lua:"#000080",ruby:"#701516",python:"#3572A5",go:"#00ADD8",cpp:"#f34b7d",c:"#555555","c#":"#178600","f#":"#b845fc",rust:"#dea584",swift:"#ffac45",r:"#198CE7",bash:"#000000",crystal:"#000100",julia:"#a270ba",elixir:"#6e4a7e",nim:"#37775b",dart:"#00B4AB",erlang:"#B83998",typescript:"#2b7489",elisp:"#c065db",sql:"#e34c26",php:"#4F5D95",html:"#e34c26",css:"#563d7c",javascript:"#f1e05a"},brands:{github:"#181717",twitter:"#00A8FF",discord:"#7289DA",facebook:"#3B5998",linkedin:"#0077B5"}}},57865:function(e,t,r){r.d(t,{Z:function(){return l}});var n=r(7391),i=r.n(n),o=r(39121),a=r(49500);function l(e){var t=e.throwBsod,r=e.tags,n=e.extras,l=e.origin,u=e.onNonBsodUnrecoverableError,c=void 0===u?function(){}:u;return function(e){var u=(0,o.ZP)(e);if(u===o.Gs.NotFound){i().push("/home","~/");return}if(u===o.Gs.LanguageTokenDenied){window.location.reload();return}if(u){c(u);return}a.error(e),t({error:e,tags:r,extras:n,origin:l})}}},49424:function(e,t,r){r.d(t,{tr:function(){return P}});var n=r(42516),i=r(66626),o=r(3796),a=r(62279),l=r(29574),u=r(84238),c=r(22192),s=r(86466),f=r(87915),d=r(63062),h=r(14548),p=r(93245),v=r(36809),m=r(33323),y=r(82383),g=r(63163),E=r(23882),D=r(99704),b=r(86908),w=r(75271),_=r(35370),R=r(72106),T=r(73878);function x(e){var t=e.node;return t.type===T.Tv.Directory?(0,o.tZ)(y.Z,{size:16}):(0,o.tZ)(f.Z,{size:16,path:t.path})}var I=(0,c.$)(["menuY","menuX"]),A=I.cssVars,C=I.styleTokens,N=(0,v.X)({root:[g.l0.maxHeight(400),g.l0.position.absolute,g.l0.borderRadius(8),g.l0.shadow(3),{border:"1px solid",borderColor:g.TV.outlineDefault,top:C.menuY,left:C.menuX,"& > div":[g.l0.maxHeight(400)]}]}),S=(0,a.iv)([s.gU.nofill,{transitionProperty:"background-color, box-shadow, opacity",opacity:.8,":focus":{zIndex:1,opacity:1}}]),O={button:(0,a.iv)([g.l0.reset.button,g.l0.p(2),g.l0.rowWithGap(4),g.l0.align.center,S]),text:(0,a.iv)({fontSize:g.TV.fontSizeSmall})},Z={opacity:1};function M(e){var t,r=e.node,a=e.openFile,l=e.expandable,c=void 0===l||l,s=(0,i._)((0,w.useState)(!1),2),f=s[0],v=s[1],m=(0,w.useRef)(null),y=(0,u.Z)(function(e){var t;!f||e.target instanceof HTMLElement&&(null===(t=m.current)||void 0===t?void 0:t.contains(e.target))||v(!1)},[f]),g=(0,w.useId)(),E=(0,w.useId)(),D=(0,_.Il)(r.path)||R.Ql,b=(0,_.UO)(r.path);function T(){var e,t=null===(e=m.current)||void 0===e?void 0:e.getBoundingClientRect();t&&c&&v({x:t.x+"px",y:t.y+t.height+4+"px"})}return(0,o.BX)(o.HY,{children:[(0,o.BX)(p.G,{innerRef:m,tag:"button",id:g,style:f?Z:void 0,"aria-haspopup":"true","aria-expanded":!!f,"aria-controls":E,css:O.button,onClick:function(){c&&(f?v(!1):T())},onKeyDown:function(e){switch(e.key){case" ":case"Enter":case"ArrowDown":if(!c)return;T()}},children:[(0,w.cloneElement)((0,o.tZ)(x,{node:r}),{size:12}),(0,o.tZ)(p.G,{css:O.text,children:b})]}),f&&c?(0,o.tZ)(d.h,{children:(0,o.tZ)(h.Tg,{id:E,css:N.root,innerRef:y,style:(t={},(0,n._)(t,A.menuX,f.x),(0,n._)(t,A.menuY,f.y),t),onKeyDown:function(e){if("Escape"===e.key){var t;v(!1),null===(t=m.current)||void 0===t||t.focus()}},children:(0,o.tZ)(F,{openFile:a,parentPath:D,currentPath:r.path})})}):null]})}function F(e){var t=(0,E.Z)().fs,r=(0,l.Gn)("fontSize").preferences,n=(0,b.T)(!0),i=(0,w.useCallback)(function(e){return!n(e.filename)},[n]),a=(0,D.p)({fs:t,filter:i,focusedPath:e.currentPath,fontSize:r.fontSize,root:e.parentPath,manageWidth:!0,onFileSelect:function(t){var r=t.path;e.openFile(r)},alwaysShowCreateRow:!0});return(0,o.tZ)(D.s,{store:a.store})}var k=(0,a.iv)([g.l0.flex.row,g.l0.align.center,g.l0.height("100%"),g.l0.px(2)]),P=(0,w.memo)(function(e){var t,r,n=e.path,i=e.onFileClick,a=e.expandable,l=void 0===a||a,u=e.children,c=(r=(t=n.split("/")).length,t.map(function(e,n){return{type:n===r-1?T.Tv.File:T.Tv.Directory,path:t.slice(0,n+1).join("/")}}));return(0,o.BX)(p.G,{css:k,children:[c.map(function(e){return(0,o.BX)(w.Fragment,{children:[(0,o.tZ)(M,{node:e,openFile:i,expandable:l}),e.type===T.Tv.Directory?(0,o.tZ)(m.Z,{size:12}):null]},CSS.escape(e.path))}),u||null]})})},99704:function(e,t,r){r.d(t,{s:function(){return nc},p:function(){return nu}});var n,i,o,a,l,u,c,s,f,d,h,p=r(42516),v=r(63257),m=r(3796),y=r(14074),g=r(95281),E=r(93245),D=r(36809),b=r(63163),w=r(75271),_=r(73878),R=r(41733),T=r(30509),x=r(66626),I=r(87915),A=r(16197),C=r(82383),N=r(96134),S=r(10578),O=r(35370),Z=r(86466),M=r(24766),F=r(31940),k=r(54300),P=r(84238),L=r(62466),G={name:"sameWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(e){var t=e.state;t.styles.popper.width="".concat(t.rects.reference.width,"px")},effect:function(e){var t=e.state;t.elements.reference instanceof HTMLElement&&(t.elements.popper.style.width="".concat(t.elements.reference.offsetWidth,"px"))}},H=r(35820),U=r(63062),B=r(14548),z=r(96751),j=r(4573),W=r(52657),V=r(41974),X=r(78054),K=r(27387),$=r(96583),Y=r(48941),J=r(72106),q=r(76539),Q=r(95188),ee=r(55281),et="No files",er="Loading...";function en(e,t){var r=t.fromIndex;if("next"===t.dir){for(var n=r+1;n<e.length;n++){var i=e[n];if(i&&("dir"===i.type||"file"===i.type))return i}return null}for(var o=r-1;o>=0;o--){var a=e[o];if(a&&("dir"===a.type||"file"===a.type))return a}return null}function ei(e,t,r){if(r){var n=q.nh.includes(t.filename),i=q.nh.includes(e.filename);if(n&&!i)return -1;if(!n&&i)return 1;var o=q.uP.includes(t.filename),a=q.uP.includes(e.filename);if(o&&!a)return -1;if(!o&&a)return 1}return t.type===_.Tv.Directory&&e.type!==_.Tv.Directory?1:e.type===_.Tv.Directory&&t.type!==_.Tv.Directory?-1:(0,O.IV)(e.filename,t.filename)}function eo(e){var t=e.row,r=e.baseDepth;return"dir"===t.type||"file"===t.type||"uploadFile"===t.type?t.path===J.Ql?0:(0,O.U$)(t.path)-1-r:t.dir===J.Ql?0:(0,O.U$)(t.dir)-r}var ea=function(e,t){return e===J.Ql?t:e+"/"+t},el=function(e,t){return e===J.Ql&&1===(0,O.U$)(t)||(0,ee.pC)(e,t)},eu=(0,Y.cn)(new Map),ec=(0,Y.cn)({width:0,height:0}),es=(0,Y.cn)(0),ef=(0,Y.cn)(null),ed=(0,Y.cn)(new Map),eh=(0,Y.cn)(function(e){var t;return null!==(t=e(ew).root)&&void 0!==t?t:J.Ql}),ep=(0,Y.cn)(null),ev=(0,Y.cn)(void 0),em=(0,Y.cn)(null),ey=(0,Y.cn)(null,function(e,t,r){e(eR)||t(em,r)}),eg=(0,Y.cn)(function(e){var t=e(ew).root,r=void 0===t?J.Ql:t;return r===J.Ql?0:(0,O.U$)(r)}),eE=(0,Y.cn)(function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=[],n=0,i=!0,o=!1,a=void 0;try{for(var l,u=(0,v._)(e.values()).sort(function(e,t){return e.index-t.index})[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value,s={height:c.height,y:c.y,cols:[]};if(r.push(s),0!==c.depth){var f=c.depth+t;f>n&&(n=f);for(var d="divider"===c.row.type||"error"===c.row.type||"create"===c.row.type||"emptyDir"===c.row.type?c.row.dir:(0,O.Il)(c.row.path),h=d.split("/"),p=0;p<(0,O.U$)(d);p++){var m=h.slice(0,Number(p+1)).join("/");s.cols.push(m)}}}}catch(e){o=!0,a=e}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}for(var y=new Map,g=t;g<n;g++){var E=[];y.set(g,E);var D=!0,b=!1,w=void 0;try{for(var _,R=r[Symbol.iterator]();!(D=(_=R.next()).done);D=!0){var T=_.value,I=T.cols[g],A=T.y;if(I){var C=E[E.length-1];C&&C.y+C.height===A?C.height+=T.height:E.push({y:A,height:T.height,dir:I,depth:g-t})}}}catch(e){b=!0,w=e}finally{try{D||null==R.return||R.return()}finally{if(b)throw w}}}var N=[],S=!0,Z=!1,M=void 0;try{for(var F,k=y[Symbol.iterator]();!(S=(F=k.next()).done);S=!0){var P=(0,x._)(F.value,2),L=(P[0],P[1]);N.push.apply(N,(0,v._)(L))}}catch(e){Z=!0,M=e}finally{try{S||null==k.return||k.return()}finally{if(Z)throw M}}return N}(e(ed),e(eg))}),eD=(0,Y.cn)(!1),eb=(0,Y.cn)(null,function(e,t,r){var n=new Map,i=e(ez),o=e(eg),a=!0,l=!1,u=void 0;try{for(var c,s=r.rows[Symbol.iterator]();!(a=(c=s.next()).done);a=!0){var f=c.value,d=f.key.toString(),h=i[f.index];if(h){var p=Math.max(0,eo({row:h,baseDepth:o}));n.set(f.index,{y:f.start+8,height:f.size,index:f.index,key:d,depth:p,row:h})}}}catch(e){l=!0,u=e}finally{try{a||null==s.return||s.return()}finally{if(l)throw u}}t(ed,n),t(es,r.scrollHeight)}),ew=(0,Y.cn)({}),e_=(0,X.kv)(ew,function(e){var t;return null!==(t=e.onContextMenu)&&void 0!==t?t:null}),eR=(0,Y.cn)(function(e){return!!e(ew).readOnly||!e(eD)}),eT=(0,Y.cn)(function(e){var t;return null!==(t=e(ew).fontSize)&&void 0!==t?t:14}),ex=function(e,t){if("divider"===t)switch(e){case 10:return 28;case 12:case 13:case 14:return 38;case 18:return 44;default:return 48}switch(e){case 10:return 18;case 12:case 13:return 24;case 14:return 32;case 18:return 38;default:return 40}},eI=(0,Y.cn)(function(e){return ex(e(eT),"file")}),eA=function(e){switch(e){case 10:case 12:return 12;case 13:case 14:return 16;case 18:return 20;default:return 24}},eC=(0,Y.cn)(function(e){return eA(e(eT))}),eN=(0,Y.cn)(function(e){return 14>e(eT)?4:8}),eS=(0,Y.cn)(function(e){return 14>=e(eT)?4:8}),eO=(0,Y.cn)(function(e){return 13===e(eT)?6:16>e(eT)?4:8}),eZ=function(e){switch(e){case 10:return 10;case 12:case 13:case 14:return 12;case 18:return 14;default:return 18}},eM=function(e){switch(e){case 10:return 12;case 12:case 13:return 16;case 14:return 24;case 18:return 32;default:return 40}},eF=(0,Y.cn)(function(e){return eM(e(eT))}),ek=(0,Y.cn)(function(e){return eZ(e(eT))}),eP=function(e){switch(e){case 10:case 12:case 13:return 10;case 14:case 18:return 16;default:return 20}},eL=(0,Y.cn)(function(e){return eP(e(eT))}),eG=(0,Y.cn)(new Map);function eH(e){var t=e.filename;return q.nh.includes(t)?"Config files":q.uP.includes(t)?"Packager files":null}var eU=(0,Y.cn)([]),eB=(0,Y.cn)([]),ez=(0,Y.cn)(function(e){var t,r,n=e(ew),i=n.filter,o=n.alwaysShowCreateRow,a=n.root,l=void 0===a?J.Ql:a,u=n.sort,c=n.readOnly;return function(e){var t=e.root,r=void 0===t?J.Ql:t,n=e.dirInfo,i=e.filter,o=e.sort,a=e.getSection,l=e.readOnly,u=e.pendingUploads,c=e.pendingMoves,s=e.pathBeingRenamed,f=e.alwaysShowCreateRow,d=[],h=(null==u?void 0:u.length)?function(e){var t=new Map,r=!0,n=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var l=o.value,u=(0,O.Il)(l.targetPath)||J.Ql,c=t.get(u),s={filename:(0,O.UO)(l.targetPath),progress:l.progress};c?c.push(s):t.set(u,[s])}}catch(e){n=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}return t}(u):null,p=new Map,m=new Map;if(null==c?void 0:c.length){var y=!0,g=!1,E=void 0;try{for(var D,b=c[Symbol.iterator]();!(y=(D=b.next()).done);y=!0){var w=D.value,R=w.from,T=w.to;p.set(R.path,R.type),m.set(T,R.type)}}catch(e){g=!0,E=e}finally{try{y||null==b.return||b.return()}finally{if(g)throw E}}}return!function e(t){var u=n.get(t);if(!(!u||p.has(t))&&u.expanded){if(t===r&&u.loading&&!u.children){d.push({type:"dir",path:t});return}if(u.error){d.push({type:"error",message:u.error.message,dir:t});return}var c=u.children?(0,v._)(u.children):void 0;c&&p.size>0&&(c=c.filter(function(e){return!p.has(ea(t,e.filename))}));var y=!0,g=!1,E=void 0;try{for(var D,b=m[Symbol.iterator]();!(y=(D=b.next()).done);y=!0)!function(){var e=(0,x._)(D.value,2),r=e[0],n=e[1];if(el(t,r)){var i=(0,O.UO)(r);(null==c||!c.some(function(e){return e.filename===i}))&&(c||(c=[]),c.push({filename:i,type:n}))}}()}catch(e){g=!0,E=e}finally{try{y||null==b.return||b.return()}finally{if(g)throw E}}var w=null==h?void 0:h.get(t);if(w){c||(c=[]);var R=!0,T=!1,I=void 0;try{for(var A,C=w[Symbol.iterator]();!(R=(A=C.next()).done);R=!0){var N=A.value,S=N.filename,Z=N.progress;c.push({filename:S,type:_.Tv.File,progress:Z})}}catch(e){T=!0,I=e}finally{try{R||null==C.return||C.return()}finally{if(T)throw I}}}if(c){if(!u.create&&!w&&c&&0===c.length){d.push({type:l?"emptyDir":"create",dir:t});return}var M=function(e,t){var r=t.getSection,n=[],i=new Map,o=!0,a=!1,l=void 0;try{for(var u,c=e[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var s=u.value,f=r(s),d=s.progress?{type:"upload",progress:s.progress,filename:s.filename}:{type:s.type===_.Tv.File?"file":"dir",filename:s.filename};if(!f){n.push(d);continue}var h=i.get(f);if(h){h.push(d);continue}i.set(f,[d])}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}var p=!0,v=!1,m=void 0;try{for(var y,g=i[Symbol.iterator]();!(p=(y=g.next()).done);p=!0){var E=(0,x._)(y.value,2),D=E[0],b=E[1];n.push({type:"divider",label:D}),(0,Q.fN)(n,b)}}catch(e){v=!0,m=e}finally{try{p||null==g.return||g.return()}finally{if(v)throw m}}return n}(c.filter(i).sort(function(e,n){return o(e,n,t===r)}),{getSection:t===J.Ql?a:function(){return null}}),F=-1,k=!0,P=!1,L=void 0;try{for(var G,H=M[Symbol.iterator]();!(k=(G=H.next()).done);k=!0)!function(){var r=G.value;if("error"===r.type||"emptyDir"===r.type)throw Error("Expected dir, file, or divider row");if("divider"===r.type)return -1===F&&(F=d.length),d.push({type:"divider",dir:t,label:r.label});var i=ea(t,r.filename);if("dir"===r.type){var o={type:"dir",path:i};s===i&&(o.rename=!0),m.has(i)&&(o.pending=!0);var a=null==h?void 0:h.get(i);if(a&&(o.uploadProgress=a.map(function(e){return e.progress})),d.push(o),!n.get(i))return;e(i)}else if("upload"===r.type)d.push({type:"uploadFile",path:i,progress:r.progress});else if(!w||!w.some(function(e){return e.filename===r.filename})){var l={type:"file",path:i};s===i&&(l.rename=!0),m.has(i)&&(l.pending=!0),d.push(l)}}()}catch(e){P=!0,L=e}finally{try{k||null==H.return||H.return()}finally{if(P)throw L}}if(u.create||f){var U={type:"create",dir:t,fileType:u.create?u.create:void 0};-1===F?d.push(U):d.splice(F,0,U)}}}}(r),d}({root:l,dirInfo:e(eG),filter:i,sort:void 0===u?ei:u,readOnly:void 0!==c&&c,getSection:eH,pendingUploads:e(eU),pathBeingRenamed:null!==(t=e(em))&&void 0!==t?t:void 0,pendingMoves:null!==(r=e(eB))&&void 0!==r?r:void 0,alwaysShowCreateRow:o})}),ej=(0,Y.cn)(function(e){var t=e(ef);if(!t)return null;var r=e(ez).findIndex(function(e){return("file"===e.type||"dir"===e.type)&&e.path===t});return -1!==r?r:null}),eW=(0,Y.cn)(null,function(e,t,r){var n,i=e(ej),o=e(ef);if((null===(n=document.activeElement)||void 0===n?void 0:n.tagName)!=="INPUT"&&null!==i&&null!==o){var a=e(ez);switch(r.key){case"ArrowDown":r.preventDefault();var l=en(a,{dir:"next",fromIndex:i});((null==l?void 0:l.type)==="dir"||(null==l?void 0:l.type)==="file")&&t(ef,l.path);return;case"ArrowUp":r.preventDefault();var u=en(a,{dir:"previous",fromIndex:i});((null==u?void 0:u.type)==="dir"||(null==u?void 0:u.type)==="file")&&t(ef,u.path);return;case"ArrowLeft":case"ArrowRight":r.preventDefault();var c=e(eG).get(o);if(!c)return;"ArrowLeft"===r.key&&c.expanded?t(eK,o):"ArrowRight"!==r.key||c.expanded||t(eY,o);return;case"Enter":case" ":if("Enter"===r.key&&!e(eR))return;if(e(eG).has(o)){t(eJ,o);return}e(ew).onFileSelect({event:r,path:o,type:"keydown"});return}}}),eV=(0,Y.cn)(null,function(e,t,r){var n;r.path===(null!==(n=e(ew).root)&&void 0!==n?n:J.Ql)&&t(eD,!0),t(eG,function(e){return(0,V.Uy)(e,function(e){var t=r.path===J.Ql?null:r.path+"/",n=!0,i=!1,o=void 0;try{for(var a,l=r.children[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var u,c=a.value,s=t?t+c.filename:c.filename,f=e.get(s);if(c.type!==_.Tv.Directory){f&&(null===(u=f.disposeWatcher)||void 0===u||u.call(f),e.delete(s));continue}f||e.set(s,{expanded:!1})}}catch(e){i=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}var d=e.get(r.path);d&&(d.children=r.children,d.loading=!1,d.error=void 0)})})}),eX=(0,Y.cn)(null,function(e,t,r){var n;r.path===(null!==(n=e(ew).root)&&void 0!==n?n:J.Ql)&&t(eD,!0),t(eG,function(e){return(0,V.Uy)(e,function(e){var t,n=e.get(r.path);n&&(n.loading=!1,n.error=r.error,null===(t=n.disposeWatcher)||void 0===t||t.call(n),n.disposeWatcher=null)})})}),eK=(0,Y.cn)(null,function(e,t,r){var n=Array.isArray(r)?r:[r];t(eG,function(e){return(0,V.Uy)(e,function(e){var t=!0,r=!1,i=void 0;try{for(var o,a=n[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value,u=e.get(l);u&&(u.expanded=!1,u.loading=!1,u.disposeWatcher&&(u.disposeWatcher(),u.disposeWatcher=null))}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}})})}),e$=(0,Y.cn)(null,function(e,t,r){t(eG,function(e){return(0,V.Uy)(e,function(e){var t,n=e.get(r);n&&(null===(t=n.disposeWatcher)||void 0===t||t.call(n),e.delete(r))})})}),eY=(0,Y.cn)(null,function(e,t,r){var n=Array.isArray(r)?r:[r],i=e(ew).fs;t(eG,function(e){return(0,V.Uy)(e,function(e){var r=!0,o=!1,a=void 0;try{for(var l,u=n[Symbol.iterator]();!(r=(l=u.next()).done);r=!0)!function(){var r,n=l.value,o=null!==(r=e.get(n))&&void 0!==r?r:{expanded:!0};e.has(n)?o.expanded=!0:e.set(n,o),o.disposeWatcher?o.disposeWatcher():o.loading=!0,o.disposeWatcher=i.watchDir(n,{onError:function(e){return t(eX,{path:n,error:e})},onChange:function(e){return t(eV,{path:n,children:e})},onMoveOrDelete:function(){return t(e$,n)}})}()}catch(e){o=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}})})}),eJ=(0,Y.cn)(null,function(e,t,r){var n=e(eG).get(r);if(!n){t(eG,function(e){return(0,V.Uy)(e,function(e){e.set(r,{expanded:!1})})}),t(eY,r);return}t(n.expanded?eK:eY,r)}),eq=(0,Y.cn)(function(e){return e(ew).manageWidth?e(eD)?function(e){var t=e.rows,r=e.baseDepth,n=[],i=new Map,o=!0,a=!1,l=void 0;try{for(var u,c=t[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var s=u.value,f=function(e){var t=e.row,r=eo({row:t,baseDepth:e.baseDepth});switch(t.type){case"file":case"dir":case"uploadFile":return{text:(0,O.UO)(t.path),depth:r};case"error":return{text:t.message,depth:r};case"divider":return{text:t.label,depth:r};case"create":case"emptyDir":return{text:et,depth:r}}}({row:s,baseDepth:r}),d=f.depth,h=f.text,p=i.get(d);if(!p){i.set(d,new Map([[s.type,h]]));continue}var v=p.get(s.type);v&&(null==v?void 0:v.length)>h.length||p.set(s.type,h)}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}var m=!0,y=!1,g=void 0;try{for(var E,D=i[Symbol.iterator]();!(m=(E=D.next()).done);m=!0){var b=(0,x._)(E.value,2),w=b[0],_=b[1],R=!0,T=!1,I=void 0;try{for(var A,C=_[Symbol.iterator]();!(R=(A=C.next()).done);R=!0){var N=(0,x._)(A.value,2),S=N[0],Z=N[1];n.push({depth:w,type:S,text:Z})}}catch(e){T=!0,I=e}finally{try{R||null==C.return||C.return()}finally{if(T)throw I}}}}catch(e){y=!0,g=e}finally{try{m||null==D.return||D.return()}finally{if(y)throw g}}return n}({rows:e(ez),baseDepth:e(eg)}):[{type:"dir",text:er,depth:1}]:null}),eQ=(0,Y.cn)(null,function(e,t,r){var n=e(ew).onCreateStart;if(n){n({parentPath:r.parentPath,fileType:r.fileType});return}t(eY,r.parentPath),t(eG,function(e){return(0,V.Uy)(e,function(e){var t=e.get(r.parentPath);t&&(t.create=r.fileType)})}),t(ef,null)}),e0=(0,Y.cn)(null,function(e,t,r){t(eG,function(e){return(0,V.Uy)(e,function(e){var t=e.get(r);t&&(t.create=void 0)})})}),e1=(0,Y.cn)(null,function(e,t,r){var n={path:r.path,type:r.fileType};t(ef,n.path),t(e7,{node:n}),t(eG,function(e){return(0,V.Uy)(e,function(e){var t=e.get(r.parentPath);t&&(t.create=void 0)})}),n.type===_.Tv.Directory&&t(eY,n.path)}),e2=(0,Y.cn)(new Map),e5=(0,Y.cn)(null),e4=(0,Y.cn)(function(e){var t,r;return null!==(r=null===(t=e(e5))||void 0===t?void 0:t.path)&&void 0!==r?r:null}),e3=(0,Y.cn)(!0),e7=(0,Y.cn)(null,function(e,t,r){var n=r.node,i=r.mode,o=e(ez),a=e(e5);t(e3,!i),t(e2,function(e){return(0,V.Uy)(e,function(e){!function(e,t){var r=t.node,n=t.rows,i=t.mode,o=t.anchor;if(!i){e.clear(),e.set(r.path,r.type);return}if("multi"===i&&e.has(r.path)){e.delete(r.path);return}if("multi"===i){e.set(r.path,r.type);return}var a=r.type===_.Tv.Directory?"dir":"file",l=n.findIndex(function(e){return e.type===a&&e.path===r.path});if(-1!==l){var u=(null==o?void 0:o.type)===_.Tv.Directory?"dir":"file",c=o?n.findIndex(function(e){return e.type===u&&e.path===o.path}):-1;if(-1!==c){var s=c<l?n.slice(c,l+1):n.slice(l,c+1),f=!0,d=!1,h=void 0;try{for(var p,v=n[Symbol.iterator]();!(f=(p=v.next()).done);f=!0){var m=p.value;("file"===m.type||"dir"===m.type)&&(s.includes(m)?e.set(m.path,"file"===m.type?_.Tv.File:_.Tv.Directory):e.delete(m.path))}}catch(e){d=!0,h=e}finally{try{f||null==v.return||v.return()}finally{if(d)throw h}}}}}(e,{node:n,rows:o,mode:i,anchor:a})})});var l=e(e2);if(!(l.size>1)){var u=!0,c=!1,s=void 0;try{for(var f,d=l[Symbol.iterator]();!(u=(f=d.next()).done);u=!0){var h=(0,x._)(f.value,2),p=h[0],v=h[1];t(e5,{path:p,type:v})}}catch(e){c=!0,s=e}finally{try{u||null==d.return||d.return()}finally{if(c)throw s}}}}),e6=(0,Y.cn)(null,function(e,t){t(e2,new Map),t(e3,!0),t(e5,null)}),e8=(0,Y.cn)(null,(n=(0,K._)(function(e,t,r){var n,i,o;return(0,$.Jh)(this,function(a){switch(a.label){case 0:var l;return n=e(ew).fs,[4,Promise.all(r.map((l=(0,K._)(function(e){var t;return(0,$.Jh)(this,function(r){switch(r.label){case 0:return[4,n.readDir(e)];case 1:return[2,(t=r.sent()).error?t:{path:e,children:t.children,error:null}]}})}),function(e){return l.apply(this,arguments)})))];case 1:if((o=(i=a.sent()).filter(function(e){return null!==e.error})).length)return[2,{errors:o}];return t(eG,function(e){return(0,V.Uy)(e,function(e){var t=!0,r=!1,n=void 0;try{for(var o,a=i[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(l.error)throw Error("Unexpected error");var u=e.get(l.path);if(!u){e.set(l.path,{loading:!1,expanded:!0,children:l.children,error:void 0});continue}u.loading=!1,u.expanded=!0,u.children=l.children,u.error=void 0}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}})}),[2,{errors:null}]}})}),function(e,t,r){return n.apply(this,arguments)})),e9=(0,Y.cn)(null,(i=(0,K._)(function(e,t,r){var n,i,o,a,l,u,c,s,f;return(0,$.Jh)(this,function(d){switch(d.label){case 0:n=e(eG),i=[],o=!0,a=!1,l=void 0;try{var h;for(u=((h=r.path.split("/")).pop(),[J.Ql].concat((0,v._)(h.map(function(e,t){return h.slice(0,t+1).join("/")}))))[Symbol.iterator]();!(o=(c=u.next()).done);o=!0)s=c.value,null!=(f=n.get(s))&&f.expanded||i.push(s)}catch(e){a=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}if(!i.length)return[3,2];return[4,t(e8,i)];case 1:d.sent(),d.label=2;case 2:return t(e7,{node:r}),[2]}})}),function(e,t,r){return i.apply(this,arguments)})),te=(0,Y.cn)(null),tt=(0,Y.cn)(null,function(e,t,r){var n=e(te);if(n)for(var i=e(ez),o=0;o<i.length;o++){var a=i[o];if(("file"===a.type||"dir"===a.type)&&a.path===r&&!(o>n.options.count-1)){n.scrollToIndex(o);break}}}),tr=r(3702),tn=r(36309),ti=r(85604),to=(0,w.createContext)(null);function ta(e){return(0,m.tZ)(to.Provider,{value:e.store,children:e.children})}function tl(){var e=(0,w.useContext)(to);if(!e)throw Error("Expected store in context");return e}function tu(e){return(0,tn.Dv)(e,{store:tl()})}function tc(e){return(0,tr.b)(e,tl())}var ts=function(e){return(0,tn.b9)(e,{store:tl()})};function tf(e){return(0,ti.lV)((0,w.useCallback)(function(t){return t(e)},[e]),{store:tl()})}var td=(0,r(22192).$)(["scrollHeight","fontSize","fontSizeSmall","iconSize","horizontalPadding","borderRadius","gutterWidth","minHeight","iconTextGap","rowWidth","rowHeight","rowLeftIndent","rowY","dropPreviewDepth","dropPreviewHeight","dropPreviewY","dropPreviewOpacity","strokeDashoffset","statusColor","statusBackgroundColor","dirStatusIconSize","nodeBackgroundColor","dragPreviewX","dragPreviewY","contextMenuButtonDisplay","hasUnsavedChangesDisplay"]),th=td.cssVars,tp=td.styleTokens,tv={paddingLeft:tp.horizontalPadding,paddingRight:tp.horizontalPadding},tm={"&& svg":{minWidth:tp.iconSize+" !important",minHeight:tp.iconSize+" !important",width:tp.iconSize+" !important",height:tp.iconSize+" !important"}},ty=[b.l0.truncate,{fontSize:tp.fontSize}],tg=(0,X.kv)(ew,function(e){return e.autocomplete}),tE=(0,D.X)({icon:[tm,{marginRight:tp.iconTextGap}],item:[tv,b.l0.flex.row,b.l0.align.center,Z.gU.listItem,{height:tp.rowHeight}],text:[ty,b.l0.flex.growAndShrink(1)]});function tD(e){var t=e.id,r=e.items,n=e.activeIndex,i=e.onSuggestion,o=e.fileType,a=e.innerRef;return(0,m.tZ)(E.G,{tag:"ul",id:t,"aria-label":"Suggestions",innerRef:a,children:r.map(function(e,t){var r=t===n;return(0,m.BX)(E.G,{id:e.value,tag:"li",role:"option","aria-selected":r,style:{backgroundColor:r?Z.vb.interactiveBackground:void 0,color:r?b.TV.foregroundDefault:b.TV.foregroundDimmer},onClick:function(){return i(e.value)},css:tE.item,children:[(0,m.tZ)(E.G,{css:tE.icon,children:o===_.Tv.Directory?(0,m.tZ)(C.Z,{}):(0,m.tZ)(I.Z,{path:e.value})}),(0,m.tZ)(j.x,{css:tE.text,text:e.value,highlight:e.highlight,dimmed:!r})]},e.value)})})}var tb=r(54455),tw=r(58474),t_=r(83059),tR=r(1567),tT=r(48487),tx=r(81202),tI=r.n(tx),tA=r(43257);function tC(e){var t=e.fileName,r=e.parentPath,n=r===J.Ql?"":r+"/",i=n+t,o=i.split("/");return{pathPrefix:n,newFilePath:i,segments:o}}function tN(e){return tS.apply(this,arguments)}function tS(){return(tS=(0,K._)(function(e){var t,r,n,i,o,a,l,u,c,s,f,d,h,p,v,m,y,g,E;return(0,$.Jh)(this,function(D){switch(D.label){case 0:if(t=e.fileName,r=e.parentPath,n=e.fs,t.startsWith("/"))return[2,"File names cannot include forward slashes"];o=(i=tC({fileName:t,parentPath:r})).pathPrefix,a=i.newFilePath,l=i.segments,u=!0,c=!1,s=void 0,D.label=1;case 1:D.trys.push([1,7,8,9]),f=Object.entries(l)[Symbol.iterator](),D.label=2;case 2:if(u=(d=f.next()).done)return[3,6];if(p=(h=(0,x._)(d.value,2))[0],v=h[1],m=Number(p),y=[],m!==l.length-1)return[3,4];return[4,n.stat(a)];case 3:D.sent().exists&&y.push((0,O.UO)(a)),D.label=4;case 4:if(!(g=(0,tT.z)({fileName:v,siblingNames:y,parentPath:o+l.slice(0,m).join("/")})))return[3,5];return[2,g];case 5:return u=!0,[3,2];case 6:return[3,9];case 7:return E=D.sent(),c=!0,s=E,[3,9];case 8:try{u||null==f.return||f.return()}finally{if(c)throw s}return[7];case 9:return[2,null]}})})).apply(this,arguments)}function tO(e){var t=tC({fileName:e.fileName,parentPath:e.parentPath}),r=t.pathPrefix,n=t.segments,i=!0,o=!1,a=void 0;try{for(var l,u=Object.entries(n)[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=(0,x._)(l.value,2),s=c[0],f=c[1],d=Number(s),h=(0,tT.z)({fileName:f,siblingNames:[],parentPath:r+n.slice(0,d).join("/")});if(h)return h}}catch(e){o=!0,a=e}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}return null}function tZ(e,t){return e.shiftKey?"bulk":"altKey"===t&&e.altKey||"cmdOrCtrlKey"===t&&(0,tR.jh)(e)?"multi":void 0}var tM=(0,Y.cn)(null,function(e,t,r){var n=r.event,i=r.path;t(ef,i);var o=e(ew).multiselectModifierKey;t(e7,{node:{path:i,type:_.Tv.Directory},mode:o?tZ(n,o):void 0}),t(ef,i),n.shiftKey||n.altKey||(0,tR.jh)(n)||t(eJ,i)});function tF(){return{fontSize:tc(eT),fontSizeSmall:tc(ek),iconSize:tc(eC),scrollHeight:tc(es),horizontalPadding:tc(eN),borderRadius:tc(eS),gutterWidth:tc(eL),minHeight:tc(eI),iconTextGap:tc(eO)}}function tk(e){return tu((0,t_.Z)(function(){return(0,X.kv)(ef,function(t){return t===e?0:-1})},[e]))}function tP(e){return tu((0,t_.Z)(function(){return(0,X.kv)(ed,function(t){var r,n=t.get(e);return n?{style:(r={},(0,p._)(r,th.rowHeight,n.height+"px"),(0,p._)(r,th.rowY,n.y+"px"),(0,p._)(r,th.rowLeftIndent,"calc(".concat(n.depth," * ").concat(tp.gutterWidth,")")),r),depth:n.depth}:void 0},tI())},[e]))}function tL(e){var t=e.index,r=e.path,n=(0,w.useRef)(null),i=tc(ef);return(0,w.useEffect)(function(){var e=function(e){var t;null===(t=n.current)||void 0===t||t.setAttribute("tabIndex",e.toString())},o=function(n){if(!n){e(0===t?0:-1);return}e(n===r?0:-1)};return o(i.current),i.subscribe(o)},[i,r,t]),(0,w.useEffect)(function(){var e=function(e){null!==t&&clearTimeout(t),e===r&&document.activeElement!==n.current&&(t=setTimeout(function(){var e;null===(e=n.current)||void 0===e||e.focus()},50))},t=null;e(i.current);var o=i.subscribe(e);return function(){null!==t&&clearTimeout(t),o()}},[i,r]),[n,ts(ef)]}var tG=[tp.horizontalPadding,tp.iconSize,tp.iconTextGap].join(" + "),tH=[Z.gU.filled,{height:"100%",width:"100%",paddingLeft:"calc(".concat(tG,")"),paddingRight:tp.horizontalPadding,fontSize:tp.fontSize}],tU=(0,D.X)({root:[b.l0.flex.row,tv,{padding:tp.horizontalPadding}],icon:[tm,b.l0.color.accentNegativeDefault,{marginRight:tp.iconTextGap}],text:[{fontSize:tp.fontSize},b.l0.color.foregroundDimmer,b.l0.flex.growAndShrink(1)]});function tB(e){return(0,m.BX)(E.G,{css:tU.root,children:[(0,m.tZ)(E.G,{css:tU.icon,children:(0,m.tZ)(k.Z,{})}),(0,m.tZ)(E.G,{css:tU.text,children:e.message})]})}var tz=(0,D.X)({root:[b.l0.position.relative,b.l0.flex.growAndShrink(1),{height:"100%"}],icon:[tm,b.l0.position.absolute,b.l0.left(tp.horizontalPadding),b.l0.top("50%"),{transform:"translateY(-50%)"}],input:tH,inputLoading:[tH,H.p.backgroundPulse()],menu:[b.l0.overflow("hidden"),{borderRadius:tp.borderRadius,border:"1px solid",borderColor:b.TV.outlineDefault}],label:[b.l0.visuallyHidden]});function tj(e){var t,r,n,i,o,a,l,u,c,s,f,d=(0,w.useId)(),h=(0,w.useId)(),v=(t=(0,w.useRef)(null),r=tF(),(0,g.j)(t,r.fontSize,function(e){return(0,p._)({},th.fontSize,e+"px")}),(0,g.j)(t,r.iconTextGap,function(e){return(0,p._)({},th.iconTextGap,e+"px")}),(0,g.j)(t,r.borderRadius,function(e){return(0,p._)({},th.borderRadius,e+"px")}),(0,g.j)(t,r.horizontalPadding,function(e){return(0,p._)({},th.horizontalPadding,e+"px")}),(0,g.j)(t,r.iconSize,function(e){return(0,p._)({},th.iconSize,e+"px")}),(0,g.j)(t,r.fontSize,function(e){return(0,p._)({},th.rowHeight,ex(e,"file")+"px")}),(0,g.j)(t,r.iconTextGap,function(e){return(0,p._)({},th.iconTextGap,e+"px")}),i=(n=(0,x._)((0,w.useState)(null),2))[0],o=n[1],l=(a=(0,x._)((0,w.useState)(null),2))[0],u=a[1],s=(c=(0,z.D)(i,l,{modifiers:[{name:"offset",options:{offset:[0,4]}},G],placement:"bottom-start"})).styles,f=c.attributes,{menuRef:(0,y.l)(t,u),menuAnchorRef:o,styles:s.popper,attributes:f.popper}),D=function(e){var t=e.onSuggestion,r=e.siblings,n=e.value,i=tu(tg),o=(0,x._)((0,w.useState)({items:[],activeIndex:null}),2),a=o[0],l=o[1],u=(0,W.Z)(r),c=(0,W.Z)(n),s=(0,x._)((0,w.useTransition)(),2)[1],f=i?function(e){s(function(){var t=i(e);l(function(e){return(0,V.Uy)(e,function(e){e.items=t.filter(function(e){return e.value!==c.current&&!u.current.some(function(t){return t.filename===e.value})})})})})}:null;function d(){l({items:[],activeIndex:null})}return{items:a.items.length?a.items:null,activeIndex:a.activeIndex,query:f,onKeyDown:function(e){if("Enter"===e.key){var r=null!==a.activeIndex?a.items[a.activeIndex]:null;if(!r)return;return e.preventDefault(),t(r.value),d(),!0}return"ArrowDown"===e.key?(e.preventDefault(),l(function(e){return(0,V.Uy)(e,function(e){if(null===e.activeIndex||e.activeIndex>e.items.length-1){e.activeIndex=0;return}e.activeIndex++})}),!0):"ArrowUp"===e.key?(e.preventDefault(),l(function(e){return(0,V.Uy)(e,function(e){if(null===e.activeIndex){e.activeIndex=e.items.length-1;return}if(0===e.activeIndex){e.activeIndex=null;return}e.activeIndex--})}),!0):void 0},clear:d}}({onSuggestion:e.onSuggestion,siblings:e.siblings,value:e.value}),b=tf(te),A=(0,x._)((0,w.useState)(!0),2),N=A[0],S=A[1],O=(0,w.useRef)(null);(0,w.useEffect)(function(){if(O.current){var e,t=null===(e=b())||void 0===e?void 0:e.scrollElement;if(t)return(0,L.j)(O.current,function(){return S(!0),function(){return S(!1)}},{root:t})}},[b]);var Z=N&&!!(e.error||D.items),M=D.items&&D.activeIndex?D.items[D.activeIndex]:void 0,F=!e.error&&D.items?D.items:null,k=(0,w.useRef)(null),H=D.clear,j=(0,P.Z)(function(e){var t;null!==(t=k.current)&&void 0!==t&&t.contains(e.target)||H()},[H]),X=(0,P.Z)(function(t){var r,n,i=e.inputRef.current;!i||(null===(r=k.current)||void 0===r?void 0:r.contains(t.target))||(null===(n=j.current)||void 0===n?void 0:n.contains(t.target))||e.onClickOutside({inputValue:i.value})},[]);return(0,m.BX)(m.HY,{children:[(0,m.tZ)("label",{css:tz.label,htmlFor:d,children:"file name"}),(0,m.BX)(E.G,{css:tz.root,innerRef:(0,y.l)(k,v.menuAnchorRef),children:[(0,m.tZ)(E.G,{css:tz.icon,children:e.fileType===_.Tv.Directory?(0,m.tZ)(C.Z,{}):(0,m.tZ)(I.Z,{path:e.value})}),(0,m.tZ)("input",{spellCheck:!1,"aria-controls":D.query?h:void 0,"aria-expanded":D.items?"true":"false","aria-activedescendant":null==M?void 0:M.value,role:D.query?"combobox":void 0,id:d,ref:(0,y.l)(e.inputRef,O,X),css:e.loading?tz.inputLoading:tz.input,value:e.value,onChange:e.loading?void 0:function(t){var r;e.onChange(t),null===(r=D.query)||void 0===r||r.call(D,{input:t.currentTarget.value,fileType:e.fileType,type:e.type,siblings:e.siblings})},onKeyDown:function(t){D.onKeyDown(t)||e.onKeyDown(t)}})]}),(0,m.tZ)(U.h,{children:(0,m.BX)(B.Tg,(0,T._)((0,R._)({css:tz.menu,elevated:!0,innerRef:v.menuRef,style:(0,T._)((0,R._)({},v.styles),{display:Z?"block":"none"})},v.attributes),{children:[e.error?(0,m.tZ)(tB,{message:e.error}):null,F?(0,m.tZ)(tD,{id:h,innerRef:j,items:F,activeIndex:D.activeIndex,onSuggestion:function(t){e.onSuggestion(t),H()},fileType:e.fileType}):null]}))})]})}var tW=(0,D.X)({createFilePicker:[b.l0.align.center,b.l0.rowWithGap(4),{fontSize:tp.fontSize,paddingRight:tp.horizontalPadding,paddingLeft:tp.horizontalPadding}],button:[b.l0.reset.button,b.l0.p(2),Z.gU.filled,b.l0.color.foregroundDimmer,{fontSize:"inherit"}],text:[ty,b.l0.color.foregroundDimmest],label:[b.l0.visuallyHidden]});function tV(e){var t,r,n,i,o,a,l,u,c,s,f,d,h,p,v,y,g,E,D,b,R,T=(t=e.dir,n=ts(eQ),i=ts(e0),o=ts(e1),l=(a=(0,x._)((0,w.useState)(""),2))[0],u=a[1],c=tf(ew),f=(s=(0,x._)((0,w.useState)(!1),2))[0],d=s[1],p=(h=(0,x._)((0,w.useState)(null),2))[0],v=h[1],y=(0,t_.Z)(function(){return(0,X.kv)(eG,function(e){return e.get(t)})},[t]),g=(0,t_.Z)(function(){return(0,X.kv)(y,function(e){var t;return null!==(t=null==e?void 0:e.create)&&void 0!==t?t:null})},[y]),E=tu((0,t_.Z)(function(){return(0,X.kv)(y,function(e){var t;return null!==(t=null==e?void 0:e.children)&&void 0!==t?t:null})},[y])),D=tu(g),b=(0,K._)(function(e){var r,n,i,a,l,s,f,h,p,m;return(0,$.Jh)(this,function(y){switch(y.label){case 0:if(!D||(a=(i=c()).readOnly,l=i.fs,a))return[2];if(s=null,0!==e.length)return[3,1];return s="File names cannot be empty",[3,4];case 1:if(!e.includes("/"))return[3,3];return[4,tN({fileName:e,parentPath:t,fs:l})];case 2:return s=y.sent(),[3,4];case 3:s=(0,tT.z)({fileName:e,siblingNames:null!==(f=null==E?void 0:E.map(function(e){return e.filename}))&&void 0!==f?f:[],parentPath:t}),y.label=4;case 4:if(s)return v(s),[2];if((p=(h=t===J.Ql?null:t+"/")?h+e:e).includes("//")&&(p=p.split("/").filter(function(e){return e.length>0}).join("/")),d(!0),D!==_.Tv.Directory)return[3,6];return[4,l.createDir(p)];case 5:return m=y.sent(),[3,8];case 6:return[4,l.writeFile(p,new tA.Z(""))];case 7:m=y.sent(),y.label=8;case 8:if(m.error)return v("Something went wrong"),[2];return d(!1),u(""),o({parentPath:t,path:p,fileType:D}),null===(r=(n=c()).onCreate)||void 0===r||r.call(n,{path:p,type:D}),[2]}})}),!(R=p)&&l.includes("/")?R=tO({fileName:l,parentPath:t}):R||(R=(0,tT.z)({fileName:l,siblingNames:null!==(r=null==E?void 0:E.map(function(e){return e.filename}))&&void 0!==r?r:[],parentPath:t})),{value:l,setValue:u,fileType:D,create:function(e){return b.apply(this,arguments)},creating:f,error:R,clearError:function(){return v(null)},cancel:(0,t_.Z)(function(){return function(){return i(t)}},[t,i]),start:(0,t_.Z)(function(){return function(e){return n({parentPath:t,fileType:e})}},[t,n]),siblings:E}),I=(0,w.useRef)(null);return((0,w.useEffect)(function(){var e;T.fileType&&(null===(e=I.current)||void 0===e||e.focus())},[T.fileType]),T.fileType)?(0,m.tZ)(tj,{siblings:T.siblings||[],type:"create",inputRef:I,loading:T.creating,error:T.error,value:T.value,fileType:T.fileType,onClickOutside:function(e){var t=e.inputValue;if(""===t){T.cancel();return}T.create(t)},onChange:function(e){T.error&&T.clearError(),T.setValue(e.currentTarget.value)},onKeyDown:function(e){if("Escape"===e.key){T.cancel();return}"Enter"===e.key&&T.create(e.currentTarget.value)},onSuggestion:function(e){T.setValue(e),T.create(e)}}):(0,m.tZ)(tX,{create:T.start})}function tX(e){return(0,m.BX)(E.G,{css:tW.createFilePicker,children:[(0,m.tZ)(E.G,{css:tW.text,children:"Add a"}),(0,m.tZ)(E.G,{tag:"button",css:tW.button,onClick:function(){return e.create(_.Tv.File)},children:"file"}),(0,m.tZ)(E.G,{css:tW.text,children:"or "}),(0,m.tZ)(E.G,{tag:"button",css:tW.button,onClick:function(){return e.create(_.Tv.Directory)},children:"folder"})]})}var tK=(0,D.X)({root:[{marginLeft:"auto",paddingLeft:tp.horizontalPadding}],svg:[{transform:"rotate(-90deg)",transformOrigin:"center center","& .inner-circle":{strokeDashoffset:tp.strokeDashoffset}}]});function t$(e){var t=tu(eT)/2,r=t/2,n=2*r*Math.PI,i=(0,w.useRef)(null);return(0,g.j)(i,e.progress,function(e){return(0,p._)({},th.strokeDashoffset,(n-e*n).toString())}),(0,m.tZ)(E.G,{innerRef:i,css:tK.root,children:(0,m.BX)("svg",{css:tK.svg,height:2*t,width:2*t,children:[(0,m.tZ)("circle",{fill:b.TV.backgroundHigher,r:t,cx:t,cy:t}),(0,m.tZ)("circle",{className:"inner-circle",stroke:b.TV.foregroundDimmest,fill:"transparent",strokeWidth:t,strokeDasharray:n+" "+n,r:r,cx:t,cy:t})]})})}var tY=function(e){return e.reduce(function(e,t){return e+t.current},0)/e.length};function tJ(e){var t,r,n,i,o=tu(eT)/2,a=o/2,l=2*a*Math.PI,u=(t=e.uploadProgress,n=(r=(0,x._)((0,w.useState)(tY(t)),2))[0],i=r[1],(0,w.useEffect)(function(){var e=[],r=!0,n=!1,o=void 0;try{for(var a,l=t[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var u=a.value;e.push(u.subscribe(function(){i(tY(t))}))}}catch(e){n=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(n)throw o}}return function(){e.map(function(e){return e()})}},[t]),n),c=(0,w.useRef)(null);return(0,m.tZ)(E.G,{innerRef:c,css:tK.root,children:(0,m.BX)("svg",{css:tK.svg,height:2*o,width:2*o,children:[(0,m.tZ)("circle",{fill:b.TV.backgroundHigher,r:o,cx:o,cy:o}),(0,m.tZ)("circle",{className:"inner-circle",style:(0,p._)({},th.strokeDashoffset,(l-u*l).toString()),stroke:b.TV.foregroundDimmest,fill:"transparent",strokeWidth:o,strokeDasharray:l+" "+l,r:a,cx:o,cy:o})]})})}function tq(e){var t,r,n,i,o,a,l,u,c,s,f,d,h,p,v,y,g,E,D,b,R,T=(0,x._)((t={path:e.path,type:e.fileType},n=tf(ew),o=(i=(0,x._)((0,w.useState)(null),2))[0],a=i[1],l=(0,O.Il)(t.path)||J.Ql,u=(0,O.UO)(t.path),c=ts(em),s=ts(ef),d=(f=(0,x._)((0,w.useState)(u),2))[0],h=f[1],v=(p=(0,x._)((0,w.useState)(!1),2))[0],y=p[1],g=(0,t_.Z)(function(){return(0,X.kv)(eG,function(e){var t;return null===(t=e.get(l))||void 0===t?void 0:t.children})},[l]),E=d!==u,D=tu(g),b=null,E&&d.includes("/")?b=tO({fileName:d,parentPath:l}):E&&(b=(0,tT.z)({fileName:d,siblingNames:null!==(r=null==D?void 0:D.map(function(e){return e.filename}))&&void 0!==r?r:[],parentPath:l})),R=(0,K._)(function(e){var r,i,o,f,d,h,p,v,m,g,E;return(0,$.Jh)(this,function(w){switch(w.label){case 0:if(b||!e||e===u||(i=(r=n()).readOnly,o=r.fs,f=r.onFileRenameStart,d=r.onFileRenameEnd,i))return[2];if(h=null,!e.includes("/"))return[3,2];return[4,tN({fileName:e,parentPath:l,fs:o})];case 1:return h=w.sent(),[3,3];case 2:h=(0,tT.z)({fileName:e,siblingNames:null!==(p=null==D?void 0:D.map(function(e){return e.filename}))&&void 0!==p?p:[],parentPath:l}),w.label=3;case 3:if(h)return a(h),[2];if(m=(v=l===J.Ql?null:l+"/")?v+e:e,g=(0,O.Il)(m)||J.Ql,y(!0),null==f||f({from:t.path,to:m}),!(g!==J.Ql))return[3,6];return[4,o.stat(g)];case 4:if(w.sent().exists)return[3,6];return[4,o.createDir(g)];case 5:w.sent(),w.label=6;case 6:if(t.type!==_.Tv.Directory)return[3,8];return[4,o.moveDir(t.path,m)];case 7:return E=w.sent(),[3,10];case 8:return[4,o.moveFile(t.path,m)];case 9:E=w.sent(),w.label=10;case 10:if(E.error)return a("Something went wrong"),y(!1),null==d||d(),[2];return c(null),null==d||d(),s(m),[2]}})}),[{canRename:!!d&&E&&!b,value:d,renaming:v,error:o||b,siblings:D},{setValue:h,rename:function(e){return R.apply(this,arguments)},cancel:function(){var e=n().onFileRenameEnd;c(null),null==e||e(),s(t.path)}}]),2),I=T[0],A=T[1],C=A.setValue,N=A.rename,S=A.cancel,Z=(0,w.useRef)(null),M=(0,w.useRef)(I.value);return(0,w.useEffect)(function(){if(Z.current){var e=M.current;if(e){var t=e.lastIndexOf(".");t<=1&&(t=e.length);var r=e.startsWith(".")?1:0;Z.current.focus(),Z.current.setSelectionRange(r,t)}}},[]),(0,m.tZ)(tj,{siblings:I.siblings?I.siblings.filter(function(t){return t.filename!==(0,O.UO)(e.path)}):[],type:"rename",inputRef:Z,loading:I.renaming,error:I.error,value:I.value,fileType:e.fileType,onClickOutside:function(e){var t=e.inputValue;I.canRename?N(t):I.error||S()},onChange:function(e){C(e.currentTarget.value)},onKeyDown:function(e){if("Escape"===e.key){S();return}"Enter"!==e.key||(I.canRename?N(e.currentTarget.value):I.error||S())},onSuggestion:function(e){C(e),N(e)}})}var tQ=r(84082),t0=(u={},(0,p._)(u,tQ.hF.ADDED,"A"),(0,p._)(u,tQ.hF.UNTRACKED,"A"),(0,p._)(u,tQ.hF.MODIFIED,"M"),(0,p._)(u,tQ.hF.DELETED,"D"),(0,p._)(u,tQ.hF.RENAMED,"R"),(0,p._)(u,tQ.hF.COPIED,"C"),u),t1=(c={},(0,p._)(c,tQ.hF.ADDED,b.TV.greenDimmest),(0,p._)(c,tQ.hF.UNTRACKED,b.TV.greenDimmest),(0,p._)(c,tQ.hF.MODIFIED,b.TV.yellowDimmest),(0,p._)(c,tQ.hF.DELETED,b.TV.redDimmest),(0,p._)(c,tQ.hF.RENAMED,b.TV.tealDimmest),(0,p._)(c,tQ.hF.COPIED,b.TV.limeDimmest),c),t2=(s={},(0,p._)(s,tQ.hF.ADDED,b.TV.greenStrongest),(0,p._)(s,tQ.hF.UNTRACKED,b.TV.greenStrongest),(0,p._)(s,tQ.hF.MODIFIED,b.TV.yellowStrongest),(0,p._)(s,tQ.hF.DELETED,b.TV.redStrongest),(0,p._)(s,tQ.hF.RENAMED,b.TV.tealStrongest),(0,p._)(s,tQ.hF.COPIED,b.TV.limeStrongest),s);function t5(e){return e===tQ.hF.ADDED||e===tQ.hF.UNTRACKED||e===tQ.hF.MODIFIED||e===tQ.hF.DELETED||e===tQ.hF.RENAMED||e===tQ.hF.COPIED}var t4={color:tp.statusColor,fontSize:tp.fontSizeSmall,minWidth:tp.dirStatusIconSize,height:tp.dirStatusIconSize},t3=(0,D.X)({fileIcon:[b.l0.fontWeight.bold,b.l0.px(2),b.l0.center,t4],directoryCountIcon:[b.l0.fontWeight.medium,b.l0.borderRadius(4),b.l0.px(2),b.l0.center,t4,{backgroundColor:tp.statusBackgroundColor}],directoryDraftBufferIndicator:[b.l0.width(8),b.l0.height(8),b.l0.ml(8),b.l0.border({color:b.TV.foregroundDimmer,width:1}),{borderRadius:"50%"}],fileDraftBufferIndicator:[b.l0.width(8),b.l0.height(8),b.l0.backgroundColor.foregroundDimmer,{borderRadius:"50%"}]});function t7(e){return(0,m.tZ)(E.G,{css:t3.fileIcon,children:(0,m.tZ)(E.G,{children:e.text})})}function t6(e){return(0,m.tZ)(E.G,{css:t3.directoryCountIcon,children:(0,m.tZ)(E.G,{children:e.count})})}var t8=r(74044),t9=r(37654),re=r(83619),rt=r(99595),rr=r(2047),rn=r(33024),ri=r.n(rn),ro=r(30826),ra=r.n(ro);function rl(e,t,r){return Math.floor(Math.min(t,Math.max(e,r)))}var ru=r(49115),rc=r(25731);function rs(){return(rs=(0,K._)(function(e){var t,r,n,i,o,a,l,u,c,s,f,d;return(0,$.Jh)(this,function(h){switch(h.label){case 0:var p;if(t=e.parentPath,r=e.overwrite,n=e.fs,i=e.files,o=e.onStart,a=e.onUpload,l=e.onError,u=e.onDone,c=e.envMigrationFlag,i.length>1e6)throw Error("Trying to upload too many files at once.");if(i.reduce(function(e,t){return t.size+e},0)>104857600)throw Error("Total file upload size exceeds maximum limit.");return p=(0,K._)(function(e){var t,i,o,u,s,f,d;return(0,$.Jh)(this,function(h){switch(h.label){case 0:if(t=e.targetPath,i=e.file,o=e.progress,r)return[3,2];return[4,n.stat(t)];case 1:if(h.sent().exists)return l(u={file:i,path:t,error:"ALREADY_EXIST"}),[2,u];h.label=2;case 2:s=null,h.label=3;case 3:return h.trys.push([3,5,,6]),[4,(0,ru.pV)(i)];case 4:return s=h.sent(),[3,6];case 5:return h.sent(),l(f={file:i,path:t,error:"FILE_READ"}),[2,f];case 6:return d=tA.Z.from(s),[4,n.transferFile(t,d,function(e,t){o.current=t/e},c)];case 7:return h.sent(),a({file:i,path:t}),[2,{path:t,file:i}]}})}),s=function(e){return p.apply(this,arguments)},o(f=i.map(function(e){var r=e.dirPath||e.webkitRelativePath||e.name;return{targetPath:t?t+"/"+r:r,progress:(0,rc.u)(0),file:e}})),[4,Promise.all(f.map(s))];case 1:return d=h.sent(),u({parentPath:t,uploads:d.filter(function(e){return!("error"in e)}),errors:d.reduce(function(e,t){return"error"in t?(0,v._)(e).concat([t]):e},[])}),[2]}})})).apply(this,arguments)}(o=f||(f={})).AlreadyExists="ALREADY_EXIST",o.FileRead="FILE_READ",o.Network="NETWORK";var rf=r(47495),rd=r(97676),rh=r(79527),rp=r(6191),rv=r(30967);function rm(e,t){if(t===e.path)return!1;var r=t+"/"+(0,O.UO)(e.path);return!(r===e.path||(0,ee.yr)(e.path,t)||(0,ee.yr)(r,e.path))}var ry=(0,Y.cn)(null,(a=(0,K._)(function(e,t,r){var n,i,o,a,l,u,c,s,f,d;return(0,$.Jh)(this,function(h){var p,v,m,y,g,E,D,b;switch(h.label){case 0:if(i=null==(n=e(eG).get(r.to))?void 0:n.children)return[3,2];return[4,e(ew).fs.readDir(r.to)];case 1:if((o=h.sent()).error)return[2];i=o.children,h.label=2;case 2:if(!i)throw Error("Expected children");if(p=r.nodes,v=r.to,m=i,a=p.reduce(function(e,t){var r=(0,O.UO)(t.path),n=(0,O.Il)(t.path),i=null==m?void 0:m.find(function(e){return e.filename===r});return i&&(""===n?J.Ql:n)!==v&&e.push({type:i.type,path:v===J.Ql?i.filename:v+"/"+i.filename}),e},[]),y=r.nodes,g=r.to,!(l=(E=(0,O.RQ)(y)).every(function(e){return rm(e,g)})?E.map(function(e){var t=(0,O.UO)(e.path);return{from:e,to:g===J.Ql?t:g+"/"+t}}):null)||(c=(u=e(ew)).readOnly,s=u.fs,c))return[2];if(!a.length)return[3,4];if(a.some(function(e){return l.some(function(t){var r=t.from;return(0,ee.yr)(e.path,r.path)})}))return[2];if(!r.overwrite)return null==(f=e(ew).onConflicts)||f({type:"move",nodes:r.nodes,to:r.to,conflicts:a}),[2];return[4,Promise.all(a.map((D=(0,K._)(function(e){var t;return(0,$.Jh)(this,function(r){switch(r.label){case 0:return[4,e.type===_.Tv.Directory?s.deleteDir(e.path):s.deleteFile(e.path)];case 1:return[2,(t=r.sent()).error?{error:t.error,node:e}:null]}})}),function(e){return D.apply(this,arguments)})))];case 3:if(h.sent().filter(Boolean).length)return[2];h.label=4;case 4:return t(eB,l),[4,Promise.all(l.map((b=(0,K._)(function(e){var t,r,n;return(0,$.Jh)(this,function(i){switch(i.label){case 0:return t=e.from,r=e.to,[4,t.type===_.Tv.Directory?s.moveDir(t.path,r):s.moveFile(t.path,r)];case 1:return[2,(n=i.sent()).error?{error:n.error,from:t,to:r}:null]}})}),function(e){return b.apply(this,arguments)})))];case 5:if(d=h.sent(),t(eB,[]),d.filter(Boolean).length)return[2];return t(e2,new Map(l.map(function(e){return[e.to,e.from.type]}))),[2]}})}),function(e,t,r){return a.apply(this,arguments)})),rg=r(10777),rE=(0,Y.cn)(null,(l=(0,K._)(function(e,t,r){var n,i,o,a,l,u,c,s,f,d,h;return(0,$.Jh)(this,function(p){switch(p.label){case 0:if(i=(n=e(ew)).readOnly,o=n.fs,i)return[2];if(a=r.parentPath||J.Ql,u=null==(l=e(eG).get(a))?void 0:l.children,r.files.length>1e6)return r.onError("Trying to upload too many files at once. Please try again with fewer files."),[2];if(r.files.reduce(function(e,t){return t.size+e},0)>104857600)return r.onError("Total file upload size exceeds maximum limit. Please try again with smaller files."),[2];if(u)return[3,2];return[4,o.readDir(a)];case 1:if((c=p.sent()).error)return[2];u=c.children,p.label=2;case 2:var m;if(!u)throw Error("Expected children");if(s=(0,v._)(new Set(r.files.map(function(e){return e.dirPath?e.dirPath.split("/")[0]:e.name}))),(d=(f=u.filter(function(e){return s.some(function(t){return t===e.filename})})).length?f.map(function(e){return{path:a===J.Ql?e.filename:a+"/"+e.filename,type:e.type}}):null)&&!r.overwrite)return null==(h=e(ew).onConflicts)||h({type:"upload",files:r.files,to:a,conflicts:f.map(function(e){return{path:a===J.Ql?e.filename:a+"/"+e.filename,type:e.type}})}),[2];if(!d)return[3,4];return[4,Promise.all(d.map((m=(0,K._)(function(e){var t;return(0,$.Jh)(this,function(r){switch(r.label){case 0:return[4,e.type===_.Tv.Directory?o.deleteDir(e.path):o.deleteFile(e.path)];case 1:return[2,(t=r.sent()).error?{error:t.error,node:e}:null]}})}),function(e){return m.apply(this,arguments)})))];case 3:if(p.sent().filter(Boolean).length)return[2];p.label=4;case 4:return function(e){rs.apply(this,arguments)}({parentPath:r.parentPath,files:r.files,fs:o,onStart:function(e){t(eU,function(t){return(0,V.Uy)(t,function(t){var r=!0,n=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var l=o.value;t.push(l)}}catch(e){n=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}})})},onUpload:function(e){t(eU,function(t){return(0,V.Uy)(t,function(t){var r=t.findIndex(function(t){return t.targetPath===e.path});-1!==r&&t.splice(r,1)})})},onError:function(e){t(eU,function(t){return(0,V.Uy)(t,function(t){var r=t.findIndex(function(t){return t.targetPath===e.path});-1!==r&&t.splice(r,1)})})},onDone:function(e){var t=e.errors,r=e.parentPath;if(!t.length){rg.kg.info("Successfully uploaded files",{uploadSource:"filetree",parentPath:r});return}}}),[2]}})}),function(e,t,r){return l.apply(this,arguments)})),rD=(0,Y.cn)(0),rb=(0,Y.cn)(null),rw=(0,Y.cn)(function(e){var t=e(rb);if(null===t)return null;var r=e(ed),n=-1!==t?r.get(t):null;return n&&n.depth>0||(null==n?void 0:n.row.type)==="dir"?function(e,t){var r=e.get(t);if(!r)return null;var n=0,i=r.height,o="dir"===r.row.type?r.depth+1:r.depth;if("dir"===r.row.type)o=r.depth+1,n=r.y;else{o=r.depth;for(var a=t-1;a>=0;a--){var l=e.get(a);if(!l)break;if("dir"===l.row.type&&("file"===r.row.type||"uploadFile"===r.row.type?el(l.row.path,r.row.path):l.row.path===r.row.dir)){i+=l.height,n=l.y;break}l.depth>=r.depth&&(i+=l.height)}}for(var u=t+1;u<e.size;u++){var c=e.get(u);if(!c||c.depth<=("dir"===r.row.type?r.depth:r.depth-1))break;i+=c.height}return{y:n,height:i,depth:o}}(r,t):{y:e(rD),depth:1,height:e(ec).height-8}}),r_="(".concat(tp.dropPreviewDepth," - 1) * ").concat(tp.gutterWidth),rR=(0,D.X)({root:[b.l0.position.absolute,b.l0.top(0),b.l0.left(0),b.l0.borderRadius(8),{pointerEvents:"none",transform:"translate(calc(".concat(r_,"), ").concat(tp.dropPreviewY,")"),width:"calc(100% - ".concat(r_,")"),height:tp.dropPreviewHeight,opacity:tp.dropPreviewOpacity,outline:"1px dashed ".concat(tp.statusColor),outlineOffset:-1}]}),rT=(0,w.memo)(function(){var e=tc(rw),t=tc(rM),r=tc(rZ),n=(0,w.useRef)(null);(0,g.j)(n,e,function(e){var t,r,n,i;return i={},(0,p._)(i,th.dropPreviewY,(null!==(t=null==e?void 0:e.y)&&void 0!==t?t:0)+"px"),(0,p._)(i,th.dropPreviewHeight,(null!==(r=null==e?void 0:e.height)&&void 0!==r?r:0)+"px"),(0,p._)(i,th.dropPreviewDepth,null!==(n=null==e?void 0:e.depth.toString())&&void 0!==n?n:"0"),i}),(0,g.j)(n,r,function(e){return(0,p._)({},th.dropPreviewOpacity,e?"1":"0")}),(0,g.j)(n,t,function(e){return(0,p._)({},th.statusColor,e?b.TV.accentPrimaryDefault:b.TV.accentNegativeDefault)});var i=(0,rr.T)();return(0,m.tZ)(E.G,{style:{transition:i?void 0:"transform 140ms, width 140ms, height 140ms, opacity 140ms ease-out 60ms"},innerRef:n,css:rR.root})}),rx=(0,Y.cn)(null,function(e,t,r){if(null!==r){var n=!0,i=!1,o=void 0;try{for(var a,l=e(ed)[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var u=(0,x._)(a.value,2),c=u[0],s=u[1];if(!(r.y<s.y)&&!(r.y>s.y+s.height))return t(rb,c),s}}catch(e){i=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}t(rb,-1)}}),rI=t8.Dy.Object({type:t8.Dy.Literal("nodes"),width:t8.Dy.Number(),height:t8.Dy.Number(),nodes:t8.Dy.Array(t8.Dy.Object({path:t8.Dy.String(),type:t8.Dy.Enum(_.Tv)}))}),rA=(0,Y.cn)(null,function(e,t,r){t(e2,function(e){return(0,V.Uy)(e,function(e){e.set(r.path,r.type)})});var n=[r];if(e(e3))return n;var i=!0,o=!1,a=void 0;try{for(var l,u=e(e2)[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=(0,x._)(l.value,2),s=c[0],f=c[1];s!==r.path&&n.push({path:s,type:f})}}catch(e){o=!0,a=e}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}return n});function rC(e){var t=ts(rb),r=ts(rA),n=tu(eR),i=(0,w.useRef)(null),o=(0,x._)((0,rd.c)({type:e.type,item:function(){var t,n,o=r(e),a=null!==(n=null===(t=i.current)||void 0===t?void 0:t.getBoundingClientRect())&&void 0!==n?n:{width:160,height:32};return{nodes:o,type:"nodes",width:a.width,height:a.height}},collect:function(t){var r=t.getItem();return{isDragging:!!((null==r?void 0:r.type)==="nodes"&&r.nodes.some(function(t){return t.path===e.path}))}},end:function(){t(null)}}),3),a=o[0],l=o[1],u=o[2],c=a.isDragging;return(0,re.K)(u),{isDragging:c,dragRef:n?void 0:l,sizeRef:i}}var rN=(0,D.X)({root:[b.l0.position.absolute,{left:0,top:0,transform:"translate(".concat(tp.dragPreviewX,", ").concat(tp.dragPreviewY,")"),pointerEvents:"none"}],item:[b.l0.backgroundColor.backgroundHighest,b.l0.flex.row,b.l0.align.center,b.l0.shadow(3),tv,{height:tp.rowHeight,borderRadius:tp.borderRadius}],icon:[tm,{marginRight:tp.iconTextGap}],text:[ty,b.l0.flex.growAndShrink(1),{color:tp.statusColor}],count:[ty,b.l0.backgroundColor.accentPrimaryDimmest,b.l0.color.accentPrimaryStrongest,b.l0.fontWeight.medium,b.l0.position.absolute,b.l0.left("calc(50% - 4px)"),b.l0.top("calc(100% - 4px)"),b.l0.borderRadius("full"),b.l0.px(4),b.l0.center,{fontSize:tp.fontSizeSmall}]}),rS=(0,w.memo)(function(e){var t=(0,w.useRef)(null),r=tF(),n=tc(rO);return(0,g.j)(t,n,function(e){var t;return t={},(0,p._)(t,th.dragPreviewX,(e?e.x:0)+"px"),(0,p._)(t,th.dragPreviewY,(e?e.y:0)+"px"),t}),(0,g.j)(t,r.horizontalPadding,function(e){return(0,p._)({},th.horizontalPadding,e+"px")}),(0,g.j)(t,r.fontSize,function(e){return(0,p._)({},th.fontSize,e+"px")}),(0,g.j)(t,r.fontSizeSmall,function(e){return(0,p._)({},th.fontSizeSmall,e+"px")}),(0,g.j)(t,r.iconSize,function(e){return(0,p._)({},th.iconSize,e+"px")}),(0,g.j)(t,r.iconTextGap,function(e){return(0,p._)({},th.iconTextGap,e+"px")}),(0,g.j)(t,r.borderRadius,function(e){return(0,p._)({},th.borderRadius,e+"px")}),(0,g.j)(t,r.gutterWidth,function(e){return(0,p._)({},th.gutterWidth,e+"px")}),(0,m.tZ)(E.G,{innerRef:t,css:rN.root,children:(0,m.BX)(E.G,{css:rN.item,style:{width:e.width,height:e.height},children:[(0,m.tZ)(E.G,{css:rN.icon,children:e.type===_.Tv.File?(0,m.tZ)(I.Z,{path:e.path}):(0,m.tZ)(C.Z,{})}),(0,m.tZ)(E.G,{css:rN.text,children:(0,O.UO)(e.path)}),e.count>1?(0,m.tZ)(E.G,{css:rN.count,children:e.count}):null]})})}),rO=(0,Y.cn)(null);(0,Y.cn)(function(e){return null!==e(rO)});var rZ=(0,Y.cn)(!1),rM=(0,Y.cn)(!1);function rF(){var e=(0,rh.f)(function(e){return{item:e.getItem(),isDragging:e.isDragging(),initialOffset:e.getInitialSourceClientOffset(),currentOffset:e.getSourceClientOffset()}}),t=e.isDragging,r=e.item,n=e.currentOffset,i=ts(rO);if((0,w.useEffect)(function(){i(n?{x:n.x,y:n.y}:null)},[i,n]),!t||!t9.B4.Check(rI,r))return null;var o=r.nodes,a=r.width,l=r.height,u=(0,x._)(o,1)[0];return u?(0,rv.createPortal)((0,m.tZ)(rS,{type:u.type,path:u.path,count:o.length,width:a,height:l}),document.body):null}var rk=[b.l0.position.absolute,b.l0.top(0),b.l0.left(0),{width:"calc(100% - ".concat(tp.rowLeftIndent,")"),height:tp.rowHeight,transform:"translateY(".concat(tp.rowY,")"),marginLeft:tp.rowLeftIndent}],rP=(0,D.X)({divider:(0,v._)(rk).concat([tv,b.l0.flex.growAndShrink(1),b.l0.justify.center]),dividerInner:[{borderTop:"1px dashed",borderColor:b.TV.outlineDimmest,height:"70%",justifyContent:"end"}],dividerText:[b.l0.truncate,b.l0.color.foregroundDimmer,{fontSize:tp.fontSizeSmall}],error:(0,v._)(rk).concat([b.l0.rowWithGap(4),b.l0.align.center,tv]),emptyDir:(0,v._)(rk).concat([tv,b.l0.color.foregroundDimmest,b.l0.justify.center,{paddingLeft:tp.iconSize,paddingRight:tp.horizontalPadding}]),row:(0,v._)(rk).concat([b.l0.flex.growAndShrink(1),b.l0.flex.row,b.l0.align.center,Z.gU.nofill,(h={backgroundColor:tp.nodeBackgroundColor,borderRadius:tp.borderRadius,cursor:"pointer","&:focus":{boxShadow:"0 0 0 2px "+b.TV.accentPrimaryDefault,zIndex:1}},(0,p._)(h,th.hasUnsavedChangesDisplay,"flex"),(0,p._)(h,"@media (hover: hover)",(0,p._)({},th.contextMenuButtonDisplay,"none")),(0,p._)(h,"&:hover, &:active, &:focus",(d={},(0,p._)(d,th.contextMenuButtonDisplay,"flex"),(0,p._)(d,th.hasUnsavedChangesDisplay,"none"),d)),(0,p._)(h,"transitionDuration","0ms"),h)]),rowContent:[b.l0.flex.row,b.l0.align.center,b.l0.flex.growAndShrink(1),tv],uploadRow:(0,v._)(rk).concat([b.l0.flex.growAndShrink(1),b.l0.align.center,b.l0.flex.row,b.l0.align.center,tv,b.l0.border({color:"transparent"}),(0,p._)({backgroundColor:tp.nodeBackgroundColor,borderRadius:tp.borderRadius},th.statusColor,b.TV.foregroundDimmer)]),createRow:(0,v._)(rk).concat([b.l0.justify.center]),icon:[tm,{marginRight:tp.iconTextGap}],fileInput:[b.l0.flex.row,b.l0.align.center],text:[ty,b.l0.flex.growAndShrink(1),{color:tp.statusColor}],emptyDirText:[ty,b.l0.display.flex,b.l0.justify.center,b.l0.flex.growAndShrink(1),{color:tp.statusColor}],contextMenuButton:[b.l0.reset.button,b.l0.height("100%"),b.l0.center,b.l0.cursor.pointer,Z.gU.filled,tm,{display:tp.contextMenuButtonDisplay,borderRadius:"0 ".concat(tp.borderRadius," ").concat(tp.borderRadius," 0"),transitionDuration:"0ms",backgroundColor:"transparent"}],draftBufferContainer:[{display:tp.hasUnsavedChangesDisplay}]});function rL(e){var t,r=(t=e.path,tu((0,t_.Z)(function(){return(0,Y.cn)(function(e){var r;return null!==(r=e(eu).get(t))&&void 0!==r?r:null})},[t]))),n=tu(eF);return(null==r?void 0:r.length)?(0,m.tZ)(A.Z,{size:n,activeUsers:r}):null}function rG(e){var t,r=(t=e.path,tu((0,t_.Z)(function(){return(0,Y.cn)(function(e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e(eu)[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var u=(0,x._)(a.value,2),c=u[0],s=u[1];if(!(0,ee.yr)(t,c))return;r.push.apply(r,(0,v._)(s))}}catch(e){i=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r.length?r:null})},[t])));return(null==r?void 0:r.length)?(0,m.tZ)(A.Z,{activeUsers:r}):null}function rH(e){return(0,m.tZ)(E.G,{title:"menu",tag:"button",css:rP.contextMenuButton,onClick:e.onClick,children:(0,m.tZ)(F.Z,{})})}function rU(e,t){var r=tc((0,t_.Z)(function(){return(0,X.kv)(e2,function(e){return e.has(t)})},[t]));(0,g.j)(e,r,function(e){return(0,p._)({},th.nodeBackgroundColor,e?b.TV.backgroundHigher:"transparent")}),(0,w.useEffect)(function(){var t=function(t){e.current&&e.current.setAttribute("aria-selected",t?"true":"false")};return t(r.current),r.subscribe(t)},[e,r,t])}var rB=(0,w.memo)(function(e){var t,r,n,i,o,a,l,u,c,s,f,d=(0,w.useRef)(null),h=tP(e.index),v=tu((t=e.path,(0,t_.Z)(function(){return(0,X.kv)(eG,function(e){var r;return!!(null===(r=e.get(t))||void 0===r?void 0:r.expanded)})},[t]))),g=tu((r=e.path,(0,t_.Z)(function(){return(0,X.kv)(eG,function(e){var t;return!!(null===(t=e.get(r))||void 0===t?void 0:t.loading)})},[r]))),D=(i=(n=(0,x._)((0,w.useState)(g),2))[0],o=n[1],(0,w.useEffect)(function(){if(!g){o(!1);return}var e=setTimeout(function(){return o(!0)},500);return function(){clearTimeout(e)}},[g]),i),I=ts(ey),A=tu(eh),Z=tk(e.path),M=(a=e.path,l=ts(tM),(0,t_.Z)(function(){return function(e){l({event:e,path:a})}},[l,a])),F=(0,x._)(tL({path:e.path,index:e.index}),2),k=F[0],P=F[1],L=e.path===A&&g,G=L?er:(0,O.UO)(e.path),H=rC({path:e.path,type:_.Tv.Directory}),U=H.dragRef,B=H.sizeRef,z=H.isDragging;rU(d,e.path);var j=(u=e.path,tu((0,t_.Z)(function(){return(0,X.kv)(ep,function(e){return e?function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var u=(0,x._)(a.value,2),c=u[0],s=u[1],f=s.index,d=s.worktree;(0,ee.yr)(t,c)&&r.push({path:c,index:f,worktree:d})}}catch(e){i=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}if(0===r.length)return null;var h=r.every(function(e){return e.index===tQ.hF.ADDED||e.worktree===tQ.hF.UNTRACKED})?tQ.hF.ADDED:tQ.hF.MODIFIED;if(!t5(h))return null;var p=r.length;return{color:t2[h],backgroundColor:t1[h],count:p}}(e,u):null},tI())},[u]))),W=tu(e_);return(0,m.BX)(E.G,{style:(0,T._)((0,R._)({},null==h?void 0:h.style),(f={},(0,p._)(f,th.statusColor,null!==(c=null==j?void 0:j.color)&&void 0!==c?c:b.TV.foregroundDimmer),(0,p._)(f,th.statusBackgroundColor,null==j?void 0:j.backgroundColor),(0,p._)(f,"opacity",z?.1:void 0),f)),tabIndex:Z,role:"treeitem","aria-label":G,"aria-expanded":v,"aria-level":(null!==(s=null==h?void 0:h.depth)&&void 0!==s?s:0)+1,css:rP.row,onFocus:function(){return P(e.path)},innerRef:(0,y.l)(d,k,B,e.pending?void 0:U),onContextMenu:W?function(t){W(t,{path:e.path,type:_.Tv.Directory})}:void 0,onKeyDown:e.pending?void 0:function(t){"Enter"===t.key&&I(e.path)},onClick:e.pending?void 0:function(e){e.currentTarget===e.target&&M(e)},children:[(0,m.BX)(E.G,{title:e.path,css:rP.rowContent,onClick:e.pending?void 0:M,children:[(0,m.tZ)(E.G,{css:rP.icon,children:L||D&&!v?(0,m.tZ)(S.Z,{}):(0,m.tZ)(m.HY,{children:v?(0,m.tZ)(N.Z,{color:b.TV.foregroundDimmer}):(0,m.tZ)(C.Z,{color:b.TV.foregroundDimmer})})}),(0,m.tZ)(E.G,{css:rP.text,children:G}),e.uploadProgress?(0,m.tZ)(tJ,{uploadProgress:e.uploadProgress}):null,j?(0,m.tZ)(t6,{count:j.count}):null,v?null:(0,m.tZ)(rG,{path:e.path}),null]}),W?(0,m.tZ)(rH,{onClick:function(t){W(t,{path:e.path,type:_.Tv.Directory})}}):null]})}),rz=(0,w.memo)(function(e){var t,r,n,i,o,a,l,u,c=(0,w.useRef)(null),s=tP(e.index),f=(t=e.path,r=tf(ew),n=ts(e7),i=ts(ef),(0,t_.Z)(function(){return{onClick:function(e){var o=r(),a=o.onFileSelect,l=o.multiselectModifierKey,u=l?tZ(e,l):void 0;n({node:{path:t,type:_.Tv.File},mode:u}),i(t),u||null==a||a({path:t,event:e,type:"click"})},onDoubleClick:function(e){var n=r().onFileDoubleClick;null==n||n(e,t)}}},[t,r,i,n])),d=f.onClick,h=f.onDoubleClick,v=tk(e.path),g=ts(ey),D=(0,x._)(tL({path:e.path,index:e.index}),2),A=D[0],C=D[1],N=(0,O.UO)(e.path),S=rC({path:e.path,type:_.Tv.File}),Z=S.dragRef,M=S.sizeRef,F=S.isDragging;rU(c,e.path);var k=(o=e.path,tu((0,t_.Z)(function(){return(0,X.kv)(ep,function(e){return e?function(e,t){var r=null==e?void 0:e.get(t);if(!r)return null;var n=null;return r.worktree!==tQ.hF.UNMODIFIED?n=r.worktree:r.index!==tQ.hF.UNMODIFIED&&(n=r.index),n&&t5(n)?{color:t2[n],text:t0[n]}:null}(e,o):null},tI())},[o]))),P=tu(e_);return(0,m.BX)(E.G,{style:(0,T._)((0,R._)({},null==s?void 0:s.style),(u={},(0,p._)(u,th.statusColor,null!==(a=null==k?void 0:k.color)&&void 0!==a?a:b.TV.foregroundDimmer),(0,p._)(u,"opacity",F?.1:void 0),u)),tabIndex:v,dataCy:"filetree-file",css:rP.row,onFocus:function(){return C(e.path)},innerRef:(0,y.l)(c,A,M,e.pending?void 0:Z),role:"treeitem","aria-label":N,"aria-level":(null!==(l=null==s?void 0:s.depth)&&void 0!==l?l:0)+1,onDoubleClick:e.pending?void 0:h,onContextMenu:P?function(t){P(t,{path:e.path,type:_.Tv.File})}:void 0,onKeyDown:e.pending?void 0:function(t){"Enter"===t.key&&g(e.path)},onClick:e.pending?void 0:function(e){e.currentTarget===e.target&&d(e)},children:[(0,m.BX)(E.G,{title:e.path,css:rP.rowContent,onClick:e.pending?void 0:d,children:[(0,m.tZ)(E.G,{css:rP.icon,children:(0,m.tZ)(I.Z,{path:e.path})}),(0,m.tZ)(E.G,{css:rP.text,children:N}),k?(0,m.tZ)(t7,{text:k.text}):null,(0,m.tZ)(rL,{path:e.path}),null]}),P?(0,m.tZ)(rH,{onClick:function(t){P(t,{path:e.path,type:_.Tv.File})}}):null]})}),rj=(0,w.memo)(function(e){var t=tP(e.index);return(0,m.tZ)(E.G,{css:rP.divider,style:null==t?void 0:t.style,role:"treeitem",children:(0,m.tZ)(E.G,{css:rP.dividerInner,children:(0,m.tZ)(E.G,{css:rP.dividerText,children:e.label})})})}),rW=(0,w.memo)(function(e){var t=tP(e.index);return(0,m.BX)(E.G,{css:rP.error,style:null==t?void 0:t.style,role:"treeitem",children:[(0,m.tZ)(k.Z,{}),(0,m.tZ)(M.xv,{multiline:!1,children:e.message})]})}),rV=(0,w.memo)(function(e){var t=tP(e.index);return(0,m.tZ)(E.G,{css:rP.emptyDir,style:null==t?void 0:t.style,role:"treeitem",children:(0,m.tZ)(E.G,{css:rP.emptyDirText,children:et})})}),rX=(0,w.memo)(function(e){var t=tP(e.index);return(0,m.tZ)(E.G,{css:rP.createRow,style:null==t?void 0:t.style,role:"treeitem",children:(0,m.tZ)(tV,{dir:e.dir})})}),rK=(0,w.memo)(function(e){var t=tP(e.index),r=(0,O.UO)(e.path);return(0,m.tZ)(E.G,{style:null==t?void 0:t.style,css:rP.createRow,role:"treeitem","aria-label":r,children:(0,m.tZ)(tq,{path:e.path,fileType:e.fileType})})}),r$=(0,w.memo)(function(e){var t=tP(e.index),r=(0,O.UO)(e.path);return(0,m.BX)(E.G,{style:null==t?void 0:t.style,css:rP.uploadRow,role:"treeitem","aria-label":r,children:[(0,m.tZ)(E.G,{css:rP.icon,children:(0,m.tZ)(I.Z,{path:e.path})}),(0,m.tZ)(E.G,{css:rP.text,children:r}),(0,m.tZ)(t$,{progress:e.progress})]})}),rY=(0,w.memo)(function(e){var t,r=tu((t=e.index,(0,t_.Z)(function(){return(0,Y.cn)(function(e){var r,n;return null!==(n=null===(r=e(ed).get(t))||void 0===r?void 0:r.row)&&void 0!==n?n:null})},[t])));return r?"error"===r.type?(0,m.tZ)(rW,{index:e.index,message:r.message}):"divider"===r.type?(0,m.tZ)(rj,{index:e.index,label:r.label}):"emptyDir"===r.type?(0,m.tZ)(rV,{index:e.index}):"create"===r.type?(0,m.tZ)(rX,{index:e.index,dir:r.dir}):"uploadFile"===r.type?(0,m.tZ)(r$,{index:e.index,path:r.path,progress:r.progress}):r.rename?(0,m.tZ)(rK,{index:e.index,path:r.path,fileType:"file"===r.type?_.Tv.File:_.Tv.Directory}):"file"===r.type?(0,m.tZ)(rz,{index:e.index,path:r.path,pending:!!r.pending}):(0,m.tZ)(rB,{index:e.index,path:r.path,pending:!!r.pending,uploadProgress:r.uploadProgress}):null}),rJ=[tp.horizontalPadding,tp.rowLeftIndent,tp.iconSize,tp.iconTextGap].join(" + "),rq=(0,D.X)({root:[b.l0.overflow("hidden"),b.l0.height(0),{pointerEvents:"none"}],file:[{paddingLeft:"calc(".concat(rJ,")"),paddingRight:tp.horizontalPadding}]}),rQ=(0,w.memo)(function(){var e=tu(eq);return e?(0,m.tZ)(E.G,{css:rq.root,children:e.map(function(e){var t=e.type,r=e.text,n=e.depth,i=(0,p._)({},th.rowLeftIndent,"calc(".concat(n," * ").concat(tp.gutterWidth,")")),o=t+n;return"divider"===t?(0,m.tZ)(E.G,{style:i,css:rP.dividerInner,children:(0,m.tZ)(M.xv,{css:rP.dividerInner,multiline:!1,children:r.toUpperCase()})},o):(0,m.tZ)(E.G,{css:rq.file,style:i,children:"create"===t?(0,m.tZ)(tX,{create:function(){}}):(0,m.tZ)(E.G,{css:rP.text,children:r.toUpperCase()})},o)})}):null}),r0=(0,Y.cn)(null),r1=(0,Y.cn)(null,function(e,t,r){var n=[r];if(!e(e3)){var i=!0,o=!1,a=void 0;try{for(var l,u=e(e2)[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=(0,x._)(l.value,2),s=c[0],f=c[1];r.path!==s&&n.push({path:s,type:f})}}catch(e){o=!0,a=e}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}}t(r0,(0,O.RQ)(n))});function r2(){return(r2=(0,K._)(function(e,t){return(0,$.Jh)(this,function(r){switch(r.label){case 0:return[4,Promise.all(t.map(function(t){return t.type===_.Tv.Directory?e.deleteDir(t.path):e.deleteFile(t.path)}))];case 1:return[2,{error:r.sent().filter(function(e){return e.error}).length?"Something went wrong deleting files":null}]}})})).apply(this,arguments)}var r5=r(82973),r4=r(86763),r3=r.n(r4),r7=t8.Dy.Enum(_.Tv),r6=t8.Dy.Object({filename:t8.Dy.String({minLength:1}),type:r7}),r8=t8.Dy.Object({scrollOffset:t8.Dy.Number({minimum:0}),dirInfo:t8.Dy.Record(t8.Dy.String(),t8.Dy.Object({expanded:t8.Dy.Boolean(),children:t8.Dy.Array(r6)}))});function r9(e){return"repl:workspace:filetree:"+e}var ne=t8.Dy.Array(t8.Dy.String()),nt="repl:workspace:filetree:savedKeys",nr=(0,X.kv)(ew,function(e){return e.localCacheKey?r9(e.localCacheKey):null}),nn=(0,Y.cn)(null,function(e){var t=e(ew),r=t.localCacheKey,n=t.filter;if(r){var i=null!==(f=null===(s=e(te))||void 0===s?void 0:s.scrollOffset)&&void 0!==f?f:0,o=e(eG),a=!1,l=!0,u=!1,c=void 0;try{for(var s,f,d,h=o[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var p=(0,x._)(d.value,2)[1].children;if(a=!!(null==p?void 0:p.length))break}}catch(e){u=!0,c=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw c}}if(a){var v=function(e,t){var r={dirInfo:Object.create(null),scrollOffset:e.scrollOffset},n=!0,i=!1,o=void 0;try{for(var a,l=e.dirInfo[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var u=(0,x._)(a.value,2),c=u[0],s=u[1],f=s.expanded,d=s.children;if(d){var h=d.filter(t);h.length&&(r.dirInfo[c]={expanded:f,children:h})}}}catch(e){i=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return r}({dirInfo:o,scrollOffset:i},n),m=r9(r),y=(_=r5.Z.get(nt),t9.B4.Check(ne,_)?_:null);if(y){var g=y.filter(function(e){return e!==m});g.unshift(m);var E=g.splice(20),D=!0,b=!1,w=void 0;try{for(var _,R,T=E[Symbol.iterator]();!(D=(R=T.next()).done);D=!0){var I=R.value;r5.Z.remove(I)}}catch(e){b=!0,w=e}finally{try{D||null==T.return||T.return()}finally{if(b)throw w}}r5.Z.set(nt,g)}else r5.Z.set(nt,[m]);return r5.Z.set(r9(r),v)}}}),ni=(0,D.X)({content:[b.l0.px(2),b.l0.position.relative,{overflowY:"auto",height:"100%",minHeight:tp.minHeight}],scroll:[{position:"relative",height:tp.scrollHeight}],root:[b.l0.rowWithGap(0),b.l0.align.center],gutter:[b.l0.position.absolute,b.l0.top(0),b.l0.left(0),b.l0.reset.button,b.l0.align.end,b.l0.cursor.pointer,{width:tp.gutterWidth,"& > div":[b.l0.height("100%"),b.l0.width(1),{marginRight:"25%",opacity:.2,backgroundColor:b.TV.foregroundDimmest}],"&:hover > div":{backgroundColor:b.TV.accentPrimaryDefault,opacity:1}}]}),no=(0,w.memo)(function(e){var t,r,n,i,o,a,l,u,c,s,f,d,h,D,b,R,T,I,A,C,N,S,Z,M=tu(ed),F=tF();(0,g.j)(e.scrollRef,F.fontSize,function(e){var t;return t={},(0,p._)(t,th.fontSize,e+"px"),(0,p._)(t,th.dirStatusIconSize,e+"px"),t}),(0,g.j)(e.scrollRef,F.fontSizeSmall,function(e){return(0,p._)({},th.fontSizeSmall,e+"px")}),(0,g.j)(e.scrollRef,F.iconSize,function(e){return(0,p._)({},th.iconSize,e+"px")}),(0,g.j)(e.scrollRef,F.iconTextGap,function(e){return(0,p._)({},th.iconTextGap,e+"px")}),(0,g.j)(e.scrollRef,F.horizontalPadding,function(e){return(0,p._)({},th.horizontalPadding,e+"px")}),(0,g.j)(e.scrollRef,F.borderRadius,function(e){return(0,p._)({},th.borderRadius,e+"px")}),(0,g.j)(e.scrollRef,F.scrollHeight,function(e){return(0,p._)({},th.scrollHeight,e+"px")}),(0,g.j)(e.scrollRef,F.gutterWidth,function(e){return(0,p._)({},th.gutterWidth,e+"px")}),(0,g.j)(e.scrollRef,F.minHeight,function(e){return(0,p._)({},th.minHeight,e+"px")});var k=ts(eW),P=(t=ts(rx),r=ts(rb),n=(0,w.useRef)(null),i=(0,w.useRef)(null),o=(0,w.useRef)(null),a=(0,rt.Z)().showError,l=tf(rD),u=ts(rE),c=ts(ry),s=ts(rM),f=(0,w.useRef)(null),d=tf(eG),h=tf(eh),D=ts(ec),b=ts(eY),R=tu(eR),I=(T=(0,x._)((0,rf.L)(function(){return{accept:[_.Tv.File,_.Tv.Directory,rp.FILE],canDrop:function(){return!0},hover:function(e,r){var a=o.current;if(a){i.current&&function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{scrollZoneSize:{w:50,h:50},scrollVelocity:{x:50,y:50},scrollUpdateThrottle:100},n=r.scrollZoneSize,i=r.scrollVelocity,o=r.scrollUpdateThrottle,a=ra()(function(){var r=t.getClientOffset();if(!r)return[0,0];var o=r.x,a=r.y,l=e.getBoundingClientRect(),u=l.x,c=l.y,s=l.width,f=l.height,d=Math.min(s/2,n.w),h=Math.min(f/2,n.h),p=function(e,t){var r=(0,x._)(t,2),n=r[0],i=r[1];return ri()(e,n[0],n[1])?(e-n[1])/(n[1]-n[0]):ri()(e,i[0],i[1])?(e-i[0])/(i[1]-i[0]):0};return[p(o,[[u,u+d],[u+s-d,u+s]])*i.x,p(a,[[c,c+h],[c+f-h,c+f]])*i.y]},o,{trailing:!1})();if(a){var l=(0,x._)(a,2),u=l[0],c=l[1];if(0!==u||0!==c){var s=e.scrollLeft,f=e.scrollTop,d=e.scrollWidth,h=e.scrollHeight,p=e.clientWidth,v=e.clientHeight;requestAnimationFrame(function(){e.scrollTop=rl(0,d-p,s+u),e.scrollTop=rl(0,h-v,f+c)})}}}(i.current,r);var u=r.getClientOffset();if(u){var c=t({x:u.x-a.x,y:u.y-a.y+l()});c?"file"===c.row.type||"uploadFile"===c.row.type?n.current=(0,O.Il)(c.row.path)||J.Ql:"dir"===c.row.type?n.current=c.row.path:n.current=c.row.dir:n.current=h();var p="nodes"!==e.type||(0,O.RQ)(e.nodes).every(function(e){var t;return rm(e,null!==(t=n.current)&&void 0!==t?t:h())});if(s(p),(null==c?void 0:c.row.type)!=="dir"){f.current&&(clearTimeout(f.current.timer),f.current=null);return}var v=c.row.path;if(f.current){if(f.current.dir===v)return;clearTimeout(f.current.timer),f.current=null}if(p){var m=setTimeout(function(){var e;null!==(e=d().get(v))&&void 0!==e&&e.expanded||b(v)},400);f.current={dir:v,timer:m}}}}},drop:function(e,t){var r,i=null!==(r=n.current)&&void 0!==r?r:h();if("nodes"===e.type){c({to:i,nodes:e.nodes}),n.current=null;return}e.dirContent.then(function(e){var t=e.reduce(function(e,t){return t.size+e},0);if(e.length>1e6){a("Trying to upload too many files at once. Please try again with fewer files.");return}if(t>104857600){a("Total file upload size exceeds maximum limit. Please try again with smaller files.");return}u({parentPath:i===J.Ql?void 0:i,files:e.filter(Boolean),onError:a})}),n.current=null},collect:function(e){return{isOver:e.isOver()}}}},[]),2))[0].isOver,A=T[1],C=ts(rZ),(0,w.useEffect)(function(){if(C(I),I){var e,t=null===(e=i.current)||void 0===e?void 0:e.getBoundingClientRect();o.current=t?{x:t.x,y:t.y}:null,t&&D({width:t.width,height:t.height});return}f.current&&(clearTimeout(f.current.timer),f.current=null),n.current=null,r(null)},[C,I,r,D]),N=ts(rD),(0,w.useEffect)(function(){var e=i.current;if(e){var t=ra()(function(){N(e.scrollTop)},200);return e.addEventListener("scroll",t),function(){t.cancel(),e.removeEventListener("scroll",t)}}},[N]),{dropRef:R?void 0:A,containerRef:i}),L=P.dropRef,G=P.containerRef,H=ts(e6),U=tu(e_),B=tu(eh);return S=ts(tt),Z=tc(e4),(0,w.useEffect)(function(){var e=function(){Z.current&&S(Z.current)};return e(),Z.subscribe(e)},[Z,S]),(0,m.BX)(E.G,{css:ni.content,innerRef:(0,y.l)(e.scrollRef,L,G),onKeyDown:k,onContextMenu:U?function(e){e.target===e.currentTarget&&U(e,{type:_.Tv.Directory,path:B})}:void 0,onClick:function(e){e.target===e.currentTarget&&H()},children:[(0,m.tZ)(rQ,{}),(0,m.BX)(E.G,{css:ni.scroll,role:"tree",children:[(0,v._)(M.values()).map(function(e){var t=e.key,r=e.index;return(0,m.tZ)(rY,{index:r},t)}),(0,m.tZ)(nl,{}),(0,m.tZ)(rT,{}),(0,m.tZ)(rF,{})]})]})}),na=(0,w.memo)(function(){var e,t,r,n,i,o,a,l,u,c,s,f,d,h,p,y,g,E,D,b,_=(t=(0,w.useRef)(null),r=tu(ez),n=tf(ez),i=tf(eT),o=(0,t_.Z)(function(){return function(e){var t=n()[e];return t?ex(i(),t.type):0}},[n,i]),a=tf(ew),l=tc(ej),u=(0,w.useRef)(tu(ev)),c=(0,tb.MG)({count:r.length,overscan:null!==(e=a().overscan)&&void 0!==e?e:100,getScrollElement:function(){return t.current},getItemKey:function(e){var t=r[e];return t?"error"===t.type?"error:"+t.dir+t.message:"divider"===t.type?"divider:"+t.dir+t.label:"emptyDir"===t.type?"emptyDir:"+t.dir:"create"===t.type?"create:"+t.dir:t.type+":"+t.path:""},estimateSize:o,rangeExtractor:function(e){var t=(0,tw.MK)(e);return null===l.current||t.includes(l.current)||void 0===r[l.current]?t:(0,v._)(t).concat([l.current])}}),(0,w.useEffect)(function(){u.current&&c.scrollToOffset(u.current)},[c,u]),s=ts(eb),f=c.getVirtualItems(),d=c.getTotalSize(),(0,w.useEffect)(function(){s({rows:f,scrollHeight:d})},[s,f,d]),h=tu(eD),(0,w.useEffect)(function(){if(h){var e=function(e){null!==e&&c.getVirtualItems()[e]&&c.scrollToIndex(e,{align:"auto",behavior:"auto"})};return setTimeout(function(){return e(l.current)}),l.subscribe(e)}},[c,l,h]),p=ts(te),(0,w.useEffect)(function(){p(c)},[p,c]),{scrollRef:t,virtualizer:c}).scrollRef;return y=tc(r0),g=tf(ew),(0,w.useEffect)(function(){return y.subscribe(function(e){if(e){var t=g(),r=t.readOnly,n=t.onDeleteNodes,i=t.fs;!r&&n&&n({nodes:e,confirm:function(){return function(e,t){return r2.apply(this,arguments)}(i,e)}})}})},[g,y]),E=tu(nr),D=tc(eG),b=ts(nn),(0,w.useEffect)(function(){if(E){var e,t,r=null,n=null!==(e=window.requestIdleCallback)&&void 0!==e?e:window.requestAnimationFrame,i=null!==(t=window.cancelIdleCallback)&&void 0!==t?t:window.cancelAnimationFrame,o=r3()(function(){r&&i(r),r=n(b)},1e3),a=D.subscribe(o);return document.addEventListener("visibilitychange",b),document.addEventListener("beforeunload",b),function(){o.cancel(),r&&i(r),document.removeEventListener("visibilitychange",b),document.removeEventListener("beforeunload",b),a(),b()}}},[E,D,b]),(0,m.tZ)(no,{scrollRef:_})}),nl=(0,w.memo)(function(){var e=tu(eE),t=ts(eK);return(0,m.tZ)(m.HY,{children:e.map(function(e){return(0,m.tZ)(E.G,{tag:"button",onClick:function(){return t(e.dir)},css:ni.gutter,style:{height:e.height,transform:"translate(calc(".concat(e.depth," * ").concat(tp.gutterWidth,"), ").concat(e.y,"px)")},children:(0,m.tZ)(E.G,{})},"gutter"+e.dir+e.depth+e.y)})})});function nu(e){var t,r,n;return t=(0,rt.Z)().showError,r=(0,x._)((0,w.useState)(function(){var r,n,i,o,a=(0,Y.MT)();a.set(ew,e);var l=null!==(r=e.root)&&void 0!==r?r:J.Ql,u=e.localCacheKey?(i=e.localCacheKey,o=r5.Z.get(r9(i)),t9.B4.Check(r8,o)?{dirInfo:new Map(Object.entries(o.dirInfo)),scrollOffset:o.scrollOffset}:null):null;u&&a.set(ev,u.scrollOffset);var c=null!==(n=null==u?void 0:u.dirInfo)&&void 0!==n?n:new Map;return c.has(l)||c.set(l,{expanded:!0}),a.set(eG,c),e.focusedPath&&a.set(ef,e.focusedPath),{store:a,create:function(e,t){if(t){a.set(eQ,{parentPath:t,fileType:e});return}var r=l,n=a.get(e5);(null==n?void 0:n.type)===_.Tv.File?r=(0,O.Il)(n.path)||J.Ql:(null==n?void 0:n.type)===_.Tv.Directory&&(r=n.path),a.set(eQ,{parentPath:r,fileType:e})},setPresenceState:function(e){a.set(eu,e)},setFileStatus:function(e){a.set(ep,e)},rename:function(e){a.set(ey,e)},move:function(e){a.set(ry,e)},upload:function(e){a.set(rE,(0,T._)((0,R._)({},e),{onError:t}))},onLoad:function(t){var r=e.fs.watchDir(l,{onChange:function(){t({error:null}),r()},onError:function(e){t({error:e}),r()}});return r},select:function(e){return null===e?a.set(e6):a.set(e9,e)},scrollToPath:function(e){return a.set(tt,e)},hasLocalCache:!!u,getChildren:function(e){var t,r;return null!==(r=null===(t=a.get(eG).get(e))||void 0===t?void 0:t.children)&&void 0!==r?r:null},getSelectedNode:function(){return a.get(e5)},getSelectedNodes:function(){return a.get(e2)},deleteNodes:function(e){a.set(r1,e)},collapse:function(e){return a.set(eK,e)},getExpandedDirs:function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:J.Ql,r=new Set,n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var u=(0,x._)(a.value,2),c=u[0],s=u[1];c!==t&&s.expanded&&(t===J.Ql||(0,ee.yr)(t,c))&&r.add(c)}}catch(e){i=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return 0===r.size?null:r}(a.get(eG),e)}}}),1)[0],(0,w.useEffect)(function(){r.store.set(ew,e)},[r.store,e]),(0,w.useEffect)(function(){var e=!0,t=!1,n=void 0;try{for(var i,o=r.store.get(eG)[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=(0,x._)(i.value,2),l=a[0];a[1].expanded&&r.store.set(eY,l)}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}return function(){var e=!0,t=!1,n=void 0;try{for(var i,o=r.store.get(eG)[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a,l=(0,x._)(i.value,2),u=(l[0],l[1]);null===(a=u.disposeWatcher)||void 0===a||a.call(u)}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}}},[r.store]),n=(0,W.Z)(e.onLoad),(0,w.useEffect)(function(){return r.onLoad(function(e){var t;return null===(t=n.current)||void 0===t?void 0:t.call(n,e)})},[r,n]),r}function nc(e){return(0,m.tZ)(ta,{store:e.store,children:(0,m.tZ)(na,{})})}},73220:function(e,t,r){r.d(t,{Z:function(){return f}});var n=r(41733),i=r(3796),o=r(38935),a=r(46954),l=r(83059),u=r(97242),c=r(84296),s=r(75271).memo(o.ZP);function f(e){var t=e.source,r=e.sourcePos,o=e.fs,f=e.path,d=e.onCodeInsert,h=(0,u.l)(o,f),p=(0,a.Z)(t,100),v=(0,l.Z)(function(){return{img:h,a:function(e){return(0,i.tZ)(c.Z,(0,n._)({filePath:f},e))}}},[h,f]);return(0,i.tZ)(s,{onCodeInsert:d,components:v,sourcePos:r,children:p})}},57025:function(e,t,r){r.d(t,{A:function(){return h},Z:function(){return d}});var n=r(66626),i=r(3796),o=r(9602),a=r(24766),l=r(47874),u=r(10578),c=r(63163),s=r(75271),f=r(35370);function d(e){var t=e.fs,r=e.filePath,d=(0,n._)((0,s.useState)(null),2),p=d[0],v=d[1],m=(0,n._)((0,s.useState)(!0),2),y=m[0],g=m[1];return((0,s.useEffect)(function(){var e=t.watchFile(r,{onChange:function(e){v(e.toString("base64")),g(!1)},onError:function(){v(null),g(!1)},onMoveOrDelete:function(){v(null),g(!1)}});return function(){e(),g(!0),v(null)}},[t,r]),y)?(0,i.tZ)(u.Z,{}):p?(0,i.BX)(i.HY,{children:[(0,i.tZ)(h,{content:p,mime:(0,f.yC)(r)}),(0,i.tZ)(o.hU,{alt:"Download",css:[c.l0.position.absolute,c.l0.bottom(8),c.l0.right(8),c.l0.p(16)],children:(0,i.tZ)("a",{href:"data:text/plain;base64,".concat(p),download:(0,f.UO)(r),css:[c.l0.color.foregroundDimmer],children:(0,i.tZ)(l.Z,{})})})]}):(0,i.tZ)(a.xv,{multiline:!1,children:"Failed to load media file"})}var h=function(e){var t=e.content,r=e.mime,n=void 0===r?"":r;if(n.startsWith("video/"))return(0,i.tZ)("video",{src:"data:".concat(n,";base64,").concat(t),css:{maxHeight:"100%",maxWidth:"100%"},controls:!0});if(n.startsWith("image/"))return(0,i.tZ)("img",{alt:"Preview",src:"data:".concat(n,";base64,").concat(t),css:{width:"80%",height:"80%",objectFit:"contain",imageRendering:"pixelated"}});if(n.startsWith("audio/")){var o=n;return"audio/wave"===o&&(o="audio/wav"),(0,i.tZ)("audio",{src:"data:".concat(o,";base64,").concat(t),css:{maxHeight:"100%",maxWidth:"100%"},controls:!0})}return"application/pdf"===n?(0,i.tZ)("object",{data:"data:".concat(n,";base64,").concat(t),type:"application/pdf",css:{width:"100%",height:"100%",flex:1},children:(0,i.tZ)("embed",{src:"data:".concat(n,";base64,").concat(t),type:"application/pdf",css:{width:"100%",height:"100%"}})}):(0,i.tZ)(a.xv,{multiline:!1,children:"File type not supported."})}},86908:function(e,t,r){r.d(t,{T:function(){return y}});var n=r(16155),i=r(40523),o=r(23882),a=r(24200),l=r(75271),u=r(32581),c=r(42364),s=r(41733),f=r(21262),d=r(71440),h=r(9122);function p(){var e=(0,f._)(["\n  query ShouldHideFileInWorkspace($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isProjectFork\n        isModelSolution\n        isModelSolutionFork\n      }\n    }\n  }\n"]);return p=function(){return e},e}var v={},m=(0,d.Ps)(p()),y=function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=(0,n.Z)(),f=(0,o.Z)().dotReplit,d=(e=(0,s._)({},v,{variables:{replId:r}}),h.a(m,e)),p=d.data,y=d.loading,g=(null==p?void 0:p.repl.__typename)==="Repl"&&(p.repl.isProjectFork||p.repl.isModelSolution||p.repl.isModelSolutionFork),E=(0,i.P)(f),D=(0,a.t9)();return(0,l.useCallback)(function(e){return!!((g||y)&&(0,c.TI)(e)||(0,c.Xl)(e))||!!t&&!D&&((0,c.uC)(e)||(0,u.Ci)(e)||(0,u.cJ)(e)||(0,c.lv)(e,E))},[g,y,D,E,t])}},9583:function(e,t,r){r.d(t,{W:function(){return d}});var n=r(27387),i=r(96583),o=r(66626),a=r(32581),l=r(35370),u=r(72106),c=r(73878);function s(){return(s=(0,n._)(function(e){var t,r,s,f,d,h,p,v,m;function y(){return(y=(0,n._)(function(){var e;return(0,i.Jh)(this,function(r){switch(r.label){case 0:if("function"==typeof t)return[2,t()];return[4,t.getConfig()];case 1:return[2,null===(e=r.sent().config)||void 0===e?void 0:e.entrypoint]}})})).apply(this,arguments)}function g(){return(g=(0,n._)(function(){var e,t;return(0,i.Jh)(this,function(n){switch(n.label){case 0:if(!(e=d))return[2,null];if(!(0,l.Il)(e))return[2,v.includes(e)?e:null];return[4,r.stat(e)];case 1:return[2,(t=n.sent()).exists&&t.type===c.Tv.File?e:null]}})})).apply(this,arguments)}return(0,i.Jh)(this,function(n){switch(n.label){case 0:return t=e.dotReplit,[4,Promise.all([(r=e.fs).readDir(u.Ql),function(){return y.apply(this,arguments)}()])];case 1:if(f=(s=o._.apply(void 0,[n.sent(),2]))[0],d=s[1],!f||f.error)throw Error("Could not read files");return p=(h=f.children).find(function(e){return e.type===c.Tv.File&&e.filename.toLowerCase().endsWith("readme.md")}),v=h.filter(function(e){return e.type===c.Tv.File}).map(function(e){return e.filename}),[4,function(){return g.apply(this,arguments)}()];case 2:var i,E;if(m=n.sent())return[2,{entrypoint:m,readmeFile:null==p?void 0:p.filename}];return[2,{entrypoint:(E=(i=v).find(function(e){return e.toLowerCase().endsWith("readme.md")}))?E:i.includes("Makefile")?"Makefile":i.find(l.gK)||i.find(function(e){return![".replit","replit.nix"].includes(e)&&!(0,a.Ci)(e)&&!(0,a.cJ)(e)}),readmeFile:null==p?void 0:p.filename}]}})})).apply(this,arguments)}var f=r(38242);function d(e){return h.apply(this,arguments)}function h(){return(h=(0,n._)(function(e){return(0,i.Jh)(this,function(t){if(!f.l)throw Error("Expected apollo client");return[2,function(e){return s.apply(this,arguments)}(e)]})})).apply(this,arguments)}},93503:function(e,t,r){function n(e){var t=document.createElement("canvas"),r=t.getContext("2d");if(t.width=e.width,t.height=e.height,!r)throw Error("failed to get canvas ctx");return{version:"1",width:e.width,height:e.height,palette:[[0,0,0,255],[255,255,255,255],[255,255,128,255],[255,128,255,255],[0,128,128,255],[128,0,255,255],[255,0,128,255],[0,255,255,255]],anims:{},frames:e.frames.map(function(n){var i=new window.ImageData(new Uint8ClampedArray(n.pixels),e.width,e.height);return r.putImageData(i,0,0),t.toDataURL()})}}function i(e){return new Promise(function(t,r){var n=new window.Image;n.src=e,n.onload=function(){t(n)},n.onerror=r})}function o(e){return new Promise(function(t,r){Promise.all(e.frames.map(i)).then(function(n){var i=document.createElement("canvas");i.width=e.width,i.height=e.height;var o=i.getContext("2d");if(!o){r(Error("failed to get canvas ctx"));return}t({frames:n.map(function(t){return o.drawImage(t,0,0),{pixels:Array.from(o.getImageData(0,0,e.width,e.height).data),width:e.width,height:e.height}}),preview:e.frames[0],width:e.width,height:e.height})}).catch(r)})}r.d(t,{C:function(){return n},u:function(){return o}})},48487:function(e,t,r){r.d(t,{z:function(){return o}});var n=r(32581),i=r(72106);function o(e){var t=e.siblingNames,r=e.fileName,o=e.initialValue,a=e.parentPath;if(r.includes("/"))return"File names cannot include forward slashes";if("."===r||".."===r)return'File names cannot be "'.concat(r,'"');if(r.match(/^\s/)||r.match(/\s$/))return"File names cannot start or end with whitespace";if(o!==r&&t.includes(r))return"A file or folder with that name already exists";if(r.length>100)return"File names cannot be longer than 100 characters";var l=a===i.Ql?r:a+"/"+r;return(0,n.Ci)(l)?'"'.concat(l,'" is reserved'):null}},572:function(e,t,r){r.d(t,{NH:function(){return u},Qt:function(){return s},R3:function(){return c},_s:function(){return o},p5:function(){return f}});var n=r(48941),i=r(6038),o=(0,n.cn)(null),a=(0,n.cn)(function(e){var t=e(o);return(null==t?void 0:t.isVisible)?t.path:null}),l=(0,n.cn)(null,function(e,t,r,n){switch(n.type){case"focus":t(o,{hasFocus:!0,isVisible:!0,position:n.position,path:r});return;case"update":t(o,{hasFocus:n.hasFocus,isVisible:!0,position:n.position,path:r});return;case"blur":t(o,function(e){var t;return{hasFocus:!1,isVisible:!!(null==e?void 0:e.isVisible),position:null!==(t=null==e?void 0:e.position)&&void 0!==t?t:{line:1,column:1,offset:0},path:r}});return;case"unmount":t(o,null);return;case"hidden":t(o,function(e){var t;return{hasFocus:!1,isVisible:!1,position:null!==(t=null==e?void 0:e.position)&&void 0!==t?t:{line:1,column:1,offset:0},path:r}});return;case"unhidden":t(o,function(e){var t;return{hasFocus:!!(null==e?void 0:e.hasFocus),isVisible:!0,position:null!==(t=null==e?void 0:e.position)&&void 0!==t?t:{line:1,column:1,offset:0},path:r}});return}});function u(){return(0,i.$X)(l)}function c(){return(0,i.Hg)(a)}function s(){return(0,i.XD)(o)}function f(){return(0,i.yL)(o)}},24200:function(e,t,r){r.d(t,{eA:function(){return A},_s:function(){return D._s},aG:function(){return I.aG},t9:function(){return c},R3:function(){return D.R3},Qt:function(){return D.Qt},p8:function(){return d},Wl:function(){return v},b2:function(){return x},ev:function(){return g},OM:function(){return s},xz:function(){return h},ho:function(){return m},Cp:function(){return T},_o:function(){return E}});var n=r(3796),i=r(6038),o=r(66626),a=r(75271),l=r(48941),u=(0,r(78054).O4)("areHiddenFilesVisible",!1);function c(){return(0,i.Hg)(u)}function s(){return(0,i.$X)(u)}var f=(0,l.cn)(null);function d(){return(0,i.XD)(f)}function h(){return(0,i.$X)(f)}var p=(0,l.cn)(!1);function v(){return(0,i.Hg)(p)}function m(){return(0,i.$X)(p)}var y=(0,l.cn)(null);function g(){return(0,i.Hg)(y)}function E(){return(0,i.$X)(y)}var D=r(572),b=r(83059),w=r(41974),_=(0,l.cn)(new Map),R=(0,l.cn)(null,function(e,t,r){t(_,function(e){return(0,w.Uy)(e,function(e){r.indicatorType?e.set(r.paneType,r.indicatorType):e.delete(r.paneType)})})});function T(){return(0,i.$X)(R)}function x(e){var t=e.paneType;return(0,i.Hg)((0,b.Z)(function(){return(0,l.cn)(function(e){return t?e(_).get(t):void 0})},[t]))}var I=r(66411);function A(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o._)((0,a.useState)(function(){var t;return t=(0,l.MT)(),void 0!==e.isAiChatHighlightedInLayout&&t.set(p,e.isAiChatHighlightedInLayout),t}),1)[0]}(e.init);return(0,n.tZ)(i.B3.Provider,{value:t,children:e.children})}},66411:function(e,t,r){r.d(t,{aG:function(){return O},f:function(){return x},HQ:function(){return N},e_:function(){return P}});var n,i=r(27387),o=r(66626),a=r(63257),l=r(96583),u=r(20622),c=r(83059),s=r(38242),f=r(32992),d=r(81202),h=r.n(d),p=r(41974),v=r(48941),m=r(78054),y=r(86763),g=r.n(y),E=r(75271),D=r(21262);function b(){var e=(0,D._)(["\n  query WorkspaceSessionPresence($userIds: [Int!]!) {\n    usersByIds(ids: $userIds) {\n      id\n      image\n    }\n  }\n"]);return b=function(){return e},e}var w=(0,r(71440).Ps)(b()),_=r(6038),R=(0,v.cn)(new Map),T=(0,v.cn)(null,function(e,t,r){return t(R,function(e){return(0,p.Uy)(e,function(e){e.set(r.userId,r.color)})})});function x(){var e=(0,_.XD)(A),t=(0,_.$X)(T);return(0,E.useCallback)(function(r){var n,i=e(),o=null===(n=i.get(r.userId))||void 0===n?void 0:n.color;return o||t({color:o=(0,f.i7)(Object.values(i)),userId:r.userId}),o},[e,t])}function I(e,t,r,n){var i=n||{timestamp:Math.floor(Date.now()/1e3),activeFile:null},o=e.get(t.id);if(o){o.sessions.set(t.session,i);return}e.set(t.id,{id:t.id,username:t.name,color:null!=r?r:(0,f.i7)((0,a._)(e.values())),roles:t.roles,sessions:new Map([[t.session,i]])})}var A=(0,v.cn)(new Map),C=(0,m.kv)(A,function(e){var t=new Map,r=!0,n=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var u=(0,o._)(a.value,2)[1],c=null,s=!0,f=!1,d=void 0;try{for(var h,p=u.sessions[Symbol.iterator]();!(s=(h=p.next()).done);s=!0){var v=(0,o._)(h.value,2)[1];!v.activeFile||c&&c.timestamp>v.timestamp||(c=v)}}catch(e){f=!0,d=e}finally{try{s||null==p.return||p.return()}finally{if(f)throw d}}if(null==c?void 0:c.activeFile){var m=t.get(c.activeFile),y={id:u.id,username:u.username,image:u.image,color:u.color,roles:u.roles};m?m.push(y):t.set(c.activeFile,[y])}}}catch(e){n=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(n)throw i}}return t},h());function N(){return(0,_.yL)(C)}var S=(0,m.kv)(A,function(e){return(0,a._)(e.values()).map(function(e){return{id:e.id,username:e.username,color:e.color,image:e.image,roles:e.roles}})},h());function O(){return(0,_.Hg)(S)}function Z(e){var t=e.id,r=e.name,n=e.session,i=e.roles;return t&&r&&n&&i?{id:t,name:r,session:n,roles:i}:null}function M(e){var t=e.seconds,r=e.nanos;return"number"!=typeof t||"number"!=typeof r?null:(0,f.gs)({seconds:t,nanos:r})}var F=(0,v.cn)(null,function(e,t,r,n){t(A,function(t){return(0,p.Uy)(t,function(t){var i;if(null===(i=r.roster)||void 0===i?void 0:i.user){var a=!0,l=!1,u=void 0;try{for(var c,s=r.roster.user[Symbol.iterator]();!(a=(c=s.next()).done);a=!0){var f=c.value,d=Z(f);if(null!==d&&(null==d?void 0:d.id)!==n){var h=function(e,t){if(!e.files)return null;var r=e.files.find(function(e){return e.userId===t.id&&e.session===t.session});if(!r)return null;var n=r.timestamp?M(r.timestamp):null;return n?{activeFile:r.file||null,timestamp:n}:null}(r.roster,d),p=e(R).get(d.id);I(t,d,p,h)}}}catch(e){l=!0,u=e}finally{try{a||null==s.return||s.return()}finally{if(l)throw u}}return}if(r.join){var v=Z(r.join);if(!v||v.id===n)return;var m=e(R).get(v.id);I(t,v,m);return}if(r.part){var y,g,E=r.part,D=E.id,b=E.session;if(!D||!b)return;y={id:D,session:b},(g=t.get(y.id))&&(1===g.sessions.size?t.delete(y.id):g.sessions.delete(y.session));return}if(r.fileOpened){var w=r.fileOpened,_=w.session,T=w.userId,x=w.file,A=r.fileOpened.timestamp?M(r.fileOpened.timestamp):null;if(!A||!_||!T||!x)return;!function(e,t){var r=e.get(t.userId);if(r){var n=r.sessions.get(t.session);n?(n.timestamp=t.timestamp,n.activeFile=t.file):r.sessions.set(t.session,{timestamp:t.timestamp,activeFile:t.file})}}(t,{timestamp:A,session:_,userId:T,file:x});return}if(r.sessionTimestampUpdated){var C=r.sessionTimestampUpdated.session,N=r.sessionTimestampUpdated.timestamp?M(r.sessionTimestampUpdated.timestamp):null;if(!N||!C)return;!function(e,t){var r=t.session,n=t.timestamp,i=!0,a=!1,l=void 0;try{for(var u,c=e[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var s=(0,o._)(u.value,2)[1].sessions.get(r);if(s){s.timestamp=n;break}}}catch(e){a=!0,l=e}finally{try{i||null==c.return||c.return()}finally{if(a)throw l}}}(t,{timestamp:N,session:C});return}})})}),k=(0,v.cn)(null,(n=(0,i._)(function(e,t){var r,n,i,a,u,c,f,d,h,v,m;return(0,l.Jh)(this,function(l){switch(l.label){case 0:r=[],n=e(A),i=!0,a=!1,u=void 0;try{for(c=n[Symbol.iterator]();!(i=(f=c.next()).done);i=!0)h=(d=(0,o._)(f.value,2))[0],d[1].image||r.push(h)}catch(e){a=!0,u=e}finally{try{i||null==c.return||c.return()}finally{if(a)throw u}}if(!r.length)return[2];return[4,null===s.l||void 0===s.l?void 0:s.l.query({query:w,variables:{userIds:r}})];case 1:if(!(m=null==(v=l.sent())?void 0:v.data.usersByIds))return[2];return t(A,function(e){return(0,p.Uy)(e,function(e){var t=!0,r=!1,n=void 0;try{for(var i,o=m[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value,l=e.get(a.id);l&&(l.image=a.image)}}catch(e){r=!0,n=e}finally{try{t||null==o.return||o.return()}finally{if(r)throw n}}})}),[2]}})}),function(e,t){return n.apply(this,arguments)}));function P(){var e=(0,u.d)(),t=(0,_.$X)(k),r=(0,_.$X)(F),n=(0,_.yL)(A);return(0,E.useEffect)(function(){t();var e=g()(t,2e3);return n.subscribe(function(){return e()})},[t,n]),(0,c.Z)(function(){return function(t){e&&r(t,e)}},[r,e])}},84082:function(e,t,r){r.d(t,{HO:function(){return g},yH:function(){return E},aq:function(){return x},dq:function(){return _},rG:function(){return R},Tt:function(){return D},yG:function(){return b},y5:function(){return w},hF:function(){return T},p3:function(){return e2},Ch:function(){return t5},CH:function(){return ev},Bi:function(){return tg},Qj:function(){return ep},bF:function(){return eh},qE:function(){return ty},JE:function(){return ey},eo:function(){return eH},QD:function(){return ej},kZ:function(){return eI},ZR:function(){return eK},mB:function(){return q},y1:function(){return eY},P:function(){return e0},Kt:function(){return e7},a1:function(){return tn},Qg:function(){return ta},E:function(){return tu},Mh:function(){return tb},xD:function(){return ts},rp:function(){return td},Vk:function(){return eb},It:function(){return eT},xT:function(){return t_},Tq:function(){return tT},jz:function(){return e4},qu:function(){return tt},TF:function(){return tI},nK:function(){return tC},Fj:function(){return tS},VH:function(){return tZ},Ly:function(){return tX},nC:function(){return t$},l6:function(){return tJ},_D:function(){return eS},Vj:function(){return tQ},c1:function(){return eB},AU:function(){return t1},Ni:function(){return eC},JC:function(){return tj},wc:function(){return eV},dC:function(){return ec},Pi:function(){return em},Dc:function(){return es},GE:function(){return ef},LY:function(){return ed},C:function(){return en},Tg:function(){return ei}});var n,i,o,a,l,u,c,s,f,d,h,p,v,m,y,g,E,D,b,w,_,R,T,x,I,A,C=r(74044);(n=y||(y={})).HEAD="HEAD",n.REMOTE_HEAD="REMOTE_HEAD",n.BRANCH="BRANCH",n.REMOTE_BRANCH="REMOTE_BRANCH",n.TAG="TAG",C.Dy.Enum(y);var N=C.Dy.Object({type:C.Dy.Literal("BRANCH"),name:C.Dy.String()}),S=C.Dy.Object({type:C.Dy.Literal("HEAD"),name:C.Dy.Literal("HEAD"),detached:C.Dy.Boolean(),ref:C.Dy.Union([N,C.Dy.Null()])}),O=C.Dy.Object({type:C.Dy.Literal("REMOTE_HEAD"),name:C.Dy.Literal("HEAD"),remote:C.Dy.String()}),Z=C.Dy.Object({type:C.Dy.Literal("REMOTE_BRANCH"),name:C.Dy.String(),remote:C.Dy.String(),branch:C.Dy.String()}),M=C.Dy.Object({type:C.Dy.Literal("TAG"),name:C.Dy.String()}),F=C.Dy.Union([S,O,N,Z,M]),k=C.Dy.Object({name:C.Dy.String(),email:C.Dy.String(),date:C.Dy.Number()});(i=g||(g={})).LOCAL="LOCAL",i.REMOTE="REMOTE",i.TRACKED="TRACKED",C.Dy.Enum(g);var P=C.Dy.Object({hash:C.Dy.String(),author:k}),L=C.Dy.Object({type:C.Dy.Literal("LOCAL"),name:C.Dy.String(),push:C.Dy.Union([Z,N,C.Dy.Null()]),commit:P,remote:C.Dy.Null(),tracking:C.Dy.Null()}),G=C.Dy.Object({type:C.Dy.Literal("REMOTE"),name:C.Dy.String(),remote:C.Dy.String(),commit:P,push:C.Dy.Null(),tracking:C.Dy.Null()}),H=C.Dy.Object({type:C.Dy.Literal("TRACKED"),name:C.Dy.String(),remote:C.Dy.String(),push:Z,tracking:G,commit:P});C.Dy.Union([L,G,H]),C.Dy.Object({refs:C.Dy.Array(F),hash:C.Dy.String(),parents:C.Dy.Union([C.Dy.Null(),C.Dy.Array(C.Dy.String())]),grafted:C.Dy.Boolean(),author:k,committer:k,subject:C.Dy.String(),body:C.Dy.String()}),(o=E||(E={})).ADDED="ADDED",o.COPIED="COPIED",o.DELETED="DELETED",o.MODIFIED="MODIFIED",o.RENAMED="RENAMED",o.TYPE_CHANGED="TYPE_CHANGED",o.UNKNOWN="UNKNOWN",o.BROKEN="BROKEN";var U=C.Dy.Enum(E);C.Dy.Object({path:C.Dy.String(),type:U,originalPath:C.Dy.Optional(C.Dy.String())}),C.Dy.Object({name:C.Dy.String(),push:C.Dy.String(),fetch:C.Dy.String()}),(a=D||(D={})).FF_ONLY="FF_ONLY",a.MERGE="MERGE",a.REBASE="REBASE",C.Dy.Enum(D),(l=b||(b={})).NOT_INITIALIZED="NOT_INITIALIZED",l.ON_UNBORN_BRANCH="ON_UNBORN_BRANCH",l.MERGING="MERGING",l.REBASING="REBASING",l.REVERTING="REVERTING",l.CHERRY_PICKING="CHERRY_PICKING",l.APPLYING_MAILBOX="APPLYING_MAILBOX",l.BISECTING="BISECTING",l.DIRTY_WORKTREE="DIRTY_WORKTREE",l.DIRTY_INDEX="DIRTY_INDEX",l.CLEAN="CLEAN",l.DETACHED_HEAD="DETACHED_HEAD",C.Dy.Enum(b),(u=w||(w={})).INITIALIZING="INITIALIZING",u.INTERMEDIATE="INTERMEDIATE",u.NORMAL="NORMAL",u.DETACHED_HEAD="DETACHED_HEAD",C.Dy.Enum(w),(c=_||(_={})).FS_CHANGE="FS_CHANGE",c.FORCED_REFRESH="FORCED_REFRESH",c.NEW_PROFILE="NEW_PROFILE",c.CHANGED_PROFILE="CHANGED_PROFILE",(s=R||(R={})).REPLIT_DEFAULT="REPLIT_DEFAULT",s.GITHUB="GITHUB",(f=T||(T={})).UNTRACKED="UNTRACKED",f.UNMODIFIED="UNMODIFIED",f.MODIFIED="MODIFIED",f.TYPE_CHANGED="TYPE_CHANGED",f.ADDED="ADDED",f.DELETED="DELETED",f.RENAMED="RENAMED",f.COPIED="COPIED",f.UNMERGED="UNMERGED";var B=C.Dy.Enum(T),z=C.Dy.Object({type:C.Dy.Object({index:B,worktree:B}),path:C.Dy.String(),staged:C.Dy.Boolean(),unmerged:C.Dy.Boolean(),source:C.Dy.Optional(C.Dy.Object({type:C.Dy.Union([C.Dy.Literal("RENAMED"),C.Dy.Literal("COPIED")]),score:C.Dy.Number(),path:C.Dy.String()}))});C.Dy.Object({commit:C.Dy.Union([C.Dy.String(),C.Dy.Null()]),branch:C.Dy.Union([C.Dy.String(),C.Dy.Null()]),upstream:C.Dy.Union([C.Dy.Null(),C.Dy.Object({branch:C.Dy.String(),ahead:C.Dy.Number(),behind:C.Dy.Number()})]),stashes:C.Dy.Number(),changes:C.Dy.Array(z)});var j=r(27387),W=r(63257),V=r(96583);(d=x||(x={})).UNKNOWN_NOT_GIT="UNKNOWN_NOT_GIT",d.UNKNOWN="UNKNOWN",d.TIMEOUT="TIMEOUT",d.CHANNEL_CLOSED="CHANNEL_CLOSED",d.UNKNOWN_REF="UNKNOWN_REF",d.NOT_INITIALIZED="NOT_INITIALIZED",d.UNAUTHENTICATED="UNAUTHENTICATED",d.INDEX_FILE_CORRUPT="INDEX_FILE_CORRUPT",d.UNKNOWN_REMOTE="UNKNOWN_REMOTE",d.INDEX_LOCKED="INDEX_LOCKED",d.NO_COMMITS="NO_COMMITS",d.PATH_MATCHED_NO_FILES="PATH_MATCHED_NO_FILES",d.USER_NOT_CONFIGURED="USER_NOT_CONFIGURED",d.INVALID_REFERENCE="INVALID_REFERENCE",d.BRANCH_ALREADY_EXISTS="BRANCH_ALREADY_EXISTS",d.MERGE_CONFLICT="MERGE_CONFLICT",d.UPSTREAM_NOT_SET="UPSTREAM_NOT_SET",d.HEAD_DETACHED="HEAD_DETACHED",d.DIRTY_WORKTREE="DIRTY_WORKTREE",d.PUSH_REJECTED="PUSH_REJECTED",d.REMOTE_ALREADY_EXISTS="REMOTE_ALREADY_EXISTS",d.ALREADY_INITIALIZED="ALREADY_INITIALIZED",d.INVALID_STATE="INVALID_STATE",d.PROTECTED_BRANCH="PROTECTED_BRANCH",C.Dy.Enum(x);var X=/^(fatal: |error: |remote: error: |CONFLICT \([^)]+\): )/im,K=/^cat: .*: No such file or directory$/im;function $(e){return RegExp("^fatal: ".concat(e.source),"im")}function Y(e){return RegExp("^error: ".concat(e.source),"im")}var J=[{error:"NOT_INITIALIZED",match:[$(/not a git repository/)]},{error:"UNAUTHENTICATED",match:[$(/Authentication failed/),$(/unable to access/),$(/repository \S+ not found/),$(/could not read Username/),$(/could not read Password/),$(/Could not read from remote/)]},{error:"INDEX_FILE_CORRUPT",match:[$(/index file corrupt/),$(/index file smaller than expected/),Y(/index file .*?\.idx is too small/)]},{error:"UNKNOWN_REMOTE",match:[$(/No such remote/),Y(/No such remote/)]},{error:"UNKNOWN_REF",match:[$(/couldn't find remote ref/)]},{error:"INDEX_LOCKED",match:[$(/Unable to create .*?\.git\/index\.lock/),Y(/Unable to create .*?\.git\/index\.lock/)]},{error:"NO_COMMITS",match:[$(/your current branch '.*?' does not have any commits yet/)]},{error:"PATH_MATCHED_NO_FILES",match:[$(/pathspec '.*?' did not match any files/),$(/pathspec '.*?' did not match any file\(s\) known to git/),$(/path '.*?' does not exist/),$(/path '.*?' exists on disk, but not in/)]},{error:"USER_NOT_CONFIGURED",match:[$(/unable to auto-detect email address/),$(/unable to auto-detect name/),$(/empty ident name \(for <.*?>\) not allowed/)]},{error:"INVALID_REFERENCE",match:[$(/invalid reference: .*?$/),$(/'.*?' - not a valid ref/)]},{error:"BRANCH_ALREADY_EXISTS",match:[$(/A branch named '.*?' already exists/)]},{error:"MERGE_CONFLICT",match:[$(/Not possible to fast-forward, aborting/),$(/refusing to merge unrelated histories/),$(/Exiting because of an unresolved conflict/),$(/Exiting because of unfinished merge/),Y(/Failed to merge in the changes/),RegExp("^CONFLICT \\([^\\)]+\\): ".concat(/Merge conflict in/.source),"im")]},{error:"UPSTREAM_NOT_SET",match:[$(/The current branch \S+ has no upstream branch/),$(/No configured push destination/)]},{error:"HEAD_DETACHED",match:[$(/HEAD does not point to a branch/),$(/ref HEAD is not a symbolic ref/)]},{error:"DIRTY_WORKTREE",match:[Y(/Your local changes to the following files would be overwritten/),Y(/The following untracked working tree files would be overwritten/),Y(/\S+ is not possible because you have unmerged files/),Y(/cannot rebase: You have unstaged changes/)]},{error:"PROTECTED_BRANCH",match:[RegExp("^remote: error: ".concat(/.*? Protected branch update failed/.source),"im")]},{error:"PUSH_REJECTED",match:[Y(/failed to push some refs to/)]},{error:"REMOTE_ALREADY_EXISTS",match:[$(/remote .*? already exists/),Y(/remote .*? already exists/)]},{error:"INVALID_STATE",match:[$(/There is no merge in progress/),$(/There is no merge to abort/),$(/No rebase in progress/)]}];function q(e){if(X.test(e)){for(var t=0;t<J.length;t++)for(var r=0;r<J[t].match.length;r++)if(J[t].match[r].test(e))return J[t].error;return"UNKNOWN"}return K.test(e)?"PATH_MATCHED_NO_FILES":"UNKNOWN_NOT_GIT"}var Q=r(66626),ee=r(78950);function et(e,t){for(var r=[],n=e.split(t),i=0;i<n.length;i++){var o=n[i].trim();""!==o&&r.push(o)}return r}function er(e){return"'".concat(e.replace(/'/g,"'\\''"),"'")}function en(e){return e.replace(/^refs\/(?:heads|remotes)\//,"")}function ei(e){if(-1===e.indexOf("/")||e.startsWith("refs/heads/"))return[null,null];if(e.startsWith("refs/remotes/")){var t=(0,ee._)(e.split("/"));return[t[2],t.slice(3).join("/")]}var r=(0,ee._)(e.split("/"));return[r[0],r.slice(1).join("/")]}function eo(e){return e.replace(/^refs\/remotes\//,"")}var ea=/[~^:?*[\\\0-\x20\x7F]/,el=/^(([A-Za-z0-9]+@|http(|s):\/\/)|(http(|s):\/\/[A-Za-z0-9]+@))([A-Za-z0-9.]+(:\d+)?)(?::|\/)([\d/\w.-]+?)$/,eu=new RegExp([ea,/^$/,/^\//,/\/$/,/\.lock$/,/\/{2,}/,/^\./,/\.$/,/\/\./,/\.\./,/@\{/,/^@$/,/^-/].map(function(e){return"(?:".concat(e.source,")")}).join("|"));function ec(e){return 0===e.length||!ea.test(e)}function es(e){return!eu.test(e)}function ef(e){return!eu.test(e)}function ed(e){return el.test(e)}function eh(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"string"==typeof e?en(e):"commit"in e?e.type===g.LOCAL||t&&e.type===g.TRACKED?e.name:"".concat(e.remote,"/").concat(e.name):e.name}function ep(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"==typeof e)return e;if("commit"in e)return e.type===g.LOCAL||t&&e.type===g.TRACKED?"refs/heads/".concat(e.name):"refs/remotes/".concat(e.remote,"/").concat(e.name);if(e.type===y.BRANCH)return"refs/heads/".concat(e.name);if(e.type===y.REMOTE_BRANCH)return"refs/remotes/".concat(e.remote,"/").concat(e.branch);throw Error("Unknown branch object")}function ev(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"==typeof e)return t&&!e.startsWith("refs/remotes/")?null:(0,Q._)(ei(e),1)[0];if("commit"in e)return t&&e.type!==g.REMOTE?null:e.remote;if(e.type===y.BRANCH)return null;if(e.type===y.REMOTE_BRANCH)return e.remote;throw Error("Unknown branch object")}function em(e,t){return e===t||null!==e&&null!==t&&ep(e)===ep(t)}function ey(e,t){return eg.apply(this,arguments)}function eg(){return(eg=(0,j._)(function(e,t){var r,n,i,o,a;return(0,V.Jh)(this,function(l){switch(l.label){case 0:if(r=t.name,n=t.url,o=void 0!==(i=t.fetch)&&i,!ef(r=eo(r)))return[2,{error:x.INVALID_REFERENCE}];return r=er(r),n=er(n),[4,e(["git remote add"].concat((0,W._)(o?["-f"]:[]),[r,n]).join(" "),{serviceMethod:"git-add-remote"})];case 1:if((a=l.sent()).error)return[2,a];return[2,{didFetch:a.output.includes("Updating"),error:null}]}})})).apply(this,arguments)}function eE(e,t){return"{ ".concat(e,"; } > /dev/null 2>&1 && echo -n '").concat(t,"' && exit 0")}var eD=[eE("! git rev-parse --is-inside-work-tree",b.NOT_INITIALIZED),eE('[ "$(! git rev-parse HEAD -- 2>&1)" = "fatal: bad revision \'HEAD\'" ]',b.ON_UNBORN_BRANCH),eE("git rev-parse -q --verify MERGE_HEAD",b.MERGING),eE("[ -d '.git/rebase-apply' ] && [ -f '.git/rebase-apply/applying' ]",b.APPLYING_MAILBOX),eE("[ -d '.git/rebase-apply' ] || [ -d '.git/rebase-merge' ]",b.REBASING),eE("git rev-parse -q --verify REVERT_HEAD",b.REVERTING),eE("git rev-parse -q --verify CHERRY_PICK_HEAD",b.CHERRY_PICKING),eE("[ -f '.git/BISECT_LOG' ]",b.BISECTING),eE("! git symbolic-ref -q HEAD",b.DETACHED_HEAD),"git update-index -q --refresh > /dev/null || exit $?",eE('{ ! git diff-files --quiet; } || [ -n "$(git ls-files --others --exclude-standard)" ]',b.DIRTY_WORKTREE),eE("! git diff-index --cached --quiet HEAD --",b.DIRTY_INDEX),'echo -n "CLEAN"'].join(";");function eb(e){return ew.apply(this,arguments)}function ew(){return(ew=(0,j._)(function(e){var t,r,n;return(0,V.Jh)(this,function(i){switch(i.label){case 0:return[4,e(eD,{serviceMethod:"git-get-repository-state"})];case 1:if((t=i.sent()).error)return[2,t];if(!(t.output in b))return[2,{error:x.UNKNOWN}];return n=function(e){switch(e){case b.NOT_INITIALIZED:case b.ON_UNBORN_BRANCH:return w.INITIALIZING;case b.MERGING:case b.REBASING:case b.REVERTING:case b.CHERRY_PICKING:case b.APPLYING_MAILBOX:case b.BISECTING:return w.INTERMEDIATE;case b.DIRTY_WORKTREE:case b.DIRTY_INDEX:case b.CLEAN:return w.NORMAL;case b.DETACHED_HEAD:return w.DETACHED_HEAD}}(r=t.output),[2,{state:r,type:n,error:null}]}})})).apply(this,arguments)}var e_='git commit --allow-empty --no-edit --quiet -m "Initial commit"',eR='git add -A && git commit --allow-empty --no-edit --quiet -m "Initial commit"';function eT(e){return ex.apply(this,arguments)}function ex(){return(ex=(0,j._)(function(e){var t,r,n,i,o,a,l,u,c,s=arguments;return(0,V.Jh)(this,function(f){switch(f.label){case 0:return n=void 0===(r=(t=s.length>1&&void 0!==s[1]?s[1]:{}).initialCommit)||r,o=void 0===(i=t.includeAllInitialFiles)||i,[4,eb(e)];case 1:if((a=f.sent()).error)return[2,a];if(a.type!==w.INITIALIZING)return[2,{error:x.ALREADY_INITIALIZED}];if(a.state!==b.ON_UNBORN_BRANCH)return[3,4];if(!n)return[3,3];return[4,e(o?eR:e_,{serviceMethod:"git-init"})];case 2:if((l=f.sent()).error)return[2,l];f.label=3;case 3:return[2,{error:null}];case 4:return[4,e(["git init --quiet","git checkout --quiet --no-progress -b main"],{serviceMethod:"git-init"})];case 5:if((u=f.sent()).error)return[2,u];if(!n)return[3,7];return[4,e(o?eR:e_,{serviceMethod:"git-init"})];case 6:if((c=f.sent()).error)return[2,c];f.label=7;case 7:return[2,{error:null}]}})})).apply(this,arguments)}function eI(e,t){return eA.apply(this,arguments)}function eA(){return(eA=(0,j._)(function(e,t){var r,n;return(0,V.Jh)(this,function(i){switch(i.label){case 0:var o,a,l,u;return[4,e((o=t.message,a=t.files,l=t.allowEmpty,u=["--allow-empty-message","--cleanup=whitespace","--no-edit","--quiet","-m ".concat(er(o))],(void 0===l||l)&&u.push("--allow-empty"),a&&u.push.apply(u,["--only","--"].concat((0,W._)(a.map(er)))),"git --literal-pathspecs commit ".concat(u.join(" "))),{serviceMethod:"git-commit"})];case 1:if((r=i.sent()).error)return[2,r];return[4,e("git rev-parse HEAD",{serviceMethod:"git-commit"})];case 2:if((n=i.sent()).error)return[2,n];return[2,{hash:n.output,error:null}]}})})).apply(this,arguments)}function eC(e,t){return eN.apply(this,arguments)}function eN(){return(eN=(0,j._)(function(e,t){var r,n;return(0,V.Jh)(this,function(i){switch(i.label){case 0:if(!(r=function(e){if("all"in e)return e.all?["git add -A"]:["git reset -q -- ."];var t=e.add,r=e.reset;if(!(null==t?void 0:t.length)&&!(null==r?void 0:r.length))return null;var n=[];if(t){var i=t.map(er).join(" ");n.push("git --literal-pathspecs add -- ".concat(i))}if(r){var o=r.map(er).join(" ");n.push("git --literal-pathspecs reset -q -- ".concat(o))}return n}(t)))return[2,{error:null}];return[4,e(r,{serviceMethod:"git-stage-files"})];case 1:if((n=i.sent()).error)return[2,n];return[2,{error:null}]}})})).apply(this,arguments)}function eS(e,t){return eO.apply(this,arguments)}function eO(){return(eO=(0,j._)(function(e,t){var r;return(0,V.Jh)(this,function(n){switch(n.label){case 0:var i,o,a;return[4,e((o=er(t.commit),a=er(null!==(i=t.message)&&void 0!==i?i:"Restored to ".concat(o)),["set -eo pipefail;","RESOLVED_COMMIT_HASH=$(git rev-parse ".concat(o,");"),"COMMIT_TREE=$(git commit-tree -p HEAD -m ".concat(a,' "$RESOLVED_COMMIT_HASH^{tree}");'),'git reset --quiet --hard "$COMMIT_TREE";','echo -n "$COMMIT_TREE";'].join(" ")))];case 1:if((r=n.sent()).error)return[2,r];return[2,{hash:r.output,error:null}]}})})).apply(this,arguments)}C.Dy.Object({initialCommit:C.Dy.Optional(C.Dy.Boolean()),includeAllInitialFiles:C.Dy.Optional(C.Dy.Boolean())}),C.Dy.Object({message:C.Dy.String(),files:C.Dy.Optional(C.Dy.Array(C.Dy.String())),allowEmpty:C.Dy.Optional(C.Dy.Boolean())}),C.Dy.Union([C.Dy.Object({all:C.Dy.Boolean()}),C.Dy.Object({add:C.Dy.Optional(C.Dy.Array(C.Dy.String())),reset:C.Dy.Optional(C.Dy.Array(C.Dy.String()))})]),C.Dy.Object({message:C.Dy.String()}),C.Dy.Object({a:C.Dy.String(),b:C.Dy.String()}),r(79125),C.Dy.Object({commit:C.Dy.String(),message:C.Dy.Optional(C.Dy.String())}),C.Dy.Object({commit:C.Dy.String()});var eZ="HEAD -> ",eM="refs/heads/",eF="refs/remotes/",ek="tag: ",eP="refs/tags/",eL=/^refs\/remotes\/([^/]+)\/HEAD$/;function eG(e){var t;switch("HEAD"===(t=e)||"refs/HEAD"===t||t.startsWith(eZ)?y.HEAD:t.startsWith(eM)?y.BRANCH:t.startsWith(eF)?eL.test(t)?y.REMOTE_HEAD:y.REMOTE_BRANCH:t.startsWith(eP)||t.startsWith(ek)?y.TAG:y.BRANCH){case y.HEAD:if(e.startsWith(eZ)){if(e.endsWith("(detached)"))return{type:y.HEAD,name:"HEAD",detached:!0,ref:null};return{type:y.HEAD,name:"HEAD",detached:!1,ref:eG(e.slice(eZ.length))}}return{type:y.HEAD,name:"HEAD",detached:!1,ref:null};case y.REMOTE_HEAD:var r=e.slice(eF.length),n=(0,Q._)(r.split("/"),1)[0];return{type:y.REMOTE_HEAD,name:"HEAD",remote:n};case y.BRANCH:return{type:y.BRANCH,name:e.startsWith(eM)?e.slice(eM.length):e};case y.REMOTE_BRANCH:var i=e.slice(eF.length),o=(0,ee._)(i.split("/")),a=o[0],l=o.slice(1).join("/");return{type:y.REMOTE_BRANCH,name:i,remote:a,branch:l};case y.TAG:return e.startsWith(ek)&&(e=e.slice(ek.length)),e.startsWith(eP)&&(e=e.slice(eP.length)),{type:y.TAG,name:e}}}function eH(e,t){return eU.apply(this,arguments)}function eU(){return(eU=(0,j._)(function(e,t){var r,n,i,o,a,l;return(0,V.Jh)(this,function(u){switch(u.label){case 0:if(r=(t=ep(t)).startsWith("refs/heads/"),n=t.startsWith("refs/remotes/"),r)return[3,2];return i=n?t:"refs/remotes/".concat(t),[4,e("git show-ref --verify ".concat(i),{serviceMethod:"git-branch-exists"})];case 1:if(!(o=u.sent()).error)return[2,{exists:!0,ref:eG(i),error:null}];if(o.error!==x.INVALID_REFERENCE)return[2,o];u.label=2;case 2:if(n)return[3,4];return a=r?t:"refs/heads/".concat(t),[4,e("git show-ref --verify ".concat(a),{serviceMethod:"git-branch-exists"})];case 3:if(!(l=u.sent()).error)return[2,{exists:!0,ref:eG(a),error:null}];if(l.error!==x.INVALID_REFERENCE)return[2,l];u.label=4;case 4:return[2,{exists:!1,ref:null,error:null}]}})})).apply(this,arguments)}function eB(e,t){return ez.apply(this,arguments)}function ez(){return(ez=(0,j._)(function(e,t){var r,n,i,o;return(0,V.Jh)(this,function(a){switch(a.label){case 0:return r=t.upstream,n=t.branchName,i=["--set-upstream-to",r],n&&i.push(er(n)),[4,e("git branch ".concat(i.join(" ")),{serviceMethod:"git-set-branch-upstream"})];case 1:if((o=a.sent()).error)return[2,o];return[2,{error:null}]}})})).apply(this,arguments)}function ej(e,t,r){return eW.apply(this,arguments)}function eW(){return(eW=(0,j._)(function(e,t,r){var n,i,o;return(0,V.Jh)(this,function(a){switch(a.label){case 0:if(em(t,r)){if(t=eh(t,!0),r=eh(r),t===r)return[2,{canMerge:!0,error:null}]}else t=eh(t),r=eh(r);return t=er(t),r=er(r),n="git merge-base ".concat(t," ").concat(r),i='git merge-tree "$('.concat(n,')" ').concat(t," ").concat(r),[4,e("set -eo pipefail; (".concat(i," | ").concat("( (grep -q -e '^+<* \\.our$' && echo '1') || echo '0')",") || test $? -eq 141"),{serviceMethod:"git-can-merge-branches"})];case 1:if((o=a.sent()).error)return[2,o];return[2,{canMerge:"0"===o.output,error:null}]}})})).apply(this,arguments)}function eV(e,t){return eX.apply(this,arguments)}function eX(){return(eX=(0,j._)(function(e,t){var r,n,i,o,a,l;return(0,V.Jh)(this,function(u){switch(u.label){case 0:return[4,eH(e,t=ep(t,!0))];case 1:if((r=u.sent()).error)return[2,r];if(!r.exists)return[2,{error:x.INVALID_REFERENCE}];if(n=["--quiet","--no-guess"],r.ref.type!==y.REMOTE_BRANCH)return[3,3];return i=r.ref.branch,o=r.ref.name,[4,eH(e,"refs/heads/".concat(i))];case 2:if((a=u.sent()).error)return[2,a];return a.exists?n.push(er(i),"--"):n.push("-t","-b",er(i),er(o),"--"),[3,4];case 3:n.push(er(r.ref.name),"--"),u.label=4;case 4:return[4,e("git checkout ".concat(n.join(" ")),{serviceMethod:"git-switch-branch"})];case 5:if((l=u.sent()).error)return[2,l];return[2,{error:null}]}})})).apply(this,arguments)}function eK(e,t){return e$.apply(this,arguments)}function e$(){return(e$=(0,j._)(function(e,t){var r,n,i,o,a,l,u,c,s,f,d;return(0,V.Jh)(this,function(h){switch(h.label){case 0:return r=t.name,i=void 0===(n=t.startPoint)?"HEAD":n,o=t.track,l=void 0!==(a=t.checkout)&&a,[4,eH(e,r=en(r))];case 1:if((u=h.sent()).error)return[2,u];if(u.exists)return[2,{error:x.BRANCH_ALREADY_EXISTS}];if("HEAD"===i){if(!0===o)return[2,{error:x.INVALID_REFERENCE}];o=!1}if(!(!1!==o))return[3,3];return[4,eH(e,i)];case 2:if((c=h.sent()).error)return[2,c];if(!c.exists&&!0===o)return[2,{error:x.INVALID_REFERENCE}];c.exists&&c.ref.type===y.REMOTE_BRANCH&&void 0===o&&(o=!0),h.label=3;case 3:return s=["--quiet",o?"--track":"--no-track",er(r),er(i)],[4,e("git branch ".concat(s.join(" ")),{serviceMethod:"git-create-branch"})];case 4:if((f=h.sent()).error)return[2,f];if(!l)return[3,6];return[4,eV(e,r)];case 5:if((d=h.sent()).error)return[2,d];h.label=6;case 6:return[2,{error:null}]}})})).apply(this,arguments)}function eY(e){return eJ.apply(this,arguments)}function eJ(){return(eJ=(0,j._)(function(e){var t,r,n,i,o=arguments;return(0,V.Jh)(this,function(a){switch(a.label){case 0:return t=o.length>1&&void 0!==o[1]?o[1]:{},r=["--quiet"],t.depth&&(n=t.deepen?"--deepen":"--depth",r.push("".concat(n,"=").concat(t.depth))),t.remote?r.push(er(t.remote)):r.push("--all"),[4,e("git fetch ".concat(r.join(" ")),{serviceMethod:"git-fetch"})];case 1:if((i=a.sent()).error)return[2,i];return[2,{error:null}]}})})).apply(this,arguments)}C.Dy.Object({remote:C.Dy.Optional(C.Dy.String()),depth:C.Dy.Optional(C.Dy.Number()),deepen:C.Dy.Optional(C.Dy.Boolean())});var eq=["main","master","trunk","dev","develop","development","staging","prod","production"].map(function(e){return'if [ $(git rev-parse --verify --quiet "heads/'.concat(e,'") ]; then\n      echo "refs/heads/').concat(e,'"\n    fi')}).join("\n"),eQ='\ngit remote | while IFS= read -r remote; do\n  if [ -z "$remote" ]; then continue; fi\n  branch="$('.concat('\nif [ -f ".git/refs/remotes/$remote/HEAD" ]; then\n  echo "$(sed -e "s/^ref: refs\\/remotes\\/$remote\\///" < .git/refs/remotes/$remote/HEAD)"\nelse\n  remote_result="$(git ls-remote --symref "$remote" HEAD)"\n  if [ -z "$remote_result" ]; then\n    echo ""\n  else\n    branch_name="$(\n      echo "$remote_result" | \\\n      head -1 | \\\n      awk \'{print $2}\' | \\\n      sed -e "s/^refs\\/heads\\///"\n    )"\n    git remote set-head "$remote" "$branch_name" >&2\n    echo "$branch_name"\n  fi\nfi\n'.trim(),')"\n  if [ -z "$branch" ]; then continue; fi\n  echo "refs/remotes/$remote/$branch"\n  if [ $(git rev-parse --verify --quiet "heads/$branch") ]; then\n    echo "refs/heads/$branch"\n  fi\ndone\n').concat(eq,"\n").trim();function e0(e){return e1.apply(this,arguments)}function e1(){return(e1=(0,j._)(function(e){var t;return(0,V.Jh)(this,function(r){switch(r.label){case 0:return[4,e(eQ,{serviceMethod:"git-find-default-branches"})];case 1:if((t=r.sent()).error)return[2,t];return[2,{refs:(0,W._)(new Set(et(t.output,"\n"))).map(function(e){return eG(e)}),error:null}]}})})).apply(this,arguments)}function e2(e,t){return!!e&&!!t&&(e===t||e.name===t.name&&e.remote===t.remote)}function e5(e){var t=(0,Q._)(e.split("	"),6),r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],l=t[5],u=eG(r),c={hash:i,author:{name:o,email:a.replace(/^<|>$/g,""),date:1e3*parseInt(l,10)}};if(u.type===y.BRANCH){var s=n?eG(n):null,f=s&&(s.type===y.REMOTE_BRANCH||s.type===y.BRANCH)?s:null;return{type:g.LOCAL,name:u.name,push:f,remote:null,tracking:null,commit:c}}return u.type===y.REMOTE_BRANCH?{type:g.REMOTE,name:u.branch,remote:u.remote,push:null,tracking:null,commit:c}:null}function e4(e){return e3.apply(this,arguments)}function e3(){return(e3=(0,j._)(function(e){var t,r,n=arguments;return(0,V.Jh)(this,function(i){switch(i.label){case 0:return[4,e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!1===e.local&&!1===e.remote)throw Error("Cannot specify both local and remote as false");var t=[];if(t.push('--format="%(refname)%09%(push)%09%(objectname)%09%(authorname)%09%(authoremail)%09%(authordate:unix)"'),e.max&&t.push("--count=".concat(e.max)),e.pattern){if("string"==typeof e.pattern)t.push(er(e.pattern));else{var r,n,i=e.pattern.map(function(e){return er(e)});t.push.apply(t,(0,W._)(i))}}else(null===(r=e.local)||void 0===r||r)&&t.push("refs/heads"),(null===(n=e.remote)||void 0===n||n)&&t.push("refs/remotes");return"git for-each-ref ".concat(t.join(" "))}(n.length>1&&void 0!==n[1]?n[1]:{}),{serviceMethod:"git-list-branches"})];case 1:if((t=i.sent()).error)return[2,t];return(r=function(e){var t=[],r=[],n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var u=a.value;u.type===g.LOCAL?t.push(u):u.type===g.REMOTE&&r.push(u)}}catch(e){i=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}var c=new Set,s=[],f=!0,d=!1,h=void 0;try{for(var p,v=r[Symbol.iterator]();!(f=(p=v.next()).done);f=!0)!function(){var e=p.value,r=t.find(function(t){return t.push&&t.push.type===y.REMOTE_BRANCH&&t.push.remote===e.remote&&t.push.branch===e.name&&t.name===e.name});r&&(c.add(e),c.add(r),s.push({type:g.TRACKED,name:r.name,remote:e.remote,push:r.push,tracking:e,commit:r.commit}))}()}catch(e){d=!0,h=e}finally{try{f||null==v.return||v.return()}finally{if(d)throw h}}var m=e.filter(function(e){return!c.has(e)});return(0,W._)(m).concat((0,W._)(s))}(et(t.output,"\n").map(e5).filter(function(e){return null!==e}))).sort(function(e,t){return t.commit.author.date-e.commit.author.date}),[2,{branches:r,error:null}]}})})).apply(this,arguments)}function e7(e,t){return e6.apply(this,arguments)}function e6(){return(e6=(0,j._)(function(e,t){var r,n,i,o,a,l,u,c,s,f,d,h;return(0,V.Jh)(this,function(p){switch(p.label){case 0:if(!es(t=eh(t,!0)))return[2,{error:x.INVALID_REFERENCE}];return r=en(t),i=(n=(0,Q._)(ei(t),2))[0],o=n[1],a=["refs/heads/".concat(r),"refs/remotes/*/".concat(r)],i&&o&&(a.push("refs/heads/".concat(o)),a.push("refs/remotes/".concat(i,"/").concat(o))),[4,e4(e,{pattern:a})];case 1:if((l=p.sent()).error)return[2,l];if(0===l.branches.length)return[2,{error:x.INVALID_REFERENCE}];u=!0,c=!1,s=void 0;try{for(f=l.branches[Symbol.iterator]();!(u=(d=f.next()).done);u=!0)if((h=d.value).type!==g.REMOTE&&h.name===r||i&&o&&h.type!==g.LOCAL&&h.remote===i&&h.name===o)return[2,{branch:h,error:null}]}catch(e){c=!0,s=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw s}}return[2,{error:x.INVALID_REFERENCE}]}})})).apply(this,arguments)}var e8=r(41733),e9=r(30509);function te(e){var t=(0,Q._)(e.trimStart().split("\x1f"),11),r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],l=t[5],u=t[6],c=t[7],s=t[8],f=t[9],d=t[10],h=[],p=i?i.split(" "):null,v=!1,m=!0,y=!1,g=void 0;try{for(var E,D=et(r,",")[Symbol.iterator]();!(m=(E=D.next()).done);m=!0){var b=E.value;if("grafted"===b){v=!0;continue}h.push(eG(b))}}catch(e){y=!0,g=e}finally{try{m||null==D.return||D.return()}finally{if(y)throw g}}return{refs:h,hash:n,parents:p,grafted:v,author:{name:o,email:a,date:1e3*parseInt(l,10)},committer:{name:u,email:c,date:1e3*parseInt(s,10)},subject:f?f.trim():"",body:d?d.trim():""}}function tt(e){return tr.apply(this,arguments)}function tr(){return(tr=(0,j._)(function(e){var t,r=arguments;return(0,V.Jh)(this,function(n){switch(n.label){case 0:var i,o,a,l,u,c,s;return[4,e((a=void 0===(o=(i=r.length>1&&void 0!==r[1]?r[1]:{}).max)?25:o,l=i.skip,u=i.revRange,c=i.path,s=["-z","--decorate=full","--full-history",'--format="format:%D%x1f%H%x1f%P%x1f%an%x1f%ae%x1f%at%x1f%cn%x1f%ce%x1f%ct%x1f%s%x1f%b"'],a=Math.max(1,Math.min(a,200)),s.push("-n ".concat(a)),l&&s.push("--skip ".concat(l)),u&&s.push(u),s.push("--"),c&&s.push(c),"git log ".concat(s.join(" "))),{serviceMethod:"git-log"})];case 1:if((t=n.sent()).error){if(t.error===x.NO_COMMITS)return[2,{commits:[],error:null}];return[2,t]}return[2,{commits:et(t.output,"\x00").map(te),error:null}]}})})).apply(this,arguments)}function tn(e,t){return ti.apply(this,arguments)}function ti(){return(ti=(0,j._)(function(e,t){var r,n;return(0,V.Jh)(this,function(i){switch(i.label){case 0:if(!t.commit)return[2,{error:x.INVALID_REFERENCE}];return[4,tt(e,{max:1,revRange:t.commit})];case 1:if((r=i.sent()).error)return[2,r];if(0===r.commits.length)return[2,{error:x.INVALID_REFERENCE}];return n=r.commits[0],[2,(0,e9._)((0,e8._)({},n),{error:null})]}})})).apply(this,arguments)}C.Dy.Object({commit:C.Dy.String()});var to=["git diff -z --name-only --diff-filter=U","echo -n ".concat("\x1f"),"{ git grep -z -l -E '<{7,}|={7,}|>{7,}' || exit $(( $? == 1 ? 0 : $? )); }"].join(" && ");function ta(e){return tl.apply(this,arguments)}function tl(){return(tl=(0,j._)(function(e){var t,r,n,i,o,a,l,u,c,s,f;return(0,V.Jh)(this,function(d){switch(d.label){case 0:return[4,e(to,{serviceMethod:"git-get-conflicting-files"})];case 1:if((t=d.sent()).error)return[2,t];if(n=(r=(0,Q._)(t.output.split("\x1f").map(function(e){return et(e,"\x00")}),2))[0],i=r[1],!n.length)return[2,{files:new Map,error:null}];o=new Map,a=!0,l=!1,u=void 0;try{for(c=n[Symbol.iterator]();!(a=(s=c.next()).done);a=!0)f=s.value,o.set(f,!i.includes(f))}catch(e){l=!0,u=e}finally{try{a||null==c.return||c.return()}finally{if(l)throw u}}return[2,{files:o,error:null}]}})})).apply(this,arguments)}function tu(e,t){return tc.apply(this,arguments)}function tc(){return(tc=(0,j._)(function(e,t){var r,n,i,o,a,l;return(0,V.Jh)(this,function(u){switch(u.label){case 0:if(r=t.path,n=t.convertToBase64,o=void 0===(i=t.revision)?"HEAD":i,""===r)return[2,{content:null,error:null}];return a=er("".concat(o,":").concat(r)),[4,e(n?"git --no-pager show ".concat(a," | base64"):"git --no-pager show ".concat(a),{verbatim:!0,serviceMethod:"git-get-file-contents"})];case 1:if((l=u.sent()).error){if(l.error===x.PATH_MATCHED_NO_FILES)return[2,{content:null,error:null}];return[2,l]}return[2,{content:l.output,error:null}]}})})).apply(this,arguments)}function ts(e){return tf.apply(this,arguments)}function tf(){return(tf=(0,j._)(function(e){var t,r,n,i,o,a;return(0,V.Jh)(this,function(l){switch(l.label){case 0:return[4,eb(e)];case 1:if((t=l.sent()).error)return[2,t];if(t.state!==b.MERGING)return[2,{error:x.INVALID_STATE}];return[4,e("cat '.git/MERGE_HEAD'",{serviceMethod:"git-get-merging-refs"})];case 2:if((r=l.sent()).error)return[2,r];if(!(n=et(r.output,"\n")).length)return[2,{commits:[],branches:[],error:null}];return i="{ grep -F '".concat(n.join("\n"),"' || exit 0; }"),[4,e("".concat('git for-each-ref --format="%(objectname)	%(refname)" refs/heads/ refs/remotes/'," | ").concat(i),{serviceMethod:"git-get-merging-refs"})];case 3:if((o=l.sent()).error)return[2,o];if(!o.output)return[2,{commits:n,branches:[],error:null}];return a=et(o.output,"\n").map(function(e){return e.split("	")[1]}).map(en),[2,{commits:n,branches:a,error:null}]}})})).apply(this,arguments)}function td(e){return th.apply(this,arguments)}function th(){return(th=(0,j._)(function(e){var t,r,n,i,o,a,l,u,c,s,f,d,h,p;return(0,V.Jh)(this,function(v){switch(v.label){case 0:return[4,e("git remote -v",{serviceMethod:"git-get-remotes"})];case 1:if((t=v.sent()).error)return[2,t];if(""===t.output)return[2,{remotes:new Map,error:null}];r=new Map,n=!0,i=!1,o=void 0;try{for(a=et(t.output,"\n")[Symbol.iterator]();!(n=(l=a.next()).done);n=!0)u=l.value,s=(c=(0,Q._)(u.split(/\s+/),3))[0],f=c[1],d=c[2],s&&f&&d&&(p=null!==(h=r.get(s))&&void 0!==h?h:{name:s,fetch:"",push:""},"(fetch)"===d?(p.fetch=f,""===p.push&&(p.push=f),r.set(s,p)):"(push)"===d&&(p.push=f,""===p.fetch&&(p.fetch=f),r.set(s,p)))}catch(e){i=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return[2,{remotes:r,error:null}]}})})).apply(this,arguments)}function tp(e){switch(e){case"A":return E.ADDED;case"C":return E.COPIED;case"D":return E.DELETED;case"M":return E.MODIFIED;case"R":return E.RENAMED;case"T":return E.TYPE_CHANGED;case"X":default:return E.UNKNOWN;case"B":return E.BROKEN}}var tv=(h=(0,j._)(function(e,t){var r;return(0,V.Jh)(this,function(n){switch(n.label){case 0:return[4,e("git log -1 --pretty=%P ".concat(t))];case 1:if((r=n.sent()).error)return[2,!1];return[2,r.output.trim().length>0]}})}),function(e,t){return h.apply(this,arguments)}),tm=(p=(0,j._)(function(e,t){var r,n,i,o,a,l,u,c,s;return(0,V.Jh)(this,function(f){switch(f.label){case 0:return[4,e("git ls-tree --name-only -r ".concat(t),{serviceMethod:"git-get-files-for-commit"})];case 1:if((r=f.sent()).error)return[2,r];n=[],i=r.output.split("\n").filter(Boolean),o=!0,a=!1,l=void 0;try{for(u=i[Symbol.iterator]();!(o=(c=u.next()).done);o=!0)s=c.value,n.push({path:s,type:E.ADDED})}catch(e){a=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}return[2,{files:n,error:null}]}})}),function(e,t){return p.apply(this,arguments)});function ty(e){return Array.from(e.matchAll(tD)).map(function(e){var t=(0,Q._)(e,4),r=t[1],n=t[2];return{path:t[3],originalPath:n,type:tp(r)}})}function tg(e){return Array.from(e.matchAll(tE)).map(function(e){var t=(0,Q._)(e,3),r=t[1];return{path:t[2],type:tp(r)}})}var tE=/([ADMUXBT])\0([^\0]+)/g,tD=/([RC])\d*\0([^\0]+)\0([^\0]+)/g;function tb(e,t){return tw.apply(this,arguments)}function tw(){return(tw=(0,j._)(function(e,t){var r,n,i;return(0,V.Jh)(this,function(o){switch(o.label){case 0:return[4,tv(e,t)];case 1:if(!o.sent())return[2,tm(e,t)];return[4,e("git diff-tree --no-commit-id --name-status -z -r -C --find-copies-harder -M ".concat(t),{serviceMethod:"git-get-files-for-commit"})];case 2:if((r=o.sent()).error)return[2,r];return n=ty(r.output),i=tg(r.output),[2,{files:(0,W._)(n).concat((0,W._)(i)),error:null}]}})})).apply(this,arguments)}function t_(e){return tR.apply(this,arguments)}function tR(){return(tR=(0,j._)(function(e){var t;return(0,V.Jh)(this,function(r){switch(r.label){case 0:return[4,e("git rev-parse --is-inside-work-tree",{serviceMethod:"git-is-initialized"})];case 1:if((t=r.sent()).error){if(t.error===x.NOT_INITIALIZED)return[2,{initialized:!1,error:null}];return[2,t]}return[2,{initialized:"true"===t.output,error:null}]}})})).apply(this,arguments)}function tT(e){return tx.apply(this,arguments)}function tx(){return(tx=(0,j._)(function(e){var t,r;return(0,V.Jh)(this,function(n){switch(n.label){case 0:return[4,e("if [ -f '.git/FETCH_HEAD' ]; then stat -c %Y '.git/FETCH_HEAD'; fi",{serviceMethod:"git-last-fetched"})];case 1:if((t=n.sent()).error)return[2,t];if(!t.output||isNaN(r=parseInt(t.output,10)))return[2,{lastFetched:null,error:null}];return[2,{lastFetched:new Date(r*=1e3),error:null}]}})})).apply(this,arguments)}function tI(e){return tA.apply(this,arguments)}function tA(){return(tA=(0,j._)(function(e){var t,r=arguments;return(0,V.Jh)(this,function(n){switch(n.label){case 0:return[4,e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];return e.cached&&t.push("--cached"),e.deleted&&t.push("--deleted"),e.modified&&t.push("--modified"),e.others&&t.push("--others"),e.ignored&&t.push("--ignored"),e.directory&&t.push("--directory"),e.noEmptyDirectory&&t.push("--no-empty-directory"),"git ls-files ".concat(t.join(" "))}(r.length>1&&void 0!==r[1]?r[1]:{}),{serviceMethod:"git-ls-files"})];case 1:if((t=n.sent()).error)return[2,t];return[2,{files:t.output.split("\n").filter(function(e){return e.length>0}),error:null}]}})})).apply(this,arguments)}function tC(e,t){return tN.apply(this,arguments)}function tN(){return(tN=(0,j._)(function(e,t){var r,n,i,o,a,l,u,c,s;return(0,V.Jh)(this,function(f){switch(f.label){case 0:return r=t.branch,n=t.message,o=void 0!==(i=t.allowConflicts)&&i,[4,eb(e)];case 1:if((a=f.sent()).error)return[2,a];if(l=a.state,a.type!==w.NORMAL||l===b.DIRTY_WORKTREE||l===b.DIRTY_INDEX)return[2,{error:x.INVALID_STATE}];return[4,eH(e,r)];case 2:if((u=f.sent()).error)return[2,u];if(!u.exists)return[2,{error:x.INVALID_REFERENCE}];if(o)return[3,4];return[4,ej(e,r,"HEAD")];case 3:if((c=f.sent()).error)return[2,c];if(!c.canMerge)return[2,{error:x.MERGE_CONFLICT}];f.label=4;case 4:var d,h,p,v;return h=(d={branch:r,message:n}).branch,p=d.message,h=ep(h),v=["--quiet","--no-edit","--no-ff","--overwrite-ignore","--commit"],p&&v.push("-m",er(p)),v.push(er(h)),[4,e("git merge ".concat(v.join(" ")),{serviceMethod:"git-merge"})];case 5:if((s=f.sent()).error!==x.MERGE_CONFLICT)return[3,8];if(o)return[3,7];return[4,e("git merge --abort")];case 6:return f.sent(),[2,s];case 7:return[2,{hasConflicts:!0,error:null}];case 8:if(s.error)return[2,s];return[2,{hasConflicts:!1,error:null}]}})})).apply(this,arguments)}function tS(e){return tO.apply(this,arguments)}function tO(){return(tO=(0,j._)(function(e){var t;return(0,V.Jh)(this,function(r){switch(r.label){case 0:return[4,e("git merge --abort",{serviceMethod:"git-merge-abort"})];case 1:if((t=r.sent()).error)return[2,t];return[2,{error:null}]}})})).apply(this,arguments)}function tZ(e){return tM.apply(this,arguments)}function tM(){return(tM=(0,j._)(function(e){var t;return(0,V.Jh)(this,function(r){switch(r.label){case 0:return[4,e("GIT_EDITOR=/bin/true git merge --continue",{serviceMethod:"git-merge-continue"})];case 1:if((t=r.sent()).error)return[2,t];return[2,{error:null}]}})})).apply(this,arguments)}var tF="# branch.oid ",tk="# branch.head ",tP="# branch.upstream ",tL="# branch.ab ",tG="# stash ",tH=/^(\S)(\S) (\S{4}) (\S+) (\S+) (\S+) (\S+) (\S+) (.*)$/,tU=/^([RC])([0-9]+) (.+?)\t(.+)$/,tB=/^(\S)(\S) (\S{4}) (\S+) (\S+) (\S+) (\S+) (\S+) (\S+) (\S+) (.*)$/,tz=/([RC][0-9]+ .+?)\0(.+?(?:\0|$))/g;function tj(e){return tW.apply(this,arguments)}function tW(){return(tW=(0,j._)(function(e){var t,r,n,i,o,a,l,u,c,s,f,d,h,p,v,m,y,g,E,D,b;return(0,V.Jh)(this,function(w){switch(w.label){case 0:return t=null,r=null,n=null,i=0,o=[],a=["-z","--porcelain=v2","--branch","--show-stash","--untracked-files=all"],[4,e("git status ".concat(a.join(" ")),{serviceMethod:"git-status"})];case 1:if((l=w.sent()).error)return[2,l];u=et(l.output.replaceAll(tz,"$1	$2"),"\x00"),c=!0,s=!1,f=void 0;try{for(d=u[Symbol.iterator]();!(c=(h=d.next()).done);c=!0)(p=h.value).startsWith("#")?p.startsWith(tF)?(v=p.substring(tF.length),"(initial)"!==v&&(t=v)):p.startsWith(tk)?(m=p.substring(tk.length),"(detached)"!==m&&(r=m)):p.startsWith(tP)?(y=p.substring(tP.length),"(not queried)"!==y&&(n={branch:y,ahead:0,behind:0})):p.startsWith(tL)?n&&(E=(g=(0,Q._)(p.substring(tL.length).split(" ").map(function(e){return Math.abs(parseInt(e,10))}),2))[0],D=g[1],n.ahead=E,n.behind=D):p.startsWith(tG)&&(i=parseInt(p.substring(tG.length),10)):(b=function(e){var t=e[0];switch(e=e.substring(2),t){case"!":default:return null;case"?":return{type:{index:T.UNTRACKED,worktree:T.UNTRACKED},path:e,staged:!1,unmerged:!1};case"u":var r=e.match(tB);if(!r)return null;var n=(0,Q._)(r,12),i=n[1],o=n[2],a=n[11],l=tV(i),u=tV(o),c=l!==T.UNMODIFIED;return{type:{index:l,worktree:u},path:a,staged:c,unmerged:!0};case"1":case"2":var s=e.match(tH);if(!s)return null;var f=(0,Q._)(s,10),d=f[1],h=f[2],p=f[9],v=tV(d),m=tV(h),y=v!==T.UNMODIFIED;if("1"===t)return{type:{index:v,worktree:m},path:p,staged:y,unmerged:!1};if("2"===t){var g=p.match(tU);if(!g)return null;var E=(0,Q._)(g,5),D=E[1],b=E[2],w=E[3],_=E[4];return{type:{index:v,worktree:m},path:w,staged:y,unmerged:!1,source:{type:function(e){switch(e){case"R":default:return T.RENAMED;case"C":return T.COPIED}}(D),score:parseInt(b,10),path:_}}}return null}}(p),null!==b&&o.push(b))}catch(e){s=!0,f=e}finally{try{c||null==d.return||d.return()}finally{if(s)throw f}}return[2,{commit:t,branch:r,upstream:n,stashes:i,changes:o,error:null}]}})})).apply(this,arguments)}function tV(e){switch(e){case".":default:return T.UNMODIFIED;case"M":return T.MODIFIED;case"T":return T.TYPE_CHANGED;case"A":return T.ADDED;case"D":return T.DELETED;case"R":return T.RENAMED;case"C":return T.COPIED;case"U":return T.UNMERGED}}function tX(e){return tK.apply(this,arguments)}function tK(){return(tK=(0,j._)(function(e){var t,r,n,i,o,a,l,u,c,s=arguments;return(0,V.Jh)(this,function(f){switch(f.label){case 0:return t=s.length>1&&void 0!==s[1]?s[1]:{},[4,tj(e)];case 1:if((r=f.sent()).error)return[2,r];if(!r.branch)return[2,{error:x.HEAD_DETACHED}];if(!r.upstream&&!t.experimental_override_remote||(i=(n=(0,Q._)(t.experimental_override_remote?[t.experimental_override_remote.name,t.experimental_override_remote.branch]:ei(r.upstream.branch),2))[0],o=n[1],!i||!o))return[2,{error:x.UPSTREAM_NOT_SET}];if(r.changes.length>0)return[2,{error:x.DIRTY_WORKTREE}];if("FF_ONLY"===(l=null!==(a=t.mode)&&void 0!==a?a:"FF_ONLY")&&r.upstream&&r.upstream.ahead>0)return[2,{error:x.MERGE_CONFLICT}];switch("FF_ONLY"!==l&&r.upstream&&0===r.upstream.ahead&&(l="FF_ONLY"),u=["--quiet","--no-edit"],l){case"FF_ONLY":u.push("--no-rebase","--ff-only");break;case"MERGE":u.push("--no-rebase","--ff");break;case"REBASE":u.push("--rebase")}return u.push(er(i),er(o)),[4,e("git pull ".concat(u.join(" ")),{serviceMethod:"git-pull"})];case 2:if((c=f.sent()).error!==x.MERGE_CONFLICT)return[3,8];if(t.allowConflicts)return[2,{hasConflicts:!0,error:null}];switch(l){case"MERGE":return[3,3];case"REBASE":return[3,5]}return[3,7];case 3:return[4,e("git merge --abort",{serviceMethod:"git-pull"})];case 4:case 6:return f.sent(),[3,7];case 5:return[4,e("git rebase --abort",{serviceMethod:"git-pull"})];case 7:return[2,c];case 8:if(c.error)return[2,c];return[2,{hasConflicts:!1,error:null}]}})})).apply(this,arguments)}function t$(e){return tY.apply(this,arguments)}function tY(){return(tY=(0,j._)(function(e){var t,r,n,i,o,a,l,u,c,s,f,d=arguments;return(0,V.Jh)(this,function(h){switch(h.label){case 0:return t=d.length>1&&void 0!==d[1]?d[1]:{},[4,tj(e)];case 1:if((r=h.sent()).error)return[2,r];if(!r.branch)return[2,{error:x.HEAD_DETACHED}];if(n=null,i=null,t.publish){if(r.upstream)return[2,{error:x.BRANCH_ALREADY_EXISTS}];n=t.publish.remote,i=null!==(o=t.publish.name)&&void 0!==o?o:r.branch,n=en(n),i=en(i)}else{if(!r.upstream)return[2,{error:x.UPSTREAM_NOT_SET}];if(!t.force&&r.upstream.behind>0)return[2,{error:x.PUSH_REJECTED}];n=(a=(0,Q._)(ei(r.upstream.branch),2))[0],i=a[1]}if(!n||!i)return[2,{error:x.UPSTREAM_NOT_SET}];if(t.force)return[3,3];return[4,eY(e,{remote:n})];case 2:if((l=h.sent()).error)return[2,l];h.label=3;case 3:if(!t.publish)return[3,5];return[4,eH(e,"refs/remotes/".concat(n,"/").concat(i))];case 4:if((u=h.sent()).error)return[2,u];if(u.exists&&u.ref.type===y.REMOTE_BRANCH)return[2,{error:x.BRANCH_ALREADY_EXISTS}];h.label=5;case 5:return c=["--quiet"],t.force&&!t.publish&&c.push("--force-with-lease"),t.publish&&c.push("--set-upstream"),s="refs/heads/".concat(r.branch,":refs/heads/").concat(i),c.push(er(n),er(s)),[4,e("git push ".concat(c.join(" ")),{serviceMethod:"git-push"})];case 6:if((f=h.sent()).error)return[2,f];return[2,{error:null}]}})})).apply(this,arguments)}function tJ(e,t){return tq.apply(this,arguments)}function tq(){return(tq=(0,j._)(function(e,t){var r;return(0,V.Jh)(this,function(n){switch(n.label){case 0:if(!ef(t=eo(t)))return[2,{error:x.INVALID_REFERENCE}];return[4,e("git remote rm ".concat(er(t)),{serviceMethod:"git-remove-remote"})];case 1:if((r=n.sent()).error)return[2,r];return[2,{error:null}]}})})).apply(this,arguments)}function tQ(e,t,r){return t0.apply(this,arguments)}function t0(){return(t0=(0,j._)(function(e,t,r){var n,i,o,a,l,u,c,s,f,d,h,p,v,m,y;return(0,V.Jh)(this,function(g){switch(g.label){case 0:if("string"==typeof t){if(""===t)return[2,{error:null}];t=[t]}if(!0!==t&&0===t.length)return[2,{error:null}];if(!(void 0!==r))return[3,2];return n=["--quiet","--no-overlay","--worktree","--source=".concat(r),!0===t?".":"-- ".concat(t.join(" "))],[4,e("git --literal-pathspecs restore ".concat(n.join(" ")),{serviceMethod:"git-restore-files"})];case 1:if((i=g.sent()).error)return[2,i];return[2,{error:null}];case 2:return[4,tj(e)];case 3:if((o=g.sent()).error)return[2,o];a=[],l=[],u=!0,c=!1,s=void 0;try{for(f=o.changes[Symbol.iterator]();!(u=(d=f.next()).done);u=!0)if(h=d.value,!0===t||t.includes(h.path))switch(h.type.worktree){case T.UNMODIFIED:continue;case T.UNTRACKED:a.push(er(h.path));break;default:l.push(er(h.path))}}catch(e){c=!0,s=e}finally{try{u||null==f.return||f.return()}finally{if(c)throw s}}if(0===a.length&&0===l.length&&void 0===r)return[2,{error:null}];return p=[],a.length&&(v=["--quiet","--force","--",a.join(" ")],p.push("git --literal-pathspecs clean ".concat(v.join(" ")))),l.length&&(m=["--quiet","--no-overlay","--worktree","-- ".concat(l.join(" "))],p.push("git --literal-pathspecs restore ".concat(m.join(" ")))),[4,e(p,{serviceMethod:"git-restore-files"})];case 4:if((y=g.sent()).error)return[2,y];return[2,{error:null}]}})})).apply(this,arguments)}function t1(e,t){return t2.apply(this,arguments)}function t2(){return(t2=(0,j._)(function(e,t){var r,n,i;return(0,V.Jh)(this,function(o){switch(o.label){case 0:if(r=t.remote,n=t.url,!ef(r=eo(r))||!ed(n))return[2,{error:x.INVALID_REFERENCE}];return r=er(r),n=er(n),[4,e("git remote set-url ".concat(r," ").concat(n),{serviceMethod:"git-set-remote-url"})];case 1:if((i=o.sent()).error)return[2,i];return[2,{error:null}]}})})).apply(this,arguments)}function t5(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.session,r=e.askpass,n=e.author,i=e.committer,o={GIT_AUTHOR_NAME:"",GIT_AUTHOR_EMAIL:"",GIT_COMMITTER_NAME:"",GIT_COMMITTER_EMAIL:"",GIT_ASKPASS:"replit-git-askpass",GIT_PAGER:"",GIT_EDITOR:"",PAGER:"",EDITOR:""};if(void 0!==t&&(o.REPLIT_SESSION=t),void 0!==r&&(o.GIT_ASKPASS=r),n){o.GIT_AUTHOR_NAME=n.username,o.GIT_COMMITTER_NAME=n.username;var a=t4(n);o.GIT_AUTHOR_EMAIL=a,o.GIT_COMMITTER_EMAIL=a,i&&(o.GIT_COMMITTER_NAME=i.username,o.GIT_COMMITTER_EMAIL=t4(i))}return o}function t4(e){if("id"in e)return"".concat(e.id,"-").concat(e.username,"@users.noreply.replit.com");if("email"in e)return e.email;throw Error("Invalid user")}(v=I||(I={})).ORDINARY="1",v.RENAMED_OR_COPIED="2",v.UNMERGED="u",v.UNTRACKED="?",v.IGNORED="!",(m=A||(A={})).FF_ONLY="FF_ONLY",m.MERGE="MERGE",m.REBASE="REBASE"},79125:function(e,t,r){r.d(t,{Z6:function(){return D},$n:function(){return p}});var n,i=r(66626),o=/(?:\\[0-7]{1,3})+/g,a=/\\([0-7]{1,3})/g,l=/\\([0btvfrn])/g;function u(e){return e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1).replaceAll("\\\\","").replaceAll('\\"','"').replace(o,function(e){null!=n||(n=new TextDecoder);var t=Uint8Array.from(Array.from(e.matchAll(a)),function(e){return parseInt(e[1],8)});return n.decode(t)}).replace(l,function(e,t){switch(t){case"0":return"\x00";case"b":return"\b";case"t":return"	";case"v":return"\v";case"f":return"\f";case"r":return"\r";case"n":return"\n";default:throw Error("unexpected match")}}).replaceAll("","\\"):e}function c(e,t){var r=e.startsWith("a/"),n=t.startsWith("b/");return e=r&&(n||"/dev/null"===t)?e.slice(2):e,t=n&&(r||"/dev/null"===e)?t.slice(2):t,[e,t]}var s=/^(---|\+\+\+)[ \t](.+?)([ \t]\d+-\d+-\d+[ \t]\d+:\d+:\d+(?:\.\d+)?[ \t](?:-|\+)\d+)?$/,f=/^@@[ \t]+-(\d+)(?:,(\d+))?[ \t]\+(\d+)(?:,(\d+))?[ \t]@@(?:[ \t](.*))?$/,d=/^([ +-])(.*)$/,h=/^(?=@@)/m;function p(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.split(/\r?\n/),o=n[0],a=n[1];if(!o||!a)throw Error("Invalid diff: missing header");var l=s.exec(o),p=s.exec(a);if(!l||!p)throw Error("Invalid diff: failed to parse header");if(l[1]===p[1])throw Error("Invalid diff: both headers are for the same side");var v=null,m=null;if("---"===l[1]?v=l[2]:"+++"===l[1]&&(m=l[2]),"---"===p[1]?v=p[2]:"+++"===p[1]&&(m=p[2]),null===v||null===m)throw Error("Invalid diff: missing file labels");r.git&&(v=u(v),m=u(m),v=(t=(0,i._)(c(v,m),2))[0],m=t[1],v="/dev/null"===v?null:v,m="/dev/null"===m?null:m);var y=n.slice(2).join("\n").split(h);return 1===y.length&&""===y[0]?{labelA:v,labelB:m,hunks:[]}:{labelA:v,labelB:m,hunks:y.map(function(e){var t=e.split("\n").filter(function(e){return"\\ No newline at end of file"!==e});if(t.length&&!t[t.length-1]&&t.pop(),!t.length)throw Error("Invalid diff: empty hunk");var r=f.exec(t[0]);if(!r)throw Error("Invalid diff: failed to parse hunk header");var n=parseInt(r[1],10),i=n+(r[2]?parseInt(r[2],10):1)-1,o=parseInt(r[3],10),a=o+(r[4]?parseInt(r[4],10):1)-1,l=r[5]||null,u=n,c=o;return{fromA:n,toA:i,fromB:o,toB:a,heading:l,lines:t.slice(1).map(function(e){var t,r,n,i=d.exec(e);if(!i)throw Error("Invalid diff: failed to parse hunk line");var o=i[2];switch(i[1]){case" ":t="same",r=u,n=c,u++,c++;break;case"+":t="added",r=null,n=c,c++;break;case"-":t="removed",r=u,n=null,u++;break;default:throw Error("Invalid diff: unknown hunk line type")}return{type:t,content:o,numberA:r,numberB:n}})}})}}var v={"old mode":/^old mode[ \t](\d{6})$/,"new mode":/^new mode[ \t](\d{6})$/,"deleted file mode":/^deleted file mode[ \t](\d{6})$/,"new file mode":/^new file mode[ \t](\d{6})$/,"copy from":/^copy from[ \t](.+)$/,"copy to":/^copy to[ \t](.+)$/,"rename from":/^rename from[ \t](.+)$/,"rename to":/^rename to[ \t](.+)$/,"similarity index":/^similarity index[ \t](\d+)%$/,"dissimilarity index":/^dissimilarity index[ \t](\d+)%$/,index:/^index (.+?)\.\.(.+?)(?:[ \t]([0-7]{6}))?$/},m=/^diff --git (.*?)[ \t](.*?)$/,y=/^(?=diff --git)/gm;function g(e){for(var t in v){var r=v[t],n=e.match(r);if(n)switch(t){case"old mode":case"new mode":case"deleted file mode":case"new file mode":return{type:t,mode:n[1]};case"copy from":case"copy to":case"rename from":case"rename to":return{type:t,path:u(n[1])};case"similarity index":case"dissimilarity index":return{type:t,index:parseInt(n[1],10)};case"index":return{type:t,hashA:n[1],hashB:n[2],mode:n[3]?n[3]:null}}}throw Error("invalid diff: failed to parse header line")}function E(e){var t=e.split(/\r?\n/);if(!t[0]||!m.test(t[0]))throw Error("invalid diff: failed to parse header");var r=t.findIndex(function(e){return e.startsWith("---")});if(-1===r){var n,o=t[0].match(m);if(!o)throw Error("invalid diff: failed to parse header");var a=o[1],l=o[2];a=u(a),l=u(l),a=(n=(0,i._)(c(a,l),2))[0],l=n[1],a="/dev/null"===a?null:a,l="/dev/null"===l?null:l;for(var s=[],f=1;f<t.length;f++)t[f].trim()&&s.push(g(t[f]));return{pathA:a,pathB:l,headers:s,hunks:[]}}for(var d=[],h=1;h<r;h++)d.push(g(t[h]));var v=p(t.slice(r).join("\n"),{git:!0});return{pathA:v.labelA,pathB:v.labelB,headers:d,hunks:v.hunks}}function D(e){var t=e.split(y);return t.length&&!t[0].startsWith("diff --git")&&t.shift(),t.map(function(e){return e.endsWith("\n")?e.slice(0,-1):e}).map(E)}var b=r(74044),w=b.Dy.Union([b.Dy.Object({type:b.Dy.Literal("added"),content:b.Dy.String(),numberA:b.Dy.Null(),numberB:b.Dy.Number()},{title:"HunkLineAdded"}),b.Dy.Object({type:b.Dy.Literal("removed"),content:b.Dy.String(),numberA:b.Dy.Number(),numberB:b.Dy.Null()},{title:"HunkLineRemoved"}),b.Dy.Object({type:b.Dy.Literal("same"),content:b.Dy.String(),numberA:b.Dy.Integer(),numberB:b.Dy.Integer()},{title:"HunkLineSame"})],{title:"HunkLine"}),_=b.Dy.Object({fromA:b.Dy.Integer(),toA:b.Dy.Integer(),fromB:b.Dy.Integer(),toB:b.Dy.Integer(),heading:b.Dy.Union([b.Dy.String(),b.Dy.Null()]),lines:b.Dy.Array(w)},{title:"Hunk"});b.Dy.Object({labelA:b.Dy.Union([b.Dy.String(),b.Dy.Null()]),labelB:b.Dy.Union([b.Dy.String(),b.Dy.Null()]),hunks:b.Dy.Array(_)},{title:"UnifiedDiff"});var R=b.Dy.Union([b.Dy.Object({type:b.Dy.Literal("old mode"),mode:b.Dy.String()},{title:"GitDiffHeaderLineOldMode"}),b.Dy.Object({type:b.Dy.Literal("new mode"),mode:b.Dy.String()},{title:"GitDiffHeaderLineNewMode"}),b.Dy.Object({type:b.Dy.Literal("deleted file mode"),mode:b.Dy.String()},{title:"GitDiffHeaderLineDeletedFileMode"}),b.Dy.Object({type:b.Dy.Literal("new file mode"),mode:b.Dy.String()},{title:"GitDiffHeaderLineNewFileMode"}),b.Dy.Object({type:b.Dy.Literal("copy from"),path:b.Dy.String()},{title:"GitDiffHeaderLineCopyFrom"}),b.Dy.Object({type:b.Dy.Literal("copy to"),path:b.Dy.String()},{title:"GitDiffHeaderLineCopyTo"}),b.Dy.Object({type:b.Dy.Literal("rename from"),path:b.Dy.String()},{title:"GitDiffHeaderLineRenameFrom"}),b.Dy.Object({type:b.Dy.Literal("rename to"),path:b.Dy.String()},{title:"GitDiffHeaderLineRenameTo"}),b.Dy.Object({type:b.Dy.Literal("similarity index"),index:b.Dy.Integer()},{title:"GitDiffHeaderLineSimilarityIndex"}),b.Dy.Object({type:b.Dy.Literal("dissimilarity index"),index:b.Dy.Integer()},{title:"GitDiffHeaderLineDissimilarityIndex"}),b.Dy.Object({type:b.Dy.Literal("index"),hashA:b.Dy.String(),hashB:b.Dy.String(),mode:b.Dy.Union([b.Dy.String(),b.Dy.Null()])},{title:"GitDiffHeaderLineIndex"})],{title:"GitDiffHeaderLine"});b.Dy.Object({pathA:b.Dy.Union([b.Dy.String(),b.Dy.Null()]),pathB:b.Dy.Union([b.Dy.String(),b.Dy.Null()]),headers:b.Dy.Array(R),hunks:b.Dy.Array(_)},{title:"GitDiff"})},45250:function(e,t,r){r.d(t,{Z:function(){return v},l:function(){return p}});var n=r(27387),i=r(63257),o=r(96583),a=r(96082),l=r(58997),u=r(73878),c=r(72106),s=r(17437),f=r(95636),d=r(45228),h=r(92756),p=".replit";function v(e){var t,r,v,m,y=e.container,g=e.fs,E=e.ctx,D=(0,a.ZP)();D.setMaxListeners(50);var b=null,w=null,_=null;function R(){return T.apply(this,arguments)}function T(){return(T=(0,n._)(function(){return(0,o.Jh)(this,function(e){return b&&"open"===b.status?[2,b]:[2,new Promise(function(e){D.once(l.zW.CHANNEL_OPENED,function(t){e(t)})})]})})).apply(this,arguments)}(function(){I.apply(this,arguments)})(),y.openChannel({service:"dotreplit"},function(e){var t=e.channel;return b=t,D.emit(l.zW.CHANNEL_OPENED,t),function(){b=null}});var x=!1;function I(){return(I=(0,n._)(function(){return(0,o.Jh)(this,function(e){return g.watchDir(c.Ql,{onChange:function(e){if(!e.some(function(e){return e.filename===p&&e.type===u.Tv.File})){(null==w?void 0:w.error)!==l.Yt.NotFound&&(w={error:l.Yt.NotFound,errorMessage:"",config:null},D.emit(l.zW.CHANGE,w));return}x||(x=!0,g.watchFile(p,{onChange:function(){w=null,S.getConfig({bypassCache:!0}).then(function(e){D.emit(l.zW.CHANGE,e)})},onMoveOrDelete:function(){x=!1},onError:function(e,t){w=null,x=!1,e.code||y.unrecoverableError(e,t)}}))},onError:function(e,t){y.unrecoverableError(e,t)}}),[2]})})).apply(this,arguments)}function A(){return(A=(0,n._)(function(){return(0,o.Jh)(this,function(e){switch(e.label){case 0:return w=null,_||(_=function(){return C.apply(this,arguments)}()),[4,_];case 1:return w=e.sent(),_=null,[2,w]}})})).apply(this,arguments)}function C(){return(C=(0,n._)(function(){return(0,o.Jh)(this,function(e){var t;return[2,(0,f.DW)(E,"dotreplit.getConfigFromServer",(t=(0,n._)(function(e,t){var r,n,i,a;return(0,o.Jh)(this,function(o){switch(o.label){case 0:var u,c,s;return null==t||t.setAttributes((u={},(null==(c=y.getConnectionMetadata())?void 0:c.token)&&(u.tokenCluster=(0,d.h)(c.token).cluster),s=!!window.performance.getEntriesByName(h.Iy.pageNavStart,"mark").length,u.ssr=s,u)),[4,R()];case 1:if("closed"===(n=o.sent()).status)return[2,{error:l.Yt.Disconnected,errorMessage:"channel closed",config:null}];return[4,n.request({dotReplitGetRequest:{},traceInfo:e?(0,f.Rg)(e):void 0})];case 2:if((i=o.sent()).channelClosed)return[2,{error:l.Yt.Disconnected,errorMessage:"channel closed",config:null}];if(i.error){if(i.error.includes("unable to decode"))return[2,{error:l.Yt.ParseError,errorMessage:i.error,config:null}];if(i.error.includes("no such file"))return[2,{error:l.Yt.NotFound,errorMessage:i.error,config:null}];return[2,{error:l.Yt.Unknown,errorMessage:i.error,config:null}]}if(!(a=null===(r=i.dotReplitGetResponse)||void 0===r?void 0:r.dotReplit))return y.unrecoverableError(Error("Dotreplit responded with no error and no config")),[2,{error:l.Yt.Unknown,errorMessage:"Expected dotReplitGetResponse to include dotReplit",config:null}];return[2,{error:null,errorMessage:null,config:a}]}})}),function(e,r){return t.apply(this,arguments)}))]})})).apply(this,arguments)}var N=(t=(0,n._)(function(e){var t;return(0,o.Jh)(this,function(r){switch(r.label){case 0:return[4,g.stat(p)];case 1:if(r.sent().exists)return[3,3];return[4,g.writeFile(p,"")];case 2:r.sent(),r.label=3;case 3:return[4,R()];case 4:return[4,r.sent().request({dotReplitUpdateRequest:{ops:e}})];case 5:if((t=r.sent()).channelClosed)return[2,{errorMessage:"Channel closed.",error:l.au.ChannelClosed,response:null}];if(t.error){if(t.error.includes("could not parse json")||t.error.includes("is not json")||t.error.includes("parsing value field")||t.error.includes("missing field"))return[2,{errorMessage:t.error,error:l.au.JSONParseError,response:null}];if(t.error.includes("could not read file"))return[2,{errorMessage:t.error,error:l.au.NotFound,response:null}];if(t.error.includes("could not parse toml"))return[2,{errorMessage:t.error,error:l.au.TOMLParseError,response:null}];if(t.error.includes("unknown variant"))return[2,{errorMessage:t.error,error:l.au.OpType,response:null}];if(t.error.includes("could not write to file"))return[2,{errorMessage:t.error,error:l.au.CouldNotWrite,response:null}];if(t.error.includes("could not read line"))return[2,{errorMessage:t.error,error:l.au.ReadLine,response:null}];return[2,{errorMessage:t.error,error:l.au.Unknown,response:null}]}if(!t.dotReplitUpdateResponse)throw Error("Expected .replit to be updated");return[2,{response:t.dotReplitUpdateResponse,error:null,errorMessage:null}]}})}),function(e){return t.apply(this,arguments)}),S={watch:function(e){var t=!1,r=!1,n=function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];r=!0,e.apply(void 0,(0,i._)(n))};return D.on(l.zW.CHANGE,n),S.getConfig().then(function(e){t||r||n(e)}),function(){t=!0,D.removeListener(l.zW.CHANGE,n)}},getConfig:function(e){return(0,n._)(function(){return(0,o.Jh)(this,function(t){return(null==e?void 0:e.bypassCache)||!w?[2,function(){return A.apply(this,arguments)}()]:[2,w]})})()},getRunConfig:function(){return(0,n._)(function(){var e,t;return(0,o.Jh)(this,function(r){switch(r.label){case 0:return[4,R()];case 1:return[4,r.sent().request({runConfigGetRequest:{}})];case 2:if((e=r.sent()).channelClosed)return[2,this.getRunConfig()];if(!e.runConfigGetResponse)throw null!==(t=e.error)&&void 0!==t?t:Error("expected run config");return[2,e.runConfigGetResponse]}})}).apply(this)},updateDotReplit:(r=[],v=400,m=(0,s.Z)((0,n._)(function(){var e;return(0,o.Jh)(this,function(t){switch(t.label){case 0:return[4,N(r)];case 1:return e=t.sent(),r=[],[2,e]}})}),{wait:v}),function(e,t){t&&(v=t);var n=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done);n=!0)!function(){var e=a.value,t=r.findIndex(function(t){return t.path===e.path});-1!==t?r[t]=e:r.push(e)}()}catch(e){i=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return m()})};return S}},58997:function(e,t,r){var n,i,o,a,l,u;r.d(t,{Yt:function(){return n},au:function(){return i},zW:function(){return o}}),(a=n||(n={})).NotFound="NOT_FOUND",a.ParseError="PARSE_ERROR",a.Disconnected="DISCONNECTED",a.Unknown="UNKOWN_ERROR",(l=i||(i={})).ChannelClosed="CHANNEL_CLOSED",l.JSONParseError="JSON_PARSE_ERROR",l.NotFound="NOT_FOUND",l.TOMLParseError="TOML_PARSE_ERROR",l.OpType="OP_TYPE",l.CouldNotWrite="COULD_NOT_WRITE",l.ReadLine="COULD_NOT_READ_LINE",l.Unknown="UNKNOWN_ERROR",(u=o||(o={})).CHANGE="CHANGE",u.CHANNEL_OPENED="CHANNEL_OPENED"}}]);
//# sourceMappingURL=75-987112bc93092a8c.js.map