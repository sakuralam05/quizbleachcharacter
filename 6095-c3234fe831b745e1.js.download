!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="a0db7cbb-45f7-416a-a76b-a35d028817bb",e._sentryDebugIdIdentifier="sentry-dbid-a0db7cbb-45f7-416a-a76b-a35d028817bb")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"b071f675"};"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6095],{29017:function(e,t,n){n.d(t,{I:function(){return c},N:function(){return s}});var r=n(3030),o=n(42305),i=n(96949),l=n(6038),a=(0,n(48941).cn)(!1),c=new o.j(function(e){var t=e.analyticsSurface,n=e.shouldTrack,o=e.onPaste;return r.tk.domEventHandlers({paste:function(){n&&(0,i.j)(i.U3.TEXT_PASTED,{surface:t}),null==o||o()}})});function s(e){var t=e.analyticsSurface,n=(0,l.Hg)(a),r=(0,l.$X)(a);return c.use({analyticsSurface:t,shouldTrack:!n,onPaste:function(){return r(!0)}})}},6069:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(3796),o=n(53250),i=n(75271);function l(e){var t=e.json,n=(0,i.useMemo)(function(){return JSON.stringify(t,null,2)},[t]);return(0,r.tZ)(o.Z,{language:"json",code:n})}},10182:function(e,t,n){n.d(t,{h:function(){return T}});var r=n(42516),o=n(66626),i=n(3796),l=n(93245),a=n(63163),c=n(75271),s=n(36809),u=n(41086),d=n(95281),f=n(22192),h=n(59140),p=n(24766),v=n(14548),m=n(30231),g=n(62466),b=n(90831),Z=n(52657),y=n(86763),x=n.n(y),C=n(86466),w=(0,f.$)(["scrollToBottomTransform","opacity","overflowX","overflowY","flexDirection","buttonPx","buttonTop","buttonLeft","buttonBottom","buttonBorderRadius","buttonHeight","buttonWidth","buttonRight","scrollBehavior","scrollSnapType","padding","scrollBarDisplay"]),S=w.cssVars,_=w.styleTokens,E=(0,s.X)({root:[a.l0.position.relative,a.l0.flex.growAndShrink(1)],scroll:[a.l0.flex.growAndShrink(1),{padding:_.padding,overflowY:_.overflowY,overflowX:_.overflowX,flexDirection:_.flexDirection,scrollBehavior:_.scrollBehavior,scrollSnapType:_.scrollSnapType,"&::-webkit-scrollbar":{display:_.scrollBarDisplay}}],button:[a.l0.reset.button,C.gU.filledAndOutlined,a.l0.position.absolute,a.l0.align.center,a.l0.rowWithGap(4),a.l0.shadow(1),a.l0.justify.center,{paddingRight:_.buttonPx,paddingLeft:_.buttonPx,top:_.buttonTop,bottom:_.buttonBottom,right:_.buttonRight,left:_.buttonLeft,borderRadius:_.buttonBorderRadius,height:_.buttonHeight,width:_.buttonWidth,opacity:"var(".concat(S.opacity,", 0)"),transform:_.scrollToBottomTransform,transitionProperty:"transform, opacity",transitionDuration:"300ms",transitionTimingFunction:"cubic-bezier(.4,1.60,.70,.8)"}]});function T(e){var t,n,a,s,f,y,C,w,_,T,k,A,R,I,G=e.children,D=e.shouldAutoScrollRef,B=e.scrollCache,P=e.scrollCacheKey,X=e.isHorizontal,L=e.padding,N=e.hideScrollbar,M=(n=(t={shouldAutoScrollRef:D,scrollCache:B,scrollCacheKey:P,isHorizontal:X}).shouldAutoScrollRef,a=t.scrollCache,s=t.scrollCacheKey,f=t.isHorizontal,y=(0,o._)((0,c.useState)(function(){return new u.vU(!1)}),1)[0],w=(C=(0,o._)((0,c.useState)(null),2))[0],_=C[1],k=(T=(0,o._)((0,c.useState)(null),2))[0],A=T[1],(0,c.useEffect)(function(){if(w&&k){var e=x()(function(e){y.set(e)},400),t=(0,g.j)(w,function(){return e(!1),function(){e(!0)}},{root:k,rootMargin:"100px"});return function(){t(),e.cancel()}}},[y,w,k]),R=(0,Z.Z)(a),(0,c.useEffect)(function(){if(w&&k){var e=R.current,t=e.get(s);return t?k.scrollTo(f?t:0,f?0:t):(0,b.Z)(w,{behavior:"instant"}),function(){e.set(s,k.scrollTop)}}},[w,k,R,s,f]),(0,c.useEffect)(function(){if(k&&w){var e=new MutationObserver(function(){n.current&&(0,b.Z)(w,{behavior:"smooth"})});return e.observe(k,{characterData:!0,childList:!0,subtree:!0}),function(){e.disconnect()}}},[k,w,n]),(0,c.useEffect)(function(){if(k){var e=!1,t=x()(function(){if(k){var t=k.scrollTop,r=k.clientHeight,o=k.scrollHeight,i=k.scrollWidth,l=k.clientWidth,a=k.scrollLeft;e=(f?i-(a+l):o-(t+r))<24,n.current=e}},100);return k.addEventListener("scroll",t),k.addEventListener("wheel",r),k.addEventListener("pointerdown",o),k.addEventListener("pointerup",i),function(){t.cancel(),k.removeEventListener("scroll",t),k.removeEventListener("wheel",r),k.removeEventListener("pointerdown",o),k.removeEventListener("pointerup",i)}}function r(t){if(t.deltaY<0){n.current=!1;return}e||(n.current=!1)}function o(){e||(n.current=!1)}function i(){e&&(n.current=!0)}},[k,n,f]),{showButton:y,anchorRef:_,scrollRef:A,scrollEl:k,scrollToLatest:function(){w&&(0,b.Z)(w)}}),O=M.showButton,U=M.anchorRef,q=M.scrollRef,V=M.scrollToLatest,H=(0,c.useRef)(null);return(0,d.j)(H,O,function(e){var t;return t={},(0,r._)(t,S.scrollToBottomTransform,X?"translate(".concat(e?0:16,"px, -50%) scaleX(").concat(e?1:.25,")"):"translate(-50%, ".concat(e?0:16,"px) scaleX(").concat(e?1:.25,")")),(0,r._)(t,S.opacity,e?"1":"0"),t}),(0,i.BX)(l.G,{css:E.root,style:(I={},(0,r._)(I,S.flexDirection,X?"row":"column"),(0,r._)(I,S.overflowY,X?"hidden":"auto"),(0,r._)(I,S.overflowX,X?"auto":"hidden"),(0,r._)(I,S.buttonBottom,X?"auto":"8px"),(0,r._)(I,S.buttonLeft,X?"auto":"50%"),(0,r._)(I,S.buttonRight,X?"4px":"auto"),(0,r._)(I,S.buttonTop,X?"50%":"auto"),(0,r._)(I,S.buttonHeight,X?"44px":"28px"),(0,r._)(I,S.buttonWidth,X?"44px":"auto"),(0,r._)(I,S.buttonBorderRadius,X?"44px":"16px"),(0,r._)(I,S.buttonPx,X?"12px":"6px"),(0,r._)(I,S.scrollBehavior,X?"smooth":"auto"),(0,r._)(I,S.scrollSnapType,X?"x mandatory":"none"),(0,r._)(I,S.padding,null!=L?L:"0"),(0,r._)(I,S.scrollBarDisplay,N?"none":"auto"),I),children:[(0,i.BX)(l.G,{css:E.scroll,innerRef:q,children:[G,(0,i.tZ)(l.G,{innerRef:U})]}),(0,i.tZ)(v.Tg,{innerRef:H,css:E.button,elevated:!0,tag:"button",onClick:V,children:X?(0,i.tZ)(m.Z,{size:24}):(0,i.BX)(i.HY,{children:[(0,i.tZ)(h.Z,{size:12}),(0,i.tZ)(p.xv,{variant:"small",children:"Scroll to latest"})]})})]})}},24936:function(e,t,n){n.d(t,{UL:function(){return i},cE:function(){return r},f5:function(){return o}});var r="Tools",o=600,i="CommandBar"},85451:function(e,t,n){n.d(t,{X:function(){return ec}});var r=n(42516),o=n(41733),i=n(3796),l=n(31252),a=n(75271),c=n(52657),s=n(37862),u=n(83059),d=n(95281),f=n(86466),h=n(35820),p=n(22893),v=n(93245),m=n(36809),g=n(10578),b=n(63163),Z=n(12e3),y=n(33323),x=n(77558),C=(0,m.X)({root:[b.l0.reset.button,b.l0.viewStyle,b.l0.flex.row,b.l0.align.center,b.l0.borderRadius(0),b.l0.cursor.pointer,b.l0.color.foregroundDimmer,{gap:(0,x.fP)(4),paddingLeft:(0,x.fP)(4),paddingRight:(0,x.fP)(4),"&:hover":{color:b.TV.foregroundDefault}}],icon:[b.l0.position.relative,(0,x.D$)(16),{width:(0,x.fP)(16),height:(0,x.fP)(16)}],iconRight:[(0,x.D$)(12),{width:(0,x.fP)(12),height:(0,x.fP)(12)}],text:[b.l0.truncate,b.l0.flex.shrink(1),{fontSize:"1em"}]}),w=(0,a.memo)(function(){var e=(0,Z.hp)(),t=e.breadcrumbs,n=e.iconOnly,r=e.onClick;return t.length?(0,i.tZ)(i.HY,{children:t.map(function(e,t){if(!e.data||!("label"in e.data))return null;var o=e.data,l=o.label,a=o.icon;return(0,i.BX)("button",{css:C.root,onClick:function(){return r(e)},children:[(0,i.tZ)(v.G,{css:C.icon,children:a}),n?null:(0,i.tZ)(v.G,{css:C.text,children:l}),(0,i.tZ)(v.G,{css:C.iconRight,children:(0,i.tZ)(y.Z,{})})]},l+t)})}):null}),S=n(62279),_=n(7935),E=(0,S.iv)([b.l0.reset.button,b.l0.viewStyle,b.l0.center,b.l0.height("100%"),b.l0.cursor.pointer,b.l0.color.foregroundDimmest,{paddingLeft:(0,x.fP)(4),paddingRight:(0,x.fP)(4),"&:hover":{color:b.TV.foregroundDefault}},(0,x.D$)(16)]);function T(e){return(0,i.tZ)("button",{css:E,onClick:e.onClick,title:e.isLoading?"Loading":"Clear",children:e.isLoading?(0,i.tZ)(g.Z,{}):(0,i.tZ)(_.Z,{})})}var k=n(30509),A=n(54455),R=n(379),I=n(14548),G=n(4573),D=n(42401),B=n(24936),P=n(6519),X=n(1869),L=function(e){return Math.round(e.value/14*e.fontSize)},N=[b.l0.position.absolute,b.l0.top(0),b.l0.left(0),b.l0.width("100%")],M=(0,m.X)({item:[N,(0,r._)({userSelect:"none",cursor:"pointer","> div":{borderRadius:"4px",marginRight:4,marginLeft:4},"&:hover > div":{backgroundColor:f.vb.interactiveBackground}},b.nC.min(B.f5,B.UL),{"> div":{borderRadius:"4px"}})]}),O=(0,a.memo)((0,a.forwardRef)(function(e,t){var n=(0,D.v)(),r=(0,Z.O$)(),l=(0,Z.c1)(e.index),c=l.row,s=l.active,u=l.onClick,d=l.ariaAttrs;if(!c)return null;var f={height:r?void 0:e.height,transform:"translateY(".concat(e.y,"px)")};if("section"===c.type)return(0,i.tZ)(W,{path:c.path,style:f,border:e.index>0});var h=c.item,p=h.data,m=h.match;if("group"===p.type)return null;var g=m.render;if(g&&"content"in g&&g.content)return(0,i.BX)(v.G,(0,k._)((0,o._)({innerRef:t,css:M.item,style:f,onClick:u,"data-index":e.index},d),{children:[(0,i.tZ)(I.Tg,{elevated:s,children:(0,a.cloneElement)(g.content,{active:s})}),n?(0,i.tZ)(j,{score:m.score}):null]}));var b=p.label,y=p.icon,x=p.dataCy,C=g&&"ranges"in g?g.ranges:void 0;return(0,i.BX)(v.G,(0,k._)((0,o._)({innerRef:t,css:M.item,style:f,onClick:u,dataCy:x,"data-index":e.index},d),{children:[(0,i.tZ)(V,{active:s,icon:y,text:b,highlight:C,description:p.description,shortcut:p.keyboardShortcut,hasChildren:"context"===h.data.type}),n?(0,i.tZ)(j,{score:m.score}):null]}))}));O.displayName="Row";var U=[{padding:(0,x.fP)(8)}],q=(0,m.X)({root:[U,b.l0.align.center,b.l0.flex.row,b.l0.height("100%"),{gap:(0,x.fP)(8),userSelect:"none"}],iconText:[b.l0.align.center,b.l0.flex.row,b.l0.maxWidth("100%"),{gap:(0,x.fP)(8)}],description:[b.l0.truncate,b.l0.flex.growAndShrink(1),{fontSize:"0.9em"}],right:[b.l0.flex.row,b.l0.align.center,{gap:(0,x.fP)(4),justifySelf:"end",marginLeft:"auto"}],chevron:(0,x.D$)(12)});function V(e){var t=(0,X.Hg)(Z.FF);return(0,i.BX)(I.Tg,{elevated:e.active,css:q.root,children:[(0,i.BX)(v.G,{css:q.iconText,children:[(0,i.tZ)(v.G,{className:"icon",css:H.root,children:e.icon}),(0,i.tZ)(G.x,{dimmed:!e.active,text:e.text,highlight:e.highlight})]}),e.description?(0,i.tZ)(v.G,{css:q.description,style:{color:e.active?b.TV.foregroundDimmer:b.TV.foregroundDimmest},children:e.description}):null,(0,i.BX)(v.G,{css:q.right,children:[e.shortcut?(0,i.tZ)(l.bM,{keyCombo:e.shortcut,fontSize:Math.round(.85*t)}):null,e.hasChildren?(0,i.tZ)(v.G,{css:q.chevron,children:(0,i.tZ)(y.Z,{size:12,style:{pointerEvents:"none"}})}):null]})]})}var H=(0,m.X)({root:[b.l0.position.relative,(0,x.D$)(16),{width:(0,x.fP)(16),height:(0,x.fP)(16)}]}),F=(0,m.X)({borderHeaderWrap:[N,b.l0.flex.column,{userSelect:"none",padding:[4,0,0,0].map(x.fP).join(" "),gap:(0,x.fP)(10)}],borderWrap:[{userSelect:"none"},N,b.l0.justify.center],headerWrap:[{userSelect:"none",paddingRight:(0,x.fP)(8),paddingBottom:(0,x.fP)(4)},N,b.l0.justify.end],header:[{userSelect:"none"},b.l0.align.center,b.l0.flex.row,b.l0.px(12),{gap:(0,x.fP)(4)},(0,x.D$)(12)],text:[{userSelect:"none"},b.l0.flex.shrink(1),b.l0.color.foregroundDimmest,b.l0.truncate,{fontSize:"0.9em"}],border:[b.l0.height(1),b.l0.width("100%")]}),W=(0,a.memo)(function(e){var t=(0,Z.hG)(),n=(0,P.n)(e.path,t),r=(0,i.tZ)(I.Tg,{elevated:!0,css:F.border});if(0===n.length)return e.border?(0,i.tZ)(v.G,{css:F.borderWrap,style:e.style,children:r}):null;var o=(0,i.tZ)(v.G,{css:F.header,children:n.map(function(e,t){return(0,i.BX)(a.Fragment,{children:[t>0?(0,i.tZ)(y.Z,{color:b.TV.foregroundDimmest}):null,(0,i.tZ)(v.G,{css:F.text,children:e})]},e+t)})});return e.border?(0,i.BX)(v.G,{css:F.borderHeaderWrap,style:e.style,children:[r,o]}):(0,i.tZ)(v.G,{css:F.headerWrap,style:e.style,children:o})}),z={pill:[b.l0.position.absolute,b.l0.top("50%"),b.l0.right(4),{transform:"translateY(-50%)"}]};function j(e){var t=e.score;return(0,i.tZ)(R.D,{text:"".concat(t),colorway:"red",css:z.pill})}var Y=n(8701),$=(0,m.X)({root:[b.l0.flex.growAndShrink(1),b.l0.overflow("hidden"),{paddingTop:x.Cn.menuPaddingTop}],scrollParent:[b.l0.height("100%"),b.l0.overflowY("auto"),b.l0.flex.growAndShrink(1)]}),K=(0,a.memo)(function(e){var t,n=(0,Z.H9)(),r=n.rows,l=n.isOpen,c=n.scrollRef,s=n.currentPathIndex,u=n.ariaAttrs,d=(0,X.$X)(Z.sk),f=(0,X.Hg)(Z.FF),h=(0,X.Hg)(Z.LW),p=(0,Z.O$)(),m=(0,A.MG)({count:r.length,overscan:null!==(t=e.overscan)&&void 0!==t?t:1,getScrollElement:function(){return c.current},getItemKey:function(e){var t=r[e];return t?"section"===t.type?t.key:(0,Y.N)(t.item.path):""},estimateSize:function(t){var n=r[t];return n?function(e){var t,n=e.row,r=e.currentPathIndex,o=e.compact,i=e.isFirst,l=e.fontSize,a=e.minItemHeight;if("section"===n.type){var c=(0,P.n)(n.path,r).length?20:0;if(i){var s=o?c+L({fontSize:l,value:10}):c;return 0===c?s:L({fontSize:l,value:c})}return c+L({fontSize:l,value:16})}var u=n.item.match.render;return u&&"content"in u?Math.max(L({fontSize:l,value:null!==(t=u.height)&&void 0!==t?t:32}),a):Math.max(L({fontSize:l,value:32}),a)}({fontSize:f,row:n,currentPathIndex:s,compact:h,isFirst:0===t,minItemHeight:e.minItemHeight}):0},onChange:function(e){d(e.getTotalSize())}}),g={borderRadius:e.hasFooter?void 0:b.TV.space8,display:l?void 0:"none"},y=m.scrollToIndex,x=m.getVirtualItems,C=(0,Z.ib)();return(0,a.useEffect)(function(){var e=C;!(e<0)&&(1===e&&(e=0),x()[e]&&y(e,{behavior:"smooth"}))},[y,x,C]),(0,i.tZ)(v.G,(0,k._)((0,o._)({css:$.root},u),{style:g,children:(0,i.tZ)(v.G,{innerRef:c,css:$.scrollParent,children:(0,i.tZ)(v.G,{style:{height:"".concat(m.getTotalSize(),"px"),position:"relative",overflow:"hidden"},children:l?m.getVirtualItems().map(function(e){return(0,i.tZ)(O,{index:e.index,y:e.start,height:e.size,ref:p?m.measureElement:void 0},e.key)}):null})})}))}),J=(0,m.X)({root:[b.l0.flex.growAndShrink(1),b.l0.width("100%"),b.l0.height("100%"),b.l0.flex.row,b.l0.justify.center,b.l0.borderRadius(4),{containerName:B.UL,containerType:x.Cn.containerType}],content:[b.l0.pb(4),b.l0.flex.growAndShrink(1),b.l0.maxWidth("calc(".concat(B.f5,"px - ").concat(b.TV.space16,")")),{fontSize:x.Cn.fontSize}],footer:{paddingTop:(0,x.fP)(8)},keyComboBlocks:{paddingRight:(0,x.fP)(8)},menuWrap:[b.l0.flex.shrink(1)],row:[b.l0.position.absolute,b.l0.top(0),b.l0.left(0),b.l0.width("100%")],menu:[b.l0.flex.shrink(1),b.l0.overflow("auto")],running:[b.l0.center,b.l0.flex.growAndShrink(1)],error:{padding:(0,x.fP)(8)}}),Q=(0,m.X)({root:[b.l0.viewStyle,b.l0.flex.growAndShrink(1),b.l0.height("100%"),{fontSize:"1em",padding:"0 ".concat((0,x.fP)(8)),backgroundColor:"transparent",border:"0 none",outline:"0 none","::placeholder":{color:b.TV.foregroundDimmest},"&:hover::placeholder":{color:b.TV.foregroundDimmer},"&:focus::placeholder, &:hover:focus::placeholder":{color:b.TV.foregroundDimmest}}]}),ee=(0,a.memo)(function(e){var t=(0,Z.Gl)();return(0,i.tZ)("input",(0,o._)({autoFocus:e.autoFocus,onKeyDown:e.onKeyDown,css:Q.root,placeholder:t.placeholder,value:t.value,onChange:t.onChange,ref:t.ref,onBlur:t.onBlur,disabled:t.disabled,autoCorrect:"off",autoComplete:"off",autoCapitalize:"off"},t.ariaAttrs))}),et=[f.gU.filled,b.l0.viewStyle,b.l0.flex.row,b.l0.align.center,b.l0.flex.growAndShrink(1),{height:(0,x.fP)(32),borderRadius:(0,x.fP)(4)}],en=(0,m.X)({container:[b.l0.pb(0),(0,r._)({paddingTop:x.Cn.inputBarPadding,paddingInline:x.Cn.inputBarPadding,"& > div > button + input":{paddingLeft:0}},b.nC.min(B.f5,B.UL),{paddingInline:"0px"})],surface:et,surfaceRunning:[et,h.p.foregroundPulse()]}),er=[b.l0.flex.row,b.l0.align.center,b.l0.flex.growAndShrink(1),b.l0.mx(8),b.l0.my(8),{border:"1px solid ".concat(f.vb.interactiveBorder),backgroundColor:f.vb.interactiveBackground,height:b.TV.space32,borderRadius:b.TV.space4,":hover":{border:"1px solid ".concat(f.vb.interactiveBorderHover)}}],eo=(0,m.X)({container:[{"& > div > button + input":{paddingLeft:0}},b.l0.pb(0)],surface:er,surfaceRunning:[er,h.p.foregroundPulse()],border:[b.l0.height(1),{display:x.Cn.minimalInputBarBorderDisplay}]});function ei(e){var t=(0,Z.U6)(),n=(0,Z.mU)(),o=(0,X.$X)(Z.M0),l=(0,s.Z)(function(e){return o(e.height)}),c=(0,X.Hg)(Z.LI),u=(0,X.Hg)(Z.LW),f=c?eo:en,h=(0,a.useRef)(null);(0,d.j)(h,n,function(e){var t;return t={},(0,r._)(t,x.Dq.borderBottomRightRadius,e?(0,x.fP)(8):"0"),(0,r._)(t,x.Dq.borderBottomLeftRadius,e?(0,x.fP)(8):"0"),t});var p=(0,a.useRef)(null);return(0,d.j)(p,n,function(e){return(0,r._)({},x.Dq.minimalInputBarBorderDisplay,e?"none":"inherit")}),(0,i.tZ)(i.HY,{children:(0,i.tZ)(v.G,{css:f.container,innerRef:l,style:(0,r._)({},x.Dq.inputBarPadding,u?"0px":(0,x.fP)(8)),children:(0,i.tZ)(v.G,{innerRef:h,css:t?f.surfaceRunning:f.surface,children:e.children})})})}var el=(0,a.memo)(function(e){var t=(0,Z.CM)(),n=(0,Z.nR)();return t?(0,i.tZ)(T,{onClick:e.onClick,isLoading:n}):null}),ea=(0,a.memo)(function(){var e,t,n,o,d=(0,Z.jj)(),f=d.isOpen,h=d.focus,m=d.clearCommands,y=d.isClearable,C=d.onKeyDown,S=d.inputValue,_=d.noResults,E=d.hasHighlightedItem,T=d.isRunning,k=d.actionError,A=(0,c.Z)({inputValue:S,noResults:_,hasHighlightedItem:E});e=(0,X.XD)(Z.Uk),t=(0,X.Hg)(Z.M0),n=(0,X.yL)(Z.Cl),(0,a.useEffect)(function(){var r=function(t){var n=e().onTotalHeightChange;n&&(0===o&&(o=t),n({initial:o,current:t}))};if(0!==t){var o=0;return r(n.current),n.subscribe(r)}},[t,e,n]);var R=(0,X.Hg)(Z.EQ),I=(0,X.Hg)(Z._A),G=(0,X.Hg)(Z.ux),D=(0,X.Hg)(Z.Bw),B=(0,X.Hg)(Z.l1),P=(0,X.Hg)(Z.vx),L=(0,X.XD)(Z.Uk),N=(0,u.Z)(function(){return function(e){var t,n=A.current,r=L();if(null===(t=r.onKeyDown)||void 0===t||t.call(r,e,{inputValue:n.inputValue,noResults:n.noResults,hasHighlightedItem:n.hasHighlightedItem}),!e.defaultPrevented){if("Enter"===e.key&&n.inputValue&&n.noResults&&r.onSubmit){r.onSubmit(n.inputValue);return}C(e)}}},[A,C,L]);(0,a.useEffect)(function(){B&&(B.current=h)},[h,B]);var M=(0,Z.YE)(),O=(0,X.$X)(Z.Tj),U=(0,s.Z)(function(e){return O(e.height)}),q=(0,X.Hg)(Z.FF),V=(0,X.Hg)(Z.LW),H=(0,X.Hg)(Z.LI);return(0,i.tZ)(v.G,{css:J.root,style:(o={},(0,r._)(o,x.Dq.fontSize,q+"px"),(0,r._)(o,x.Dq.menuPaddingTop,H?"0px":(0,x.fP)(8)),(0,r._)(o,x.Dq.containerType,V?"normal":"inline-size"),o),children:(0,i.BX)(v.G,{css:J.content,children:[(0,i.tZ)("label",{id:M.label,htmlFor:M.input,css:b.l0.visuallyHidden,children:"Commands"}),(0,i.BX)(ei,{children:[(0,i.tZ)(w,{}),(0,i.tZ)(ee,{autoFocus:R,onKeyDown:N}),(0,i.tZ)(el,{onClick:function(){return m({focus:!0})}}),I&&!y?(0,i.tZ)(v.G,{css:J.keyComboBlocks,children:(0,i.tZ)(l.bM,{keyCombo:I,fontSize:.85*q})}):null]}),k?(0,i.tZ)(v.G,{css:J.error,children:(0,i.tZ)(p.E,{colorway:"warning",text:k})}):null,f&&!T?(0,i.BX)(i.HY,{children:[(0,i.tZ)(K,{minItemHeight:P,overscan:G,hasFooter:!!D}),D?(0,i.tZ)(v.G,{innerRef:U,css:J.footer,children:D}):null]}):null,T?(0,i.tZ)(v.G,{css:J.running,children:(0,i.tZ)(g.Z,{size:24})}):null]})})});function ec(e){var t=(0,Z.ns)(e);return(0,i.tZ)(X.xf.Provider,{value:t,children:(0,i.tZ)(ea,{})})}},8701:function(e,t,n){n.d(t,{N:function(){return r}});function r(e){return e.map(function(e){return"group"===e.data.type?e.data.key:e.data.key||e.data.label}).join(":")}},6519:function(e,t,n){n.d(t,{V:function(){return l},n:function(){return a}});var r=n(66626),o=n(63257),i=n(8701);function l(e){var t=new Map;e.forEach(function(e){var n=e.path.slice(0,-1),r="section:"+(0,i.N)(n),o=t.get(r);if(o)o.items.push(e);else{var l=n[n.length-1],a=(null==l?void 0:l.data.type)==="group";t.set(r,{type:"section",path:n,score:e.match.score,items:[e],unlabeled:a,key:r})}});var n=(0,o._)(t.entries()).sort(function(e,t){var n=(0,r._)(e,2),o=(n[0],n[1]),i=(0,r._)(t,2);return(i[0],i[1]).score-o.score}),l={items:[],rows:[]},a=0;return n.forEach(function(e){var t=(0,r._)(e,2),n=t[0],o=t[1];l.rows.push({type:o.type,key:n,path:o.path,unlabeled:o.unlabeled}),o.items.forEach(function(e){l.items.push(e),l.rows.push({type:"item",item:e,index:a++})})}),l}function a(e,t){var n=[],r=!0,i=!1,l=void 0;try{for(var a,c=e.slice(t)[Symbol.iterator]();!(r=(a=c.next()).done);r=!0){var s=a.value;"group"!==s.data.type&&n.push(s.data.label)}}catch(e){i=!0,l=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw l}}return(0,o._)(new Set(n))}},12e3:function(e,t,n){n.d(t,{EQ:function(){return G},LW:function(){return M},Uk:function(){return R},l1:function(){return L},FF:function(){return N},Bw:function(){return X},Tj:function(){return C},M0:function(){return y},_A:function(){return D},vx:function(){return U},LI:function(){return O},ux:function(){return P},sk:function(){return x},Cl:function(){return w},hp:function(){return ew},jj:function(){return eL},hG:function(){return ev},YE:function(){return K},ib:function(){return er},ns:function(){return eN},Gl:function(){return eD},CM:function(){return eg},nR:function(){return eh},U6:function(){return k},H9:function(){return eG},mU:function(){return Y},c1:function(){return eZ},O$:function(){return V}});var r,o=n(27387),i=n(41733),l=n(66626),a=n(96583),c=n(41974),s=n(48941),u=n(78054),d=n(75271),f=n(52657),h=n(83059),p=n(31089),v=n(63257);function m(e,t){for(var n=e.indexPath,r=t.indexPath,o=Math.min(n.length,r.length),i=0;i<o;i++){if(n[i]>r[i])return 1;if(n[i]<r[i])return -1}return n.length-r.length}var g=n(6519),b=n(1869),Z=function(e){return"item-"+e},y=(0,s.cn)(0),x=(0,s.cn)(0),C=(0,s.cn)(0),w=(0,s.cn)(function(e){return e(y)+e(x)+e(C)}),S=(0,s.cn)({path:[],rows:[],items:[],placeholder:"",isLoading:!1}),_=(0,s.cn)(!0);function E(){return(0,b.Hg)(_)}var T=(0,s.cn)(!1);function k(){return(0,b.Hg)(T)}var A=(0,s.cn)(null),R=(0,s.cn)({}),I=(0,u.kv)(R,function(e){return!!e.openOnInput}),G=(0,u.kv)(R,function(e){return!!e.autoFocus}),D=(0,u.kv)(R,function(e){return e.keyboardShortcut}),B=(0,u.kv)(R,function(e){return e.command}),P=(0,u.kv)(R,function(e){return e.overscan}),X=(0,u.kv)(R,function(e){return e.footer}),L=(0,u.kv)(R,function(e){return e.focusRef}),N=(0,u.kv)(R,function(e){var t;return null!==(t=e.fontSize)&&void 0!==t?t:14}),M=(0,u.kv)(R,function(e){return!!e.compact}),O=(0,u.kv)(R,function(e){return!!e.minimalInputBar}),U=(0,u.kv)(R,function(e){var t;return null!==(t=e.minItemHeight)&&void 0!==t?t:35}),q=(0,u.kv)(R,function(e){var t;return null!==(t=e.showToolDescriptions)&&void 0!==t&&t});function V(){return(0,b.Hg)(q)}var H=(0,s.cn)(function(e){return!e(I)}),F=(0,u.kv)(R,function(e){return!!e.iconBreadcrumbs}),W=(0,s.cn)(null),z=(0,s.cn)(function(e){return e(et)>-1}),j=(0,s.cn)(function(e){var t=e(S);return!t.isLoading&&0===t.rows.length});function Y(){return(0,b.yL)(j)}var $=(0,s.cn)({label:"",input:"",menu:""});function K(){return(0,b.Hg)($)}var J=(0,s.cn)(""),Q=(0,s.cn)(""),ee=(0,s.cn)(""),et=(0,s.cn)(-1),en=(0,s.cn)(function(e){var t=e(et);return e(eo).findIndex(function(e){return"item"===e.type&&e.index===t})});function er(){return(0,b.Hg)(en)}var eo=(0,s.cn)(function(e){return e(S).rows}),ei=(0,s.cn)(function(e){return e(S).items}),el=(0,s.cn)(function(e){return e(ei).length}),ea=(0,s.cn)(function(e){return e(ey).filter(function(e){return"context"===e.data.type&&!!e.match})}),ec=(0,s.cn)(function(e){return e(ea).length>0}),es=(0,s.cn)(!1),eu=(0,s.cn)(null,function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t(es,!0);var o=e(R).command,i=Array.isArray(o)?[o[0]]:[o];t(S,function(e){return(0,c.Uy)(e,function(e){e.path=i})}),e(eP).setPath(e(ey)),t(et,-1),t(J,""),t(Q,""),t(ee,""),e(I)&&t(_,!1),r.focus&&(null===(n=e(eA))||void 0===n||n.focus())}),ed=(0,s.cn)(function(e){return e(S).placeholder}),ef=(0,s.cn)(function(e){return e(S).isLoading});function eh(){return(0,b.Hg)(ef)}var ep=(0,s.cn)(function(e){return e(S).path.length});function ev(){return(0,b.Hg)(ep)}var em=(0,s.cn)(function(e){return e(ec)||!!e(J)});function eg(){return(0,b.Hg)(em)}var eb=(0,s.cn)(null,(r=(0,o._)(function(e,t,n,r){var o,i,l,c,s,u;function d(n){var r;t(eE,null!=n?n:"Something went wrong"),null===(r=e(eA))||void 0===r||r.focus()}return(0,a.Jh)(this,function(a){switch(a.label){case 0:if("group"===n.data.type)return[2];if(t(W,n),i=e(R),"context"===n.data.type)return t(ek,c=n.path),t(et,-1),e(eP).setPath(c),null===(l=e(eA))||void 0===l||l.focus(),[2];switch(n.data.type){case"output":case"error":return t(eu),null===(s=i.onSelect)||void 0===s||s.call(i,n),[2]}t(T,!0),u=null,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,Promise.resolve(n.data.run(r.nativeEvent))];case 2:return u=a.sent(),[3,4];case 3:return a.sent(),t(T,!1),d(),[2];case 4:if(t(T,!1),(null==u?void 0:u.type)==="error")return d(u.message),[2];return t(eu),null===(o=i.onAction)||void 0===o||o.call(i),[2]}})}),function(e,t,n,o){return r.apply(this,arguments)}));function eZ(e){var t=(0,b.$X)(eb),n=(0,d.useMemo)(function(){return(0,u.kv)(eo,function(t){return t[e]})},[e]),r=(0,b.Hg)(n),o="item"===r.type?r.index:null,i=(0,d.useMemo)(function(){return(0,s.cn)(function(e){return null!==o&&e(et)===o})},[o]),l=(0,b.Hg)(i),a=(null==r?void 0:r.type)==="item"?function(e){return t(r.item,e)}:void 0,c="item"===r.type?{id:Z(e),role:"option","aria-selected":l}:void 0;return{row:r,active:l,onClick:a,ariaAttrs:c}}var ey=(0,s.cn)(function(e){return e(S).path}),ex=(0,s.cn)(function(e){return 1===e(ey).length}),eC=(0,s.cn)(null,function(e,t,n){var r=e(ey),o=r.indexOf(n);-1!==o&&(r=r.slice(0,o+1),t(et,0),e(eP).setPath(r),t(J,""))});function ew(){return{iconOnly:(0,b.Hg)(F),breadcrumbs:(0,b.Hg)(ea),onClick:(0,b.$X)(eC)}}function eS(e,t){return t.match.score-e.match.score}var e_=(0,s.cn)(null,function(e,t,n){if(e(ee)===e(ee)){var r,o=n.items.sort(eS),i=n.path.length?n.path[n.path.length-1]:null,l=(0,g.V)(o),a=l.items,c=l.rows,s=null!==(r=null==i?void 0:i.data)&&void 0!==r?r:null,u=null==s?void 0:s.description;e(F)&&(null==s?void 0:s.type)!=="group"&&(u=null==s?void 0:s.label),t(S,function(e){return{items:a,rows:c,isLoading:!!n.partial,path:n.path,placeholder:u||e.placeholder}}),c.length&&-1===e(et)&&t(et,0)}}),eE=(0,s.cn)(null,function(e,t,n){t(A,n),t(S,function(e){return{items:[],rows:[],isLoading:!1,path:e.path,placeholder:e.placeholder}})}),eT=(0,s.cn)(null,function(e,t,n){t(J,n),t(et,n?0:-1),t(A,null),t(S,function(e){return(0,c.Uy)(e,function(e){e.isLoading=!!n})}),e(I)&&t(_,!!n)}),ek=(0,s.cn)(null,function(e,t,n){t(S,function(e){return(0,c.Uy)(e,function(e){e.items=[],e.rows=[],e.path=n})}),t(eT,""),t(Q,""),t(ee,"")}),eA=(0,s.cn)(null),eR=(0,s.cn)(null,function(e,t,n){var r=e(et);if(!(r<0)){var o=e(ei)[r];o&&t(eb,o,n)}}),eI=(0,s.cn)(null,function(e,t,n){var r=e(_),o=e(el),i=e(et);switch(n.key){case"ArrowDown":n.preventDefault();var l=i+1;t(et,l<o?l:0),t(_,!0);return;case"ArrowUp":n.preventDefault(),t(et,Math.max(-1,i-1));return;case"Home":n.preventDefault(),n.shiftKey?n.currentTarget.selectionStart=0:n.currentTarget.setSelectionRange(0,0);return;case"End":n.preventDefault();var a=n.currentTarget.value.length;n.shiftKey?n.currentTarget.selectionEnd=a:n.currentTarget.setSelectionRange(a,a);return;case"Escape":if(!e(J)||(n.preventDefault(),t(eT,""),t(Q,""),e(H)))return;t(_,!1);return;case"Enter":if(!r)return;n.preventDefault(),t(eR,n);return;case"PageUp":case"PageDown":if(!r)return;n.preventDefault();var c="PageUp"===n.key?-10:10;t(et,function(e){return Math.max(Math.min(e+c,o-1),0)});return}});function eG(){var e=(0,b.Hg)(eo),t=E(),n=(0,d.useRef)(null),r=ev(),o=(0,b.Hg)($);return{rows:e,isOpen:t,scrollRef:n,currentPathIndex:r,ariaAttrs:{id:o.menu,"aria-labelledby":o.label,role:"listbox"}}}function eD(){var e,t,n,r,o=(0,b.$X)(eA),i=(0,b.Hg)(ed),a=(0,l._)((e=(0,b.Hg)(J),t=(0,b.$X)(eT),n=(0,b.$X)(Q),r=(0,l._)((0,d.useTransition)(),2)[1],[e,(0,d.useCallback)(function(e){var o="string"==typeof e?e:e.currentTarget.value;t(o),r(function(){return n(o)})},[t,r,n])]),2),c=a[0],s=a[1],u=(0,b.$X)(et),f=(0,b.Hg)(et),h=(0,b.Hg)($),p=E();return{onBlur:function(){return u(-1)},onChange:s,placeholder:i,value:c,ref:o,disabled:k(),ariaAttrs:{id:h.input,role:"combobox",autoComplete:"off","aria-autocomplete":"list","aria-activedescendant":f>-1?Z(f):"","aria-controls":h.menu,"aria-expanded":p,"aria-labelledby":h.label}}}var eB=(0,s.cn)(null,function(e,t,n){var r=Array.isArray(n)?n:[n];e(es)&&(r=[r[0]]);var o=e(Q);t(ee,o),e(eP).setPath(r,o)}),eP=(0,s.cn)({}),eX=(0,s.cn)(null,function(e,t){var n=e(ey),r=e(ea);if(r.pop()){var o=r.pop();if(!o){t(eu);return}var i=n.indexOf(o);n=n.slice(0,i+1),t(et,0),t(ek,n),e(eP).setPath(n)}});function eL(){var e,t,n,r,o,i,l,a=E(),c=(0,b.Hg)(em),s=(0,b.Hg)(J),u=(0,b.Hg)(j),p=k(),v=(0,b.Hg)(A),m=(0,b.$X)(eI),g=(0,b.Hg)(z),Z=(0,b.$X)(eu),y=(0,b.XD)(eA);e=(0,b.Hg)(eP),t=(0,b.Hg)(B),n=(0,b.yL)(ex),r=(0,b.yL)(Q),o=(0,b.$X)(ee),i=(0,b.$X)(eB),l=(0,f.Z)(t),(0,d.useEffect)(function(){n.current&&i(t)},[e,n,t,r,i]),(0,d.useEffect)(function(){return n.subscribe(function(e){e&&i(l.current)})},[e,r,n,i,l]),(0,d.useEffect)(function(){var t=function(t){o(t),e.search(t)};return t(r.current),r.subscribe(t)},[e,r,n,o,l]);var x=(0,h.Z)(function(){return function(){var e;return null===(e=y())||void 0===e?void 0:e.focus()}},[y]),C=(0,b.$X)(eX);return{focus:x,onKeyDown:(0,h.Z)(function(){return function(e){if("Backspace"===e.key&&!e.currentTarget.value){C();return}return m(e)}},[m,C]),inputValue:s,isOpen:a,isClearable:c,noResults:u,hasHighlightedItem:g,isRunning:p,actionError:v,clearCommands:Z}}function eN(e){var t=(0,p.U)(),n={label:t("label"),input:t("input"),menu:t("menu")},r=(0,l._)((0,d.useState)(function(){var t,r,o=(0,s.MT)();o.set($,n),o.set(R,e),o.set(_,!e.openOnInput),o.set(eP,function(e){var t=e.initialPath,n=e.partialUpdateTimeout,r=e.onUpdate,o=t,i=null,l=0;function a(e){i&&clearTimeout(i);var t=++l,a=0,c=[],s=o[o.length-1];if(!s.commands){r({items:c,path:o});return}void 0!==n&&(i=setTimeout(function(){c.length&&r({items:(0,v._)(c).sort(m),partial:!0,path:o})},n)),function n(s,u,d){if(a++,!s.commands)throw Error("Expected commands");var f=(0,v._)(u).concat([s]),h=f.length===o.length;Promise.resolve(s.commands({active:h,searchQuery:e,path:f})).then(function(s){if(t!==l){i&&clearTimeout(i);return}a--,s.forEach(function(t,r){var o=(0,v._)(f).concat([t]),i=(0,v._)(d).concat([r]),l=t.match?t.match({searchQuery:e,data:t.data,path:o,active:h}):null;l&&c.push({path:o,data:t.data,match:l,indexPath:i}),t.commands&&n(t,f,i)}),a>0||(i&&clearTimeout(i),r({items:(0,v._)(c).sort(m),path:o}))})}(s,o.slice(0,o.length-1),[])}return{search:a,setPath:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";o=e,a(t)},getPath:function(){return o}}}({initialPath:Array.isArray(e.command)?e.command:[e.command],partialUpdateTimeout:100,onUpdate:function(e){return o.set(e_,(0,i._)({},e))}}));var l=Array.isArray(e.command)?e.command[0]:e.command,a=null!==(r=null==l?void 0:null===(t=l.data)||void 0===t?void 0:t.description)&&void 0!==r?r:null;return a&&o.set(S,function(e){return(0,c.Uy)(e,function(e){e.placeholder=a})}),o}),1)[0];return(0,d.useEffect)(function(){r.set(R,e)},[r,e]),r}},1869:function(e,t,n){n.d(t,{$X:function(){return d},Hg:function(){return s},XD:function(){return u},xf:function(){return a},yL:function(){return f}});var r=n(3702),o=n(36309),i=n(85604),l=n(75271),a=(0,l.createContext)(void 0);function c(){var e=(0,l.useContext)(a);if(!e)throw Error("Expected store in context");return e}function s(e){var t=c();return(0,o.Dv)(e,{store:t})}function u(e){return(0,i.lV)((0,l.useCallback)(function(t){return t(e)},[e]),{store:c()})}var d=function(e){var t=c();return(0,o.b9)(e,{store:t})};function f(e){return(0,r.b)(e,c())}},77558:function(e,t,n){n.d(t,{Cn:function(){return i},D$:function(){return c},Dq:function(){return o},fP:function(){return a}});var r=(0,n(22192).$)(["fontSize","menuPaddingTop","borderBottomLeftRadius","borderBottomRightRadius","minimalInputBarBorderDisplay","inputBarPadding","containerType"]),o=r.cssVars,i=r.styleTokens,l=function(e){return Math.round(100*e)/100},a=function(e){return l(e/14)+"em"},c=function(e){var t=l(e/14)+"em";return{"&& svg":{minWidth:t,minHeight:t,width:t,height:t}}}},13213:function(e,t,n){n.d(t,{L:function(){return r},r:function(){return o}});var r={findOrCreateFile:3,searchFileContents:2,fork:.5,createNewRepl:.5,askAi:.7,codeSearch:.5,myRepls:.5,settings:.5},o={files:.98,settings:.9,toolDescription:.8,askAi:.7,codeSearch:.5,fileContentsSearch:.4}},28670:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(41733),o=n(30509),i=n(3796),l=n(6065),a=n(22419),c=n(93245),s=n(63163),u=(0,n(36809).X)({default:[],withOnClick:[s.l0.cursor.pointer,{transition:"all 0.2s ease","&:hover":{filter:"brightness(95%)",boxShadow:s.TV.shadow1}}]});function d(e){var t=e.user,n=e.onClick,s=e.size,d=void 0===s?24:s;return(0,i.tZ)(a.u,{placement:"bottom",tooltip:n?"Observe ".concat(t.username):t.username,children:function(e,a){return(0,i.tZ)(c.G,(0,o._)((0,r._)({},e),{innerRef:a,onClick:n,children:(0,i.tZ)(l.q,{size:d,src:t.image||null,username:t.username,ringColor:t.color,css:n?u.withOnClick:u.default})}))}})}},76399:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(3796);n(22893),n(93245),n(24766);var o=n(36809),i=n(63163),l=n(40713);function a(){return(0,l.Zb)(),(0,r.tZ)(r.HY,{children:null})}(0,o.X)({devEnvNotice:[i.l0.borderRadius(0)]})},15185:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(42965),o=/iPad|iPhone|iPod/,i=/MacIntel/;function l(){var e=(0,r.sG)(),t=!!o.test(navigator.platform)||!!(navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&i.test(navigator.platform));return e||t}},90831:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(34495);function o(e,t,n){n&&r.Z(e,t),t&&"object"==typeof t?(t.skipOverflowHiddenElements=!0,r.Z(e,t)):r.Z(e,{skipOverflowHiddenElements:!0})}},57785:function(e,t,n){n.d(t,{Z:function(){return r}});function r(e,t){var n=t.existing,r=t.getKey,o=new Map,i=!0,l=!1,a=void 0;try{for(var c,s=e[Symbol.iterator]();!(i=(c=s.next()).done);i=!0){var u=c.value;o.set(r(u),u)}}catch(e){l=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(l)throw a}}var d=new Set,f=[],h=!0,p=!1,v=void 0;try{for(var m,g=n[Symbol.iterator]();!(h=(m=g.next()).done);h=!0){var b=m.value,Z=r(b),y=o.get(Z);y&&(f.push(y),d.add(Z))}}catch(e){p=!0,v=e}finally{try{h||null==g.return||g.return()}finally{if(p)throw v}}var x=!0,C=!1,w=void 0;try{for(var S,_=e[Symbol.iterator]();!(x=(S=_.next()).done);x=!0){var E=S.value;d.has(r(E))||f.push(E)}}catch(e){C=!0,w=e}finally{try{x||null==_.return||_.return()}finally{if(C)throw w}}return f}},40703:function(e,t,n){n.d(t,{C:function(){return c}});var r=n(66626),o=n(63257),i=n(37475),l=n(727),a=n(75271);function c(e,t){var n,c,s=(0,i.r9)(),u=(0,l.G)(),d=null!==(c=null==s?void 0:s.client)&&void 0!==c?c:null,f=(0,a.useRef)(null),h=(n=(0,r._)((0,a.useState)(),2)[1],(0,a.useCallback)(function(e){try{n(function(){throw e})}catch(e){}},[]));(0,a.useEffect)(function(){if(f.current&&(f.current.abort(),f.current=null),d&&u){var t=new AbortController;f.current=t;var n=t.signal,r=[];n.addEventListener("abort",function(){var e=[],t=!0,n=!1,o=void 0;try{for(var i,l=r[Symbol.iterator]();!(t=(i=l.next()).done);t=!0){var a=i.value;try{a()}catch(t){e.push(t)}}}catch(e){n=!0,o=e}finally{try{t||null==l.return||l.return()}finally{if(n)throw o}}e.length&&(1===e.length?h(e[0]):"undefined"!=typeof AggregateError?h(AggregateError(e,"Multiple errors occurred during cleanup")):h(Error("Multiple errors occurred during cleanup")))});var o=function(e){if(n.aborted)try{e()}catch(e){h(e)}else r.push(e)};try{Promise.resolve(e(d,{session:u,signal:n,addCleanup:o})).then(function(e){e&&o(e)}).catch(function(e){t.abort(),h(e)})}catch(e){throw t.abort(),e}return function(){t.abort()}}},[d,u,h].concat((0,o._)(t)))}},67827:function(e,t,n){n.d(t,{U:function(){return a}});var r=n(63257),o=n(37475),i=n(727),l=n(75271);function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=(0,o.r9)(),a=(0,i.G)();return(0,l.useMemo)(function(){return n&&a?e(n.client,a):null},[n,a].concat((0,r._)(t)))}},727:function(e,t,n){n.d(t,{G:function(){return c}});var r=n(66626),o=n(37475),i=n(75558),l=n(75271),a=n(30967);function c(){var e=(0,o.r9)(),t=(0,r._)((0,l.useState)(null),2),n=t[0],c=t[1];return(0,l.useEffect)(function(){var t=function(e){"connect"===e.status?c({id:e.session.id,from:e.session.from,to:e.session.to}):(0,a.flushSync)(function(){c(null)})};if(e){var n=e.transport.sessions.get(i.o_);return n&&t({status:"connect",session:n}),e.transport.addEventListener("sessionStatus",t),function(){c(null),e.transport.removeEventListener("sessionStatus",t)}}},[e]),n}},86280:function(e,t,n){n.d(t,{Zo:function(){return T},av:function(){return C},xV:function(){return _}});var r=n(41733),o=n(30509),i=n(98924),l=n(66626),a=n(3796),c=n(75271),s=n(36809),u=n(63163),d=n(98817),f=n(93245),h=n(17857),p=n(86466),v=n(24766),m=n(67703),g=n(40299),b=n(68333),Z=n(48087),y=n(14548),x=function(){var e=(0,l._)((0,c.useState)(!1),2),t=e[0],n=e[1],r=(0,l._)((0,c.useState)({x:0,y:0}),2);return{clicked:t,setClicked:n,points:r[0],setPoints:r[1]}},C=function(){var e=x(),t=e.clicked,n=e.setClicked,i=e.points,l=e.setPoints;(0,c.useEffect)(function(){var e=function(){return n(!1)};return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}},[n]);var a=(0,c.useCallback)(function(e){var t=e.x,r=e.y;n(!0),l({x:t,y:r})},[n,l]),s=(0,c.useCallback)(function(e){e.preventDefault(),e.stopPropagation(),a({x:e.clientX,y:e.clientY})},[a]),u=(0,c.useCallback)(function(){n(!1)},[n]);return{triggerProps:{onContextMenu:s},menuProps:(0,o._)((0,r._)({},i),{isOpen:t}),onClose:u,open:a}},w=(0,s.X)({menu:[u.l0.position.fixed,u.l0.flex.column,u.l0.borderRadius(8),u.l0.shadow(1),{"& > :first-child":[u.l0.borderRadius(8,8,0,0)],"& > :last-child":[u.l0.borderRadius(0,0,8,8)]}],item:[u.l0.reset.button,{'&:not([disabled]):not([aria-disabled="true"])':[p.gU.listItem],'&[disabled], &[aria-disabled="true"]':[u.l0.color.foregroundDimmest]},u.l0.p(8),u.l0.rowWithGap(8),u.l0.align.center],underlay:[u.l0.position.fixed,{top:0,left:0,bottom:0,right:0}]}),S=function(e){e.preventDefault()},_=function(e){var t=e.children,n=e.isOpen,l=e.defaultOpen,s=e.onOpenChange,u=e.x,f=e.y,h=(0,i._)(e,["children","isOpen","defaultOpen","onOpenChange","x","y"]),p=(0,b.d)({isOpen:n,defaultOpen:l,onOpenChange:s}),v=(0,c.useRef)(null),x=(0,m.N)({},p,v),C=x.modalProps,_=x.underlayProps;return n?(0,a.tZ)(g.aV,{portalContainer:document.body,children:(0,a.tZ)("div",(0,o._)((0,r._)({css:w.underlay},_),{onContextMenu:S,children:(0,a.tZ)(Z.ZP,{children:(0,a.tZ)(y.Tg,(0,o._)((0,r._)({elevated:!0,css:w.menu},C,h),{innerRef:v,tag:"ul",role:"menubar","aria-orientation":"vertical","aria-label":"Context",style:{left:u,top:f},children:(0,a.tZ)(d.uP,{options:{direction:"vertical"},children:t})}))})}))}):null},E=f.K.button,T=c.forwardRef(function(e,t){var n=e.children,s=e.iconLeft,u=e.isDisabled,f=void 0!==u&&u,p=e.onClick,m=(0,i._)(e,["children","iconLeft","isDisabled","onClick"]),g=(0,c.useRef)(null),b=(0,l._)((0,d.XZ)(g,f),4),Z=b[0],y=b[1],x=b[2],C=b[3];(0,d.Ym)(y,g);var S=(0,c.useCallback)(function(e){f||(C(),null==p||p(e))},[C,f,p]);return(0,a.BX)(E,(0,o._)((0,r._)({disabled:f,css:w.item,role:"menuitem",ref:(0,h.l)(t,g),tabIndex:Z,onKeyDown:x,onClick:S},m),{children:[s,(0,a.tZ)(v.xv,{multiline:!1,children:n})]}))})},23522:function(e,t,n){n.d(t,{m:function(){return Z},q:function(){return b}});var r=n(41733),o=n(30509),i=n(98924),l=n(66626),a=n(3796),c=n(54505),s=n(79904),u=n(9602),d=n(22419),f=n(27840),h=n(6674),p=n(75271),v=n(99399),m=n(97420),g=function(e){var t=e.value,n=e.onCopy,r=e.tooltipText,o=e.tooltipSuccessText,i=e.successTimeout,a=void 0===i?1e3:i,s=(0,l._)((0,p.useState)(!1),2),u=s[0],d=s[1],f=(0,p.useRef)(null),h=(0,l._)((0,p.useState)(void 0),2),v=h[0],m=h[1];return(0,p.useEffect)(function(){var e=f.current;return function(){e&&clearTimeout(e)}},[]),{isCopied:u,isTooltipOpen:v,onIsTooltipOpenChange:function(e){m(u?void 0:e)},tooltip:u?void 0===o?"Copied!":o:void 0===r?"Copy":r,copy:(0,p.useCallback)(function(){t&&((0,c.Z)(t),d(!0),m(!0),f.current&&clearTimeout(f.current),f.current=setTimeout(function(){d(!1),m(!1)},a),null==n||n())},[n,a,t])}};function b(e){var t=e.textToCopy,n=e.successTimeout,l=e.onCopy,c=e.tooltipDisable,u=e.tooltipText,p=e.tooltipPlacement,b=e.tooltipSuccessText,Z=e.tooltipHideWhenOutOfBounds,y=e.showIcon,x=e.successIcon,C=void 0===x?(0,a.tZ)(f.Z,{color:m.TV.accentPositiveStronger}):x,w=e.copyIcon,S=void 0===w?(0,a.tZ)(h.Z,{}):w,_=e.onClick,E=(0,i._)(e,["textToCopy","successTimeout","onCopy","tooltipDisable","tooltipText","tooltipPlacement","tooltipSuccessText","tooltipHideWhenOutOfBounds","showIcon","successIcon","copyIcon","onClick"]),T=g({value:t,successTimeout:n,onCopy:l,tooltipDisable:c,tooltipText:u,tooltipSuccessText:b}),k=T.isTooltipOpen,A=T.onIsTooltipOpenChange,R=T.tooltip,I=T.isCopied,G=T.copy;return(0,a.tZ)(d.u,{isOpen:k,onOpenChange:A,tooltip:R,placement:void 0===p?"bottom-end":p,hideWhenOutOfBounds:Z,children:(0,a.tZ)(s.zx,(0,o._)((0,r._)({disabled:!t,iconLeft:void 0!==y&&y&&I?C:S},(0,v.d)(E)),{onClick:function(e){G(),null==_||_(e)}}))})}function Z(e){var t=e.textToCopy,n=e.successTimeout,l=e.children,c=void 0===l?(0,a.tZ)(h.Z,{}):l,s=e.successIcon,d=void 0===s?(0,a.tZ)(f.Z,{color:m.TV.accentPositiveStronger}):s,p=e.tooltipDisable,v=e.tooltipText,b=e.onCopy,Z=e.tooltipPlacement,y=(0,i._)(e,["textToCopy","successTimeout","children","successIcon","tooltipDisable","tooltipText","onCopy","tooltipPlacement"]),x=g({value:t,successTimeout:n,onCopy:b,tooltipDisable:p,tooltipText:v}),C=x.isTooltipOpen,w=x.onIsTooltipOpenChange,S=x.isCopied,_=x.tooltip,E=x.copy;return(0,a.tZ)(u.hU,(0,o._)((0,r._)({disabled:!t},y),{isTooltipOpen:C,onTooltipOpenChange:w,alt:_,onClick:E,tooltipPlacement:void 0===Z?"bottom":Z,children:S?d:c}))}},85468:function(e,t,n){n.d(t,{X:function(){return a}});var r=n(3796),o=n(62279),i=n(63163),l=(0,o.iv)({backgroundColor:i.TV.outlineDimmest,width:1});function a(e){var t=e.className;return(0,r.tZ)("div",{className:t,css:l})}},46321:function(e,t,n){n.d(t,{J:function(){return m}});var r=n(41733),o=n(30509),i=n(98924),l=n(3796),a=n(62279),c=n(36809),s=n(86466),u=n(35820),d=n(63163),f=n(22419),h=n(93245),p=(0,a.F4)("from{opacity:0}to{opacity:1}"),v=(0,c.X)({self:[d.l0.flex.row,d.l0.flex.growAndShrink(1),d.l0.height(d.TV.space12),d.l0.borderRadius(4),d.l0.position.relative,s.gU.filledAndOutlined,d.l0.overflow("clip")],progressWrapper:[d.l0.flex.row,d.l0.flex.growAndShrink(1),d.l0.height("100%"),d.l0.width("100%"),d.l0.borderRadius(4),d.l0.position.relative],progress:[d.l0.position.relative,d.l0.width("100%"),d.l0.height("100%"),{top:0,left:0}],loading:u.p.backgroundPulse(),smoke:[d.l0.width("100%"),d.l0.height("500%"),d.l0.position.absolute,d.l0.left("50%"),d.l0.top("100%"),{opacity:.4,transition:"1s opacity",transform:"translate(-50%, -100%)",pointerEvents:"none"}],fadeInAnim:{animation:"".concat(p," 120ms forwards ease-out alternate")}});function m(e){var t,n=e.total,c=e.tooltip,s=e.className,u=e.disabled,d=void 0!==u&&u,p=e.loading,m=void 0!==p&&p,b=e.tooltipHidden,Z=(0,i._)(e,["total","tooltip","className","disabled","loading","tooltipHidden"]),y=null;return c?y=c:"current"in Z?y="".concat(Z.current||"0","/").concat(n):"data"in Z&&(y=null===(t=Z.data)||void 0===t?void 0:t.map(function(e){var t=e.current;return"".concat(t||"0","/").concat(n)}).join(" | ")),(0,l.tZ)(f.u,{placement:"top",tooltip:y,maxWidth:280,isDisabled:m||void 0!==b&&b,children:function(e,t){var i,c;return m?i=null:"current"in Z&&Z.current?i=(0,l.tZ)(g,{total:n,disabled:d,current:Z.current,color:Z.color}):"data"in Z&&(i=null===(c=Z.data)||void 0===c?void 0:c.map(function(e,t){return(0,a.az)(g,(0,o._)((0,r._)({},e),{key:"measure-bar-".concat(t),total:n,disabled:d}))})),(0,a.az)(h.G,(0,o._)((0,r._)({},e),{css:[v.self,v.fadeInAnim,m&&v.loading],className:s,innerRef:t,onClick:void 0,key:m?"loadingMeasureBar":"finishedLoadingMeasureBar",role:"group"}),(0,l.tZ)(h.G,{css:v.progressWrapper,style:Z.backgroundColor?{backgroundColor:Z.backgroundColor}:{},children:i},"measureBarProgress"))}})}function g(e){var t=e.current,n=e.total,r=e.color,o=void 0===r?d.TV.accentPrimaryDefault:r,i=e.disabled,a={backgroundColor:void 0!==i&&i?d.TV.outlineDefault:o,width:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 0===t||0===e?0:Math.max(0,Math.min(100,e/t*100))}(t,n)+"%"};return(0,l.tZ)(h.G,{css:v.progress,style:a,role:"meter","aria-label":"".concat(t," out of ").concat(n),"aria-valuemin":0,"aria-valuenow":t,"aria-valuemax":n})}},17695:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(41733),o=n(30509),i=n(3796),l=n(28065);function a(e){return(0,i.tZ)(l.ZP,(0,o._)((0,r._)({},e),{children:(0,i.tZ)("path",{fillRule:"evenodd",d:"M18 3.25a.75.75 0 0 1 .75.75v16a.75.75 0 0 1-1.5 0V4a.75.75 0 0 1 .75-.75Zm-6 6a.75.75 0 0 1 .75.75v10a.75.75 0 0 1-1.5 0V10a.75.75 0 0 1 .75-.75Zm-6 6a.75.75 0 0 1 .75.75v4a.75.75 0 0 1-1.5 0v-4a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}))}},19453:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(41733),o=n(30509),i=n(3796),l=n(28065);function a(e){return(0,i.tZ)(l.ZP,(0,o._)((0,r._)({},e),{children:(0,i.tZ)("path",{fillRule:"evenodd",d:"M5 3.75A1.25 1.25 0 0 0 3.75 5v14.19l2.72-2.72a.75.75 0 0 1 .53-.22h12A1.25 1.25 0 0 0 20.25 15V5A1.25 1.25 0 0 0 19 3.75H5Zm-1.945-.695A2.75 2.75 0 0 1 5 2.25h14A2.75 2.75 0 0 1 21.75 5v10A2.75 2.75 0 0 1 19 17.75H7.31l-3.78 3.78A.75.75 0 0 1 2.25 21V5c0-.73.29-1.429.805-1.945Z",clipRule:"evenodd"})}))}},39819:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(41733),o=n(30509),i=n(3796),l=n(28065);function a(e){return(0,i.tZ)(l.ZP,(0,o._)((0,r._)({},e),{children:(0,i.tZ)("path",{fillRule:"evenodd",d:"M1.25 12C1.25 6.063 6.063 1.25 12 1.25S22.75 6.063 22.75 12 17.937 22.75 12 22.75 1.25 17.937 1.25 12Z",clipRule:"evenodd"})}))}},7300:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(41733),o=n(30509),i=n(3796),l=n(28065);function a(e){return(0,i.tZ)(l.ZP,(0,o._)((0,r._)({},e),{children:(0,i.tZ)("path",{fillRule:"evenodd",d:"M12 .25a.75.75 0 0 1 .75.75v7.19l3.72-3.72a.75.75 0 1 1 1.06 1.06l-5 5a.75.75 0 0 1-1.06 0l-5-5a.75.75 0 0 1 1.06-1.06l3.72 3.72V1A.75.75 0 0 1 12 .25Zm0 13a.75.75 0 0 1 .53.22l5 5a.75.75 0 1 1-1.06 1.06l-3.72-3.72V23a.75.75 0 0 1-1.5 0v-7.19l-3.72 3.72a.75.75 0 0 1-1.06-1.06l5-5a.75.75 0 0 1 .53-.22Z",clipRule:"evenodd"})}))}},22436:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(41733),o=n(30509),i=n(3796),l=n(28065);function a(e){return(0,i.tZ)(l.ZP,(0,o._)((0,r._)({},e),{children:(0,i.tZ)("path",{fillRule:"evenodd",d:"M7.026 3.243c-.245.269-.388.756-.388 1.767v3.083c0 .922-.208 1.894-.948 2.72-.429.48-1.006.876-1.751 1.187.745.312 1.323.708 1.752 1.189.74.828.947 1.803.947 2.729V19c0 1.005.142 1.49.388 1.756.232.254.732.493 1.974.493a.75.75 0 0 1 0 1.5c-1.346 0-2.403-.241-3.08-.978-.663-.723-.782-1.738-.782-2.77v-3.084c0-.7-.153-1.268-.566-1.73-.426-.478-1.22-.946-2.717-1.24a.75.75 0 0 1-.605-.737v-.422a.75.75 0 0 1 .605-.736c1.497-.295 2.291-.764 2.717-1.24.413-.462.566-1.026.566-1.72V5.01c0-1.038.119-2.056.782-2.78.677-.739 1.734-.98 3.08-.98a.75.75 0 0 1 0 1.5c-1.242 0-1.741.24-1.974.493ZM14.25 2a.75.75 0 0 1 .75-.75c1.346 0 2.403.241 3.08.98.663.724.782 1.742.782 2.78v3.083c0 .694.153 1.258.566 1.72.426.476 1.22.945 2.717 1.24a.75.75 0 0 1 .605.736v.422a.75.75 0 0 1-.605.736c-1.497.295-2.291.763-2.717 1.24-.413.463-.566 1.03-.566 1.73v3.084c0 1.033-.12 2.048-.783 2.771-.677.737-1.733.978-3.079.978a.75.75 0 0 1 0-1.5c1.242 0 1.742-.24 1.974-.492.246-.268.388-.752.388-1.757v-3.083c0-.926.208-1.901.947-2.73.43-.48 1.007-.876 1.752-1.188-.745-.311-1.322-.707-1.751-1.187-.74-.826-.948-1.798-.948-2.72V5.01c0-1.011-.142-1.498-.388-1.767-.233-.254-.732-.493-1.974-.493a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})}))}},64206:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(41733),o=n(30509),i=n(3796),l=n(28065);function a(e){return(0,i.tZ)(l.ZP,(0,o._)((0,r._)({},e),{children:(0,i.tZ)("path",{d:"M12.4 16.697a.25.25 0 0 1-.25.235h-.34a.25.25 0 0 1-.25-.236l-.434-7.688V2.956a.5.5 0 0 1 .5-.5h.736a.5.5 0 0 1 .5.5v6.052l-.462 7.689Zm-.407 5.555c-.924 0-1.344-.504-1.344-1.26v-.308c0-.756.42-1.26 1.345-1.26.896 0 1.344.504 1.344 1.26v.308c0 .756-.448 1.26-1.344 1.26Z"})}))}},5189:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(41733),o=n(30509),i=n(3796),l=n(28065);function a(e){return(0,i.tZ)(l.ZP,(0,o._)((0,r._)({},e),{children:(0,i.tZ)("path",{fillRule:"evenodd",d:"M12 .25a.75.75 0 0 1 .53.22l5 5a.75.75 0 0 1-1.06 1.06l-3.72-3.72V10a.75.75 0 0 1-1.5 0V2.81L7.53 6.53a.75.75 0 0 1-1.06-1.06l5-5A.75.75 0 0 1 12 .25Zm0 13a.75.75 0 0 1 .75.75v7.19l3.72-3.72a.75.75 0 1 1 1.06 1.06l-5 5a.75.75 0 0 1-1.06 0l-5-5a.75.75 0 1 1 1.06-1.06l3.72 3.72V14a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}))}},70816:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(41733),o=n(30509),i=n(3796),l=n(28065);function a(e){return(0,i.BX)(l.ZP,(0,o._)((0,r._)({},e),{children:[(0,i.tZ)("path",{d:"M4.75 4c0-.69.56-1.25 1.25-1.25h7a.75.75 0 0 0 0-1.5H6A2.75 2.75 0 0 0 3.25 4v16A2.75 2.75 0 0 0 6 22.75h12A2.75 2.75 0 0 0 20.75 20v-9a.75.75 0 0 0-1.5 0v9c0 .69-.56 1.25-1.25 1.25H6c-.69 0-1.25-.56-1.25-1.25V4Z"}),(0,i.tZ)("path",{d:"m11.974 8.931 5.883-5.883a1.482 1.482 0 0 1 2.095 2.095l-5.883 5.884a1 1 0 0 1-.444.257l-2.118.578a.3.3 0 0 1-.369-.369l.578-2.118a1 1 0 0 1 .258-.444Z"}),(0,i.tZ)("path",{d:"M4.75 4c0-.69.56-1.25 1.25-1.25h7a.75.75 0 0 0 0-1.5H6A2.75 2.75 0 0 0 3.25 4v16A2.75 2.75 0 0 0 6 22.75h12A2.75 2.75 0 0 0 20.75 20v-9a.75.75 0 0 0-1.5 0v9c0 .69-.56 1.25-1.25 1.25H6c-.69 0-1.25-.56-1.25-1.25V4Z"}),(0,i.tZ)("path",{d:"m11.974 8.931 5.883-5.883a1.482 1.482 0 0 1 2.095 2.095l-5.883 5.884a1 1 0 0 1-.444.257l-2.118.578a.3.3 0 0 1-.369-.369l.578-2.118a1 1 0 0 1 .258-.444Z"})]}))}},71137:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(41733),o=n(30509),i=n(3796),l=n(28065);function a(e){return(0,i.tZ)(l.ZP,(0,o._)((0,r._)({},e),{children:(0,i.tZ)("path",{fillRule:"evenodd",d:"M1.25 6A.75.75 0 0 1 2 5.25h20a.75.75 0 0 1 0 1.5H2A.75.75 0 0 1 1.25 6Zm0 6a.75.75 0 0 1 .75-.75h20a.75.75 0 0 1 0 1.5H2a.75.75 0 0 1-.75-.75Zm0 6a.75.75 0 0 1 .75-.75h20a.75.75 0 0 1 0 1.5H2a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"})}))}},45967:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(41733),o=n(30509),i=n(3796),l=n(28065);function a(e){return(0,i.BX)(l.ZP,(0,o._)((0,r._)({},e),{children:[(0,i.tZ)("path",{fillRule:"evenodd",d:"M3 8.276a4.259 4.259 0 0 1 4.259-4.259h8.965a4.259 4.259 0 0 1 4.259 4.259v8.965a4.259 4.259 0 0 1-4.259 4.259H7.26A4.259 4.259 0 0 1 3 17.241V8.276Zm4.259-2.914a2.914 2.914 0 0 0-2.914 2.914v8.965a2.914 2.914 0 0 0 2.914 2.914h8.965a2.914 2.914 0 0 0 2.914-2.914V8.276a2.914 2.914 0 0 0-2.914-2.914H7.26Z",clipRule:"evenodd"}),(0,i.tZ)("path",{d:"M9.948 5.057A3.057 3.057 0 0 1 13.006 2h6.436A3.057 3.057 0 0 1 22.5 5.057v6.437a3.057 3.057 0 0 1-3.058 3.058h-6.436a3.057 3.057 0 0 1-3.058-3.058V5.057Z"})]}))}},35433:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(41733),o=n(30509),i=n(3796),l=n(28065);function a(e){return(0,i.BX)(l.ZP,(0,o._)((0,r._)({},e),{children:[(0,i.tZ)("path",{fillRule:"evenodd",d:"M10.122 9.849A.75.75 0 0 0 9 10.5v6a.75.75 0 0 0 1.122.651l5.25-3a.75.75 0 0 0 0-1.302l-5.25-3Zm3.366 3.651L10.5 15.208v-3.416l2.988 1.708Z",clipRule:"evenodd"}),(0,i.tZ)("path",{fillRule:"evenodd",d:"M3 5.25A2.25 2.25 0 0 1 5.25 3h13.5A2.25 2.25 0 0 1 21 5.25v13.5A2.25 2.25 0 0 1 18.75 21H5.25A2.25 2.25 0 0 1 3 18.75V5.25Zm2.25-.75h13.5a.75.75 0 0 1 .75.75v1.5h-15v-1.5a.75.75 0 0 1 .75-.75ZM4.5 8.25v10.5c0 .414.336.75.75.75h13.5a.75.75 0 0 0 .75-.75V8.25h-15Z",clipRule:"evenodd"})]}))}},37729:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(41733),o=n(30509),i=n(3796),l=n(28065);function a(e){return(0,i.tZ)(l.ZP,(0,o._)((0,r._)({},e),{children:(0,i.tZ)("path",{fillRule:"evenodd",d:"M3 3.25a.75.75 0 0 0-.75.75v16a.75.75 0 0 0 1.5 0V4A.75.75 0 0 0 3 3.25Zm17.25 2.042v13.416L8.512 12 20.25 5.292Zm1.5-.43a1.25 1.25 0 0 0-1.87-1.086L7.388 10.915a1.25 1.25 0 0 0 0 2.17l12.492 7.139a1.25 1.25 0 0 0 1.87-1.086V4.862Z",clipRule:"evenodd"})}))}},918:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(41733),o=n(30509),i=n(3796),l=n(28065);function a(e){return(0,i.tZ)(l.ZP,(0,o._)((0,r._)({},e),{children:(0,i.tZ)("path",{fillRule:"evenodd",d:"M10.64 2.354A9.75 9.75 0 1 1 2.803 15.25a.75.75 0 0 1 1.414-.498 8.25 8.25 0 1 0 1.937-8.564L2.894 9.25H7a.75.75 0 0 1 0 1.5H1A.75.75 0 0 1 .25 10V4a.75.75 0 0 1 1.5 0v4.266l3.368-3.165a9.75 9.75 0 0 1 5.522-2.747Z",clipRule:"evenodd"})}))}},98571:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(41733),o=n(30509),i=n(3796),l=n(28065);function a(e){return(0,i.tZ)(l.ZP,(0,o._)((0,r._)({},e),{children:(0,i.tZ)("path",{fillRule:"evenodd",d:"M2.476 2.463a.75.75 0 0 1 .845-.14l19 9a.75.75 0 0 1 0 1.355l-19 9a.75.75 0 0 1-1.006-.983L6.179 12 2.315 3.305a.75.75 0 0 1 .161-.842ZM7.487 12.75l-2.98 6.706 14.158-6.706H7.487Zm11.178-1.5H7.487l-2.98-6.706 14.158 6.706Z",clipRule:"evenodd"})}))}},98514:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(41733),o=n(30509),i=n(3796),l=n(28065);function a(e){return(0,i.tZ)(l.ZP,(0,o._)((0,r._)({},e),{children:(0,i.tZ)("path",{fillRule:"evenodd",d:"M9.341 6.066 12 18.43l2.655-12.364a3.57 3.57 0 0 0 .029-1.183.748.748 0 0 1-.042-.21 2.262 2.262 0 0 0-.721-1.188 3.12 3.12 0 0 0-1.923-.735 3.12 3.12 0 0 0-1.923.735 2.263 2.263 0 0 0-.721 1.189.747.747 0 0 1-.042.209 3.57 3.57 0 0 0 .029 1.183Zm-1.565-.642a5.61 5.61 0 0 0 .096.944l2.46 11.441-5.034-8.286a3.551 3.551 0 0 1-.281-.7.755.755 0 0 0-.038-.148c-.152-.652-.1-1.313.187-1.846.336-.626 1.087-1.242 2.61-1.405Zm.248-1.525c-2.108.127-3.501.957-4.18 2.22-.398.74-.51 1.562-.42 2.353-1.179.603-1.866 1.732-2.09 2.892-.257 1.334.07 2.85 1.11 3.817a.758.758 0 0 0 .037.032l9.045 7.368a.75.75 0 0 0 .948 0l9.045-7.368a.723.723 0 0 0 .038-.032c1.039-.968 1.366-2.483 1.109-3.817-.224-1.161-.913-2.292-2.094-2.894.09-.79-.023-1.61-.42-2.351-.68-1.263-2.073-2.093-4.18-2.22a3.76 3.76 0 0 0-1.062-1.542c-.906-.795-2.08-1.107-2.912-1.107-.832 0-2.006.312-2.912 1.107A3.76 3.76 0 0 0 8.024 3.9Zm8.196 1.525a5.607 5.607 0 0 1-.096.944l-2.457 11.44 5.03-8.285a3.543 3.543 0 0 0 .309-.801c.166-.667.117-1.347-.176-1.893-.336-.626-1.087-1.242-2.61-1.405Zm3.932 4.54a5.077 5.077 0 0 1-.162.32l-5.092 8.388 5.653-4.605c.568-.542.823-1.481.642-2.419-.133-.688-.486-1.298-1.041-1.684ZM9.1 18.67l-5.094-8.386a5.033 5.033 0 0 1-.16-.317c-.554.385-.906.994-1.039 1.681-.18.938.074 1.877.642 2.419l5.65 4.603Z",clipRule:"evenodd"})}))}},55649:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(41733),o=n(30509),i=n(3796),l=n(28065);function a(e){return(0,i.tZ)(l.ZP,(0,o._)((0,r._)({},e),{children:(0,i.tZ)("path",{fillRule:"evenodd",d:"M23 4.25a.75.75 0 0 1 .75.75v14a.75.75 0 0 1-1.5 0v-5.19l-5.22 5.22a.75.75 0 1 1-1.06-1.06l5.22-5.22H1a.75.75 0 0 1 0-1.5h20.19l-5.22-5.22a.75.75 0 0 1 1.06-1.06l5.22 5.22V5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"})}))}},98724:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(41733),o=n(30509),i=n(3796),l=n(28065);function a(e){return(0,i.tZ)(l.ZP,(0,o._)((0,r._)({},e),{children:(0,i.tZ)("path",{fillRule:"evenodd",d:"M17.08 2.86a5.25 5.25 0 0 0-5.867 7.3.75.75 0 0 1-.153.84l-6.91 6.91a1.371 1.371 0 0 0 1.94 1.94L13 12.94a.75.75 0 0 1 .84-.153 5.25 5.25 0 0 0 7.3-5.867l-2.915 2.916a1.75 1.75 0 0 1-2.45 0l-.005-.006-1.606-1.605a1.75 1.75 0 0 1 0-2.45l.006-.005 2.91-2.91Zm-2.294-1.504a6.75 6.75 0 0 1 3.993.49A.75.75 0 0 1 19 3.06l-3.766 3.767a.25.25 0 0 0 0 .346l1.593 1.593a.25.25 0 0 0 .346 0L20.94 5a.75.75 0 0 1 1.213.22 6.75 6.75 0 0 1-8.444 9.132L7.15 20.91a2.871 2.871 0 1 1-4.06-4.06l6.558-6.559a6.75 6.75 0 0 1 5.138-8.935Z",clipRule:"evenodd"})}))}},61663:function(e,t,n){n.d(t,{A:function(){return p},C:function(){return h}});var r=n(66626),o=n(3796),i=n(22419),l=n(24766),a=n(37488),c=n(34763),s=n(75271),u=n(36809),d=n(63163),f=n(85995),h=function(){var e=(0,c.r)(),t=e.showAiUpsell,n=e.refetch,u=(0,r._)((0,s.useState)(!1),2),d=u[0],h=u[1];return t?(0,o.BX)(o.HY,{children:[(0,o.tZ)(i.u,{tooltip:v,children:(0,o.tZ)(a.D,{css:m.pill,text:"BASIC MODEL",onClick:function(){return h(!0)}})}),(0,o.tZ)(f.Z,{isOpen:d,onClose:function(){return h(!1)},type:"purchase",onPurchaseComplete:function(){return n()},contextualUpsell:(0,o.BX)(o.HY,{children:[(0,o.tZ)(l.xv,{variant:"subheadBig",children:"Upgrade for Advanced AI"}),(0,o.tZ)(l.xv,{multiline:!0,children:"Get the most advanced model with higher quality responses and generation"})]}),analyticsContext:{upgrade:{context:"ai_chat_upsell"}}})]}):null},p=function(){return(0,c.r)().showAiUpsell?(0,o.tZ)(i.u,{tooltip:v,children:(0,o.tZ)(a.D,{text:"BASIC MODEL"})}):null},v="The Starter plan uses the Basic model for AI chat. Upgrade for better responses!",m=(0,u.X)({pill:[d.l0.cursor.pointer]})},34763:function(e,t,n){n.d(t,{r:function(){return h}});var r=n(41733),o=n(21262),i=n(71440),l=n(9122);function a(){var e=(0,o._)(["\n  query UpsellExperimentProviderCurrentUser($replId: String!) {\n    currentUser {\n      id\n      isSubscribed\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        owner {\n          ... on Team {\n            __typename\n            id\n          }\n          ... on User {\n            __typename\n            id\n          }\n        }\n        org {\n          id\n          type\n        }\n      }\n    }\n  }\n"]);return a=function(){return e},e}var c={},s=(0,i.Ps)(a()),u=n(85983),d=n(16155),f={showAiUpsell:!1,showPrivateUpsell:!1,showResourcesUpsell:!1,refetch:function(){}},h=function(){var e,t,n,o,i,a,h=(i={variables:{replId:(0,d.Z)()}},a=(0,r._)({},c,i),l.a(s,a)),p=h.data,v=h.refetch;if((null==p?void 0:null===(e=p.currentUser)||void 0===e?void 0:e.__typename)!=="CurrentUser"||(null==p?void 0:null===(t=p.repl)||void 0===t?void 0:t.__typename)!=="Repl")return f;var m=p.currentUser.isSubscribed,g=null===(n=p.repl.org)||void 0===n?void 0:n.type,b=(g===u.a4.Personal||null==g)&&(null===(o=p.repl.owner)||void 0===o?void 0:o.__typename)==="User"&&p.repl.owner.id===p.currentUser.id,Z=!m&&b;return{showAiUpsell:Z,showPrivateUpsell:Z,showResourcesUpsell:Z,refetch:v}}},42401:function(e,t,n){n.d(t,{O:function(){return c},v:function(){return l}});var r=n(48941),o=n(36309),i=(0,r.cn)(!1);function l(){return(0,o.Dv)(i)}var a=(0,r.cn)(null,function(e,t){return t(i,function(e){return!e})});function c(){return(0,o.b9)(a)}},17098:function(e,t,n){n.d(t,{z:function(){return ey},S:function(){return eb}});var r,o,i,l=n(42516),a=n(66626),c=n(63257),s=n(3796),u=n(40713),d=n(93245),f=n(36809),h=n(63163),p=n(75271),v=n(6069),m=n(9602),g=n(86466),b=n(35820),Z=n(14548),y=n(24766),x=(n(96601),n(33323)),C=n(39031),w=n(22192),S=n(92571),_=n(82231),E=n(38775),T=n(67790),k=n(98924),A=n(20904),R=n(21460),I=n(56981),G=n(11006),D=n(89774),B=n(78272),P=n(20957),X=n(15323),L=n(98724),N=n(21751),M=n(16865),O=n(19453),U=n(22436),q=n(71920),V=n(41513),H=n(70816),F=n(35433);function W(e){var t=e.kind,n=(0,k._)(e,["kind"]),r={createFileData:(0,s.tZ)(A.Z,{}),readFileData:(0,s.tZ)(G.Z,{}),fileEditData:(0,s.tZ)(H.Z,{}),shellExecutionData:(0,s.tZ)(q.Z,{}),packagerInstallData:(0,s.tZ)(R.Z,{}),screenshotData:(0,s.tZ)(V.Z,{}),toolchainInstallData:(0,s.tZ)(L.Z,{}),searchFilesystemData:(0,s.tZ)(D.Z,{}),searchFileData:(0,s.tZ)(D.Z,{}),planProgressData:(0,s.tZ)(N.Z,{}),packagerUninstallData:(0,s.tZ)(R.Z,{}),messageData:(0,s.tZ)(O.Z,{}),workflowsStartToolData:(0,s.tZ)(B.Z,{}),workflowsRestartToolData:(0,s.tZ)(X.Z,{}),workflowsStopToolData:(0,s.tZ)(P.Z,{}),workflowsSetRunConfigToolData:(0,s.tZ)(B.Z,{}),workflowsRemoveRunConfigToolData:(0,s.tZ)(U.Z,{}),workflowsGetOutputToolData:(0,s.tZ)(M.Z,{}),presentResultsToolData:(0,s.tZ)(F.Z,{}),summarizeObjectiveData:(0,s.tZ)(G.Z,{})};return(0,p.cloneElement)(t?r[t]:(0,s.tZ)(I.Z,{}),n)}function z(e){if(!e)return null;var t=e.contents.contents;if((null==t?void 0:t.$kind)!=="agentTimelineEventContents")return null;var n=t.agentTimelineEventContents,r=n.message,o=n.toolData;return(null==o?void 0:o.$kind)==="messageData"?{type:"message",message:r,created:e.created,sender:{id:e.sender.id,type:e.sender.type}}:{summary:(0,S.a)(e),message:r,state:e.state,error:e.error,toolDataKind:null==o?void 0:o.$kind,created:e.created}}var j=(0,w.$)(["color","timestampDisplay","chevronDisplay","secondaryButtonsDisplay","statusIconTransform","statusIconWidth","animation"]),Y=j.styleTokens,$=j.cssVars,K=[b.p.backgroundPulse(h.TV.blurpleStronger,h.TV.blurpleStrongest),{WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"}],J=(0,f.X)({root:[h.l0.colWithGap(6),(0,l._)({},h.BC.canHover,(0,l._)({},$.secondaryButtonsDisplay,"none")),h.l0.hover((0,l._)({},$.secondaryButtonsDisplay,"flex")),{":focus-within":(0,l._)({},$.secondaryButtonsDisplay,"flex")}],row:[h.l0.rowWithGap(4),h.l0.align.center,h.l0.position.relative],button:[h.l0.reset.button,h.l0.textAlign.left,h.l0.height(28),g.gU.listItem,h.l0.borderRadius(),h.l0.hover((r={},(0,l._)(r,$.color,h.TV.foregroundDefault),(0,l._)(r,$.timestampDisplay,"flex"),(0,l._)(r,$.chevronDisplay,"flex"),r)),(i={},(0,l._)(i,h.BC.canHover,(o={},(0,l._)(o,$.color,h.TV.foregroundDimmer),(0,l._)(o,$.chevronDisplay,"none"),(0,l._)(o,$.timestampDisplay,"none"),o)),(0,l._)(i,"color",Y.color),(0,l._)(i,"transition","color 120ms"),i),h.l0.pl(6),h.l0.pr(2),h.l0.rowWithGap(6),h.l0.cursor.pointer,h.l0.flex.growAndShrink(1),h.l0.justify.spaceBetween,h.l0.align.center],timestamp:[(0,l._)({},h.BC.canHover,{display:"var(".concat($.timestampDisplay,", none)")})],left:[h.l0.flex.growAndShrink(1),h.l0.rowWithGap(6),h.l0.align.center],buttonText:[h.l0.flex.growAndShrink(1),{color:"inherit",'&[data-loading="true"]':K}],bar:[h.l0.position.absolute,h.l0.width(1),h.l0.height(8),h.l0.borderRadius(),{backgroundColor:h.TV.outlineDimmest,zIndex:-1,bottom:-6,left:14}],messageSurface:[h.l0.p(8),h.l0.borderRadius(4),h.l0.mb(8)],chevron:[{display:Y.chevronDisplay}],secondaryButtons:[h.l0.flex.row,h.l0.align.center,{display:Y.secondaryButtonsDisplay}],iconButton:[h.l0.width(28),h.l0.height(28)]}),Q=(0,p.memo)(function(e){var t=e.eventId,n=e.onClick,r=(0,u.Mi)(t,z),o=(0,a._)((0,p.useState)(!1),2),i=o[0],l=o[1],c=(0,a._)((0,p.useState)(!1),2),f=c[0],v=(c[1],null==r?void 0:r.state),g=(0,p.useRef)(v),b=(0,p.useRef)(null);if((0,p.useEffect)(function(){if(g.current===u.he.IN_PROGRESS&&v!==u.he.IN_PROGRESS){(0,T.A)(b,$.color,h.TV.greenStronger);var e=setTimeout(function(){(0,T.A)(b,$.color,h.TV.foregroundDimmer)},300);return function(){clearTimeout(e)}}},[v]),!r)return null;var w=r.message.trim().length>0;return i&&!w&&l(!1),(0,s.BX)(d.G,{css:J.root,children:[(0,s.BX)(d.G,{css:J.row,children:[(0,s.BX)(d.G,{tag:"button",innerRef:b,css:J.button,onClick:function(){return n(t)},children:[(0,s.BX)(d.G,{css:J.left,children:[(0,s.tZ)(W,{kind:r.toolDataKind,color:v===u.he.IN_PROGRESS?h.TV.blurpleStronger:void 0}),(0,s.tZ)(d.G,{"data-timeline-bar":!0,css:J.bar}),(0,s.tZ)(y.xv,{css:J.buttonText,multiline:!1,"data-loading":r.state===u.he.IN_PROGRESS,children:r.summary}),r.created?(0,s.tZ)(E.EK,{textVariant:"small",textColor:"dimmest",css:J.timestamp,date:r.created}):null]}),(0,s.tZ)(d.G,{css:J.chevron,children:(0,s.tZ)(x.Z,{})})]}),(0,s.BX)(d.G,{css:J.secondaryButtons,children:[w?(0,s.tZ)(m.hU,{alt:i?"Hide explanation":"Show explanation",onClick:function(){return l(function(e){return!e})},css:J.iconButton,children:(0,s.tZ)(C.Z,{})}):null,null]})]}),i?(0,s.tZ)(Z.Tg,{elevated:!0,css:J.messageSurface,children:(0,s.tZ)(_.JG,{text:r.message,messageState:u.he.COMPLETE})}):null,f?(0,s.tZ)(Z.Tg,{elevated:!0,css:J.messageSurface,children:(0,s.tZ)(et,{eventId:t})}):null]})});function ee(e){return e}function et(e){var t=e.eventId,n=(0,u.Mi)(t,ee);return(0,s.tZ)(v.Z,{json:n})}var en=n(51840),er=n(79904),eo=n(7122),ei=n(27840),el=n(3710),ea=n(67465),ec=(0,f.X)({root:[h.l0.px(32),h.l0.pb(16),h.l0.align.center,h.l0.rowWithGap(4),h.l0.justify.center,h.l0.width("100%")],approvedContainer:[h.l0.pb(8),h.l0.align.center,h.l0.rowWithGap(4),h.l0.justify.end,h.l0.mt(4),h.l0.color.foregroundDimmest,{flex:1}],avatar:[h.l0.pl(8)],bar:[h.l0.flex.growAndShrink(1),h.l0.border({direction:"top",color:h.TV.outlineDimmest})],planSurface:[h.l0.borderRadius()],planSection:[h.l0.p(8),{":not(:last-of-type)":h.l0.border({direction:"bottom",color:h.TV.outlineDimmest})}],planContainer:[h.l0.flex.growAndShrink(1)],historicalPlanContainer:[h.l0.colWithGap(2)],historicalPlanStep:[h.l0.rowWithGap(4)],historicalPlanStepText:[h.l0.width("100%"),h.l0.flex.growAndShrink(1)]});function es(e){var t;return(null==e?void 0:null===(t=e.contents.contents)||void 0===t?void 0:t.$kind)!=="agentPlanEventContents"?null:{agentPlan:e.contents.contents.agentPlanEventContents,sessionId:e.sessionId,parentEventId:e.parentEventId}}var eu=(0,p.memo)(function(e){var t,n=e.id,r=(0,u.Mi)(n,es);return r?(null===(t=r.agentPlan.Approver)||void 0===t?void 0:t.$kind)==="approver"?(0,s.BX)(d.G,{"data-event-type":"plan",children:[(0,s.tZ)(d.G,{css:ec.root,children:(0,s.tZ)(d.G,{css:ec.planContainer,children:(0,s.BX)(Z.Tg,{css:ec.planSurface,elevated:!0,children:[(0,s.tZ)(d.G,{css:ec.planSection,children:(0,s.tZ)(y.xv,{children:r.agentPlan.objective.description})}),(0,s.tZ)(d.G,{css:ec.planSection,children:(0,s.tZ)(ef,{planSteps:r.agentPlan.step.subSteps})})]})})}),(0,s.tZ)(ed,{approverId:r.agentPlan.Approver.approver.id})]}):r.agentPlan.requiresApproval?(0,s.tZ)(d.G,{css:ec.root,"data-event-type":"plan",children:(0,s.tZ)(d.G,{css:ec.planContainer,children:(0,s.tZ)(el.Z,{agentPlan:r.agentPlan,sessionId:r.sessionId,parentEventId:r.parentEventId})})}):null:null});function ed(e){var t=Number(e.approverId),n=(0,eo.NA)({variables:{id:t}}).data,r=null==n?void 0:n.user;return(0,s.BX)(d.G,{css:ec.approvedContainer,children:[(0,s.tZ)(ei.Z,{color:h.TV.greenStronger}),(0,s.tZ)(y.xv,{multiline:!1,children:"Approved the plan"}),r?(0,s.tZ)(d.G,{css:ec.avatar,children:(0,s.tZ)(ea.Y,{id:r.id,showAvatarOnly:!0})}):null]})}function ef(e){var t=e.planSteps;return(0,s.tZ)(d.G,{css:ec.historicalPlanContainer,children:t.map(function(e,t){return(0,s.BX)(d.G,{css:ec.historicalPlanStep,children:[(0,s.BX)(y.xv,{color:"dimmest",children:[t+1,"."]}),(0,s.tZ)(y.xv,{color:"dimmer",css:ec.historicalPlanStepText,children:e.name})]},t)})})}var eh=n(10182),ep=n(5189),ev=n(7300),em=n(68417),eg=n(42965),eb=40,eZ=(0,f.X)({spacer:[h.l0.flex.grow(1),h.l0.minHeight(eb)]});function ey(e){var t=(0,u.$G)(e.sessionId),n=t.items,r=t.isLoadingMore,o=(0,p.useRef)(new Map),i=(0,eg.T3)();return(0,s.BX)(eh.h,{scrollCache:o.current,scrollCacheKey:e.sessionId,shouldAutoScrollRef:e.shouldAutoscrollRef,padding:e.padding,hideScrollbar:i,children:[(0,s.tZ)(d.G,{css:eZ.spacer}),null==n?void 0:n.map(function(t,r){switch(t.type){case"userMessage":return(0,s.tZ)(en.Mp,{eventId:t.id},t.id);case"aiMessage":return(0,s.tZ)(en.BK,{isLast:r===n.length-1,eventId:t.id,addSecretEntries:e.addSecretEntries,waitingOnUserInput:e.waitingOnUserInput},t.id);case"timeline":return(0,s.tZ)(eT,{eventId:t.id,onEventClick:e.onEventClick},t.id);case"plan":return(0,s.tZ)(eu,{id:t.id},t.id)}}),(0,s.tZ)(e_,{show:!!r})]})}var ex=(0,w.$)(["opacity","transitionDelay","transitionDuration"]),eC=ex.cssVars,ew=ex.styleTokens,eS=(0,f.X)({root:[h.l0.center,{pointerEvents:"none",height:16}],inner:[h.l0.center,h.l0.pb(16),{opacity:ew.opacity,transitionProperty:"opacity, transform",transitionDuration:ew.transitionDuration,transitionDelay:ew.transitionDelay}],text:[K,{lineHeight:1}]});function e_(e){var t;return(0,s.tZ)(d.G,{css:eS.root,style:(t={},(0,l._)(t,eC.opacity,e.show?"1":"0"),(0,l._)(t,eC.transitionDelay,e.show?"1000ms":"0"),(0,l._)(t,eC.transitionDuration,e.show?"1000ms":"200ms"),t),children:(0,s.tZ)(d.G,{css:eS.inner,children:(0,s.tZ)(y.xv,{css:eS.text,variant:"headerDefault",children:"..."})})})}var eE=(0,f.X)({root:[h.l0.pb(16),h.l0.rowWithGap(8),h.l0.pr(32)],timeline:[h.l0.colWithGap(4),{flex:1,"& > div:last-of-type":{"[data-timeline-bar]":{display:"none"}}}],button:[h.l0.color.foregroundDimmest,h.l0.px(6),h.l0.height(28),h.l0.hover(h.l0.color.foregroundDefault),{svg:{marginRight:-2}}],avatar:[h.l0.pt(2)]}),eT=(0,p.memo)(function(e){var t=e.eventId,n=e.onEventClick,r=(0,a._)((0,p.useState)(!1),2),o=r[0],i=r[1],l=(0,u.WW)(t);if(!l)return null;var f=[t].concat((0,c._)(l)),h=f.length-3>1,v=h&&!o?f.slice(-3):f;return(0,s.BX)(d.G,{css:eE.root,"data-event-type":"ai-actions",children:[(0,s.tZ)(d.G,{css:eE.avatar,"data-avatar":!0,children:(0,s.tZ)(em.R,{advanced:!0,size:24,showUsername:!1,showAvatarOnly:!0})}),(0,s.BX)(d.G,{css:eE.timeline,children:[h?(0,s.tZ)(er.zx,{variant:"nofill",alignment:"start",onClick:function(){return i(!o)},css:eE.button,iconLeft:o?(0,s.tZ)(ev.Z,{}):(0,s.tZ)(ep.Z,{}),text:o?"Show less":"Show ".concat(f.length-3," more")}):null,v.map(function(e){return(0,s.tZ)(Q,{eventId:e,onClick:n},e)})]})]})})},51840:function(e,t,n){n.d(t,{BK:function(){return eC},Mp:function(){return eS},ii:function(){return ei},eR:function(){return el}});var r,o=n(42516),i=n(41733),l=n(30509),a=n(63257),c=n(3796),s=n(40713),u=n(79904),d=n(93245),f=n(36809),h=n(63163),p=n(27387),v=n(66626),m=n(96583),g=n(20564),b=n(2446),Z=n(75271),y=n(24766),x=n(44935),C=n(25722),w=n(62279),S=n(9602),_=n(16865),E=n(61010),T=n(35723),k=n(51619),A=n(68220),R=n(10578),I=(0,w.iv)({display:"grid",gridTemplateColumns:"minmax(0, 2fr) minmax(0, 3fr)",gridAutoFlow:"row",gap:h.TV.space8,"> *":{height:"fit-content"}}),G=(0,f.X)({root:[I,{input:{'&[data-sensitive="true"]':{fontFamily:"text-security-disc"}}}]}),D=(0,f.X)({root:[h.l0.p(8)],secrets:[h.l0.colWithGap(8)],secretHeader:[I,h.l0.mb(4),h.l0.fontSize("small"),h.l0.color.foregroundDimmer,{lineHeight:h.TV.lineHeightSmall,"> div":[h.l0.gap(4),{display:"flex",alignItems:"center",flexDirection:"row"}]}],saveButtonEnabled:[h.l0.mt(8),(0,A.ec)("blurple"),{width:"fit-content"}],saveButtonDisabled:[h.l0.mt(8),(0,A.ec)("grey"),{width:"fit-content"}],inputContainer:[{backgroundColor:h.TV.backgroundDefault}],link:[h.l0.p(4)]});function B(e){var t=e.keyName,n=e.value,r=e.onChange,o=e.isSensitive,i=e.readOnly,l=(0,Z.useMemo)(function(){return(0,T.E)(t)},[t]);return(0,c.BX)(d.G,{css:G.root,children:[(0,c.tZ)(d.G,{children:(0,c.tZ)(x.II,{value:t,readOnly:!0,css:D.inputContainer})}),(0,c.BX)(d.G,{children:[(0,c.tZ)(x.II,{value:n,onChange:function(e){return r(e.target.value)},"data-sensitive":o,readOnly:i,css:D.inputContainer}),!i&&l?(0,c.tZ)(y.xv,{variant:"small",css:D.link,children:(0,c.tZ)("a",{href:l,target:"_blank",children:"Where do I find this?"})}):null]})]})}function P(e){var t,n=e.keys,r=e.addEntries,o=e.onComplete,a=(0,v._)((0,Z.useState)(!1),2),s=a[0],f=a[1],y=(0,v._)((0,Z.useState)(!0),2),x=y[0],w=y[1],T=(0,v._)((0,Z.useState)(!1),2),A=T[0],I=T[1],G=(0,v._)((0,Z.useState)(n.map(function(e){return{key:e,value:""}})),2),P=G[0],X=G[1],L=(0,Z.useMemo)(function(){return P.every(function(e){return!!e.value})},[P]),N=(t=(0,p._)(function(){var e;return(0,m.Jh)(this,function(t){switch(t.label){case 0:f(!0),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,r(P)];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),C.Tb(e),[3,4];case 4:return f(!1),I(!0),null==o||o(),[2]}})}),function(){return t.apply(this,arguments)});return(0,c.tZ)(g.Q,{icon:(0,c.tZ)(b.Z,{}),title:"Secrets",children:(0,c.BX)(d.G,{css:D.root,children:[(0,c.BX)(d.G,{css:D.secretHeader,children:[(0,c.tZ)(d.G,{children:"Key"}),(0,c.BX)(d.G,{children:["Value",(0,c.tZ)(S.hU,{alt:"Toggle Visibility",tooltipBehavior:"hidden",onClick:function(){return w(!x)},size:18,children:x?(0,c.tZ)(_.Z,{}):(0,c.tZ)(E.Z,{})})]})]}),(0,c.tZ)(d.G,{css:D.secrets,children:P.map(function(e){var t=e.key,n=e.value;return(0,c.tZ)(B,{keyName:t,value:n,readOnly:A,isSensitive:x,onChange:function(e){return X(function(n){return n.map(function(n){return n.key===t?(0,l._)((0,i._)({},n),{value:e}):n})})}},t)})}),A?null:(0,c.tZ)(d.G,{css:h.l0.flex.rowReverse,children:(0,c.tZ)(u.zx,{iconLeft:s?(0,c.tZ)(R.Z,{}):(0,c.tZ)(k.Z,{}),css:L?D.saveButtonEnabled:D.saveButtonDisabled,text:"Add secret".concat(P.length>1?"s":""),onClick:N,loading:s,disabled:!L||s})})]})})}var X=n(68417),L=n(67465),N=n(82231),M=n(96949),O=n(37121),U=n(3102);function q(e){var t=(0,s.Un)(),n=(0,s.vl)(),r=(0,U.yL)(n.qualified).messageCharacters,o=(0,v._)((0,Z.useState)(null),2),i=(o[0],o[1]),l=V(e),a=(0,s.bD)({initialSessionId:e.sessionId}),u=a.stopMessage,d=a.loading,f=a.parentToActiveChild,h=(0,s.gn)(e.sessionId,f),p=!!(h&&h.state===s.he.IN_PROGRESS);return(0,c.tZ)(O.x,{isConnected:t,inputRef:function(e){i(e)},lastEventInProgress:p,maxLength:r,loading:d,onStop:u,onSubmit:l,analyticsSurface:"agent_mode_response",variant:"compact",children:[null,null]})}function V(e){var t=(0,s.Un)(),n=(0,s.bD)({initialSessionId:e.sessionId}).sendMessage;return(0,Z.useCallback)(function(r){t&&((0,M.j)(M.U3.AI_CHAT_EVENT,{action:"message_sent",intent_type:s.$h.AGENT,message_content:r,message_source:"chat_pane",message_surface:"agent_mode_response"}),n({kind:"message",message:r,model:s.BY.MODEL_TYPE_UNKNOWN,intent:s.$h.AGENT},{parentEventId:e.parentEventId}))},[t,e.parentEventId,n])}var H=n(14548),F=n(38775),W=n(86466),z=n(22192),j=n(42261),Y=n(23882),$=n(11782),K=n(27840),J=n(918),Q=(0,f.X)({root:[h.l0.rowWithGap(8),h.l0.py(8),h.l0.pl(8),h.l0.pr(12),h.l0.mx(32),h.l0.mb(16),h.l0.borderRadius()],icon:{paddingTop:3},body:[h.l0.flex.growAndShrink(1),h.l0.colWithGap(2),h.l0.justify.spaceBetween],strikethrough:{textDecoration:"line-through"},footer:[h.l0.flex.row,h.l0.flex.wrap,h.l0.justify.spaceBetween],timestamp:[h.l0.rowWithGap(4),h.l0.flex.wrap],revertControls:[h.l0.rowWithGap(8),h.l0.align.center,h.l0.color.foregroundDimmer]});function ee(e){var t=e.stepNumber,n=e.name,r=e.date,o=e.reverted,i=e.screenshot,l=e.checkpoint,a=e.onRevert,s=o?"color-mix(in srgb, ".concat(h.TV.backgroundHigher," 25%, ").concat(W.vb.interactiveBackground,")"):"color-mix(in srgb, ".concat(h.TV.accentPositiveDimmest," 25%, ").concat(W.vb.interactiveBackground,")");return(0,c.BX)(d.G,{css:Q.root,style:{backgroundColor:s},children:[null==i?(0,c.tZ)(d.G,{css:Q.icon,children:(0,c.tZ)(K.Z,{color:o?h.TV.foregroundDimmest:h.TV.greenStronger})}):(0,c.tZ)(eo,{url:i,reverted:o}),(0,c.BX)(d.G,{css:Q.body,children:[(0,c.tZ)(et,{stepNumber:null!=t?t:"",name:n,reverted:o}),(0,c.BX)(d.G,{css:Q.footer,children:[(0,c.tZ)(en,{date:r,reverted:o}),l||a?(0,c.BX)(d.G,{css:Q.revertControls,children:[l?(0,c.tZ)(y.xv,{children:l}):null,a?(0,c.tZ)(S.hU,{onClick:a,alt:"Revert to this step",children:(0,c.tZ)(J.Z,{})}):null]}):null]})]})]})}function et(e){var t=e.stepNumber,n=e.name;return e.reverted?(0,c.BX)(y.xv,{css:Q.strikethrough,color:"dimmest",children:[t,". ",n]}):(0,c.BX)(y.xv,{children:[t,". ",n]})}function en(e){var t=e.date,n=e.reverted,r=n?h.TV.foregroundDimmer:h.TV.accentPositiveStrongest;return(0,c.BX)(d.G,{css:Q.timestamp,style:{color:r},children:[(0,c.tZ)(y.xv,{children:n?"Reverted":"Completed"}),(0,c.tZ)(F.EK,{textVariant:"text",live:!0,date:t})]})}var er=(0,f.X)({container:[h.l0.width(96),h.l0.height(96),h.l0.mt(4),h.l0.mb(6),h.l0.mx(6),h.l0.position.relative,h.l0.center],screenshot:[h.l0.borderRadius(4)],icon:{position:"absolute",bottom:"-4px",right:"-6px",backgroundColor:h.TV.greenDimmer,borderRadius:"50%",padding:2}});function eo(e){var t=e.url,n=e.reverted;return(0,c.BX)(d.G,{css:er.container,style:{opacity:n?.5:void 0},children:[t?(0,c.tZ)($.Z,{css:er.screenshot,layout:"fill",src:t,alt:"Screenshot",objectFit:"cover"}):(0,c.tZ)(R.Z,{}),n?null:(0,c.tZ)(d.G,{css:er.icon,children:(0,c.tZ)(K.Z,{color:h.TV.greenStronger})})]})}var ei={backgroundColor:"color-mix(in srgb, ".concat(h.TV.blurpleDimmest," 25%, ").concat(W.vb.surfaceBackground,")"),borderColor:h.TV.blurpleDimmest},el=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return{transitionProperty:t.join(", "),transitionDuration:"100ms",transitionTimingFunction:"ease-out"}},ea=(0,z.$)(["zIndex","position","bottom","transform","highlightedBackgroundOpacity","avatarTransform","messageTransform","surfaceBackground","timestampTransform","maxHeight","mainOverflow"]),ec=ea.cssVars,es=ea.styleTokens,eu=[h.l0.rowWithGap(8),h.l0.pb(16)],ed=[h.l0.borderRadius(4),h.l0.px(8),h.l0.py(6)],ef=(0,f.X)({aiMessage:[(0,l._)((0,i._)({overflow:"hidden",zIndex:es.zIndex,position:es.position,bottom:es.bottom,maxHeight:es.maxHeight,transform:es.transform},el("transform","bottom")),(r={},(0,o._)(r,'+ [data-event-type*="ai"] [data-avatar]',{visibility:"hidden"}),(0,o._)(r,':has(+ [data-event-type="ai-message"], + [data-event-type="secrets"],  + [data-event-type="plan"])',{marginBottom:-4,"[data-timestamp]":{display:"none"}}),r))],container:(0,a._)(eu).concat([h.l0.justify.start,h.l0.pr(32),h.l0.flex.growAndShrink(1),{overflow:es.mainOverflow}]),highlightedBackground:[h.l0.border({color:ei.borderColor,width:1}),h.l0.borderRadius(4,4,0,0),h.l0.coverContainer,(0,i._)({pointerEvents:"none",borderBottom:"0 none",backgroundColor:ei.backgroundColor,opacity:es.highlightedBackgroundOpacity},el("opacity"))],userMessage:(0,a._)(eu).concat([h.l0.justify.end,h.l0.pl(32)]),userMessageMain:[h.l0.flex.shrink(1),h.l0.align.end,h.l0.colWithGap(6),h.l0.maxWidth(400)],aiMessageMain:[h.l0.flex.shrink(1),h.l0.colWithGap(6),h.l0.position.relative,(0,i._)({transform:es.messageTransform},el("transform"))],aiMessageSurface:[ed,(0,i._)({backgroundColor:es.surfaceBackground},el("bcakground-color"))],userMessageSurface:(0,a._)(ed).concat([h.l0.colorMixBg(h.TV.accentPrimaryDefault,"transparent",.4),h.l0.maxWidth("100%")]),userMessageAttachments:[h.l0.maxWidth("100%")],avatar:[h.l0.pt(6),h.l0.position.relative,(0,i._)({transform:es.avatarTransform},el("transform"))],timestamp:[h.l0.px(8),(0,i._)({transform:es.timestampTransform},el("transform"))]});function eh(e){var t,n=e.message,r=e.state,i=e.created,l=e.isLast,a=e.waitingOnUserInput,s=e.children,u=a&&l,f=(0,H.B3)({elevated:!0});return(0,c.BX)(d.G,{css:ef.aiMessage,"data-event-type":"ai-message",style:(t={},(0,o._)(t,ec.position,u?"sticky":"relative"),(0,o._)(t,ec.bottom,u?"30px":"unset"),(0,o._)(t,ec.transform,u?"translateY(".concat(h.TV.space16,")"):"translateY(0)"),(0,o._)(t,ec.highlightedBackgroundOpacity,u?"1":"0"),(0,o._)(t,ec.avatarTransform,u?"translate(".concat(h.TV.space8,", ").concat(h.TV.space16,")"):"translate(0, 0)"),(0,o._)(t,ec.messageTransform,u?"translateY(".concat(h.TV.space16,")"):"translateY(0)"),(0,o._)(t,ec.surfaceBackground,u?"transparent":f),(0,o._)(t,ec.timestampTransform,u?"translateY(calc(-1 * ".concat(h.TV.space8,"))"):"translateY(0)"),(0,o._)(t,ec.zIndex,u?"1":"inherit"),(0,o._)(t,ec.maxHeight,u?"calc(100% - ".concat(24,"px)"):"auto"),(0,o._)(t,ec.mainOverflow,u?"auto":"hidden"),t),children:[(0,c.tZ)(d.G,{css:ef.highlightedBackground}),(0,c.BX)(d.G,{css:ef.container,children:[(0,c.tZ)(d.G,{css:ef.avatar,"data-avatar":!0,children:(0,c.tZ)(X.R,{advanced:!0,size:24,showUsername:!1,showAvatarOnly:!0})}),(0,c.BX)(d.G,{css:ef.aiMessageMain,children:[(0,c.tZ)(d.G,{css:ef.aiMessageSurface,children:(0,c.tZ)(N.JG,{text:n||"...",messageState:r})}),null!=s?s:null,(0,c.tZ)(d.G,{css:ef.timestamp,"data-timestamp":!0,children:(0,c.tZ)(F.EK,{live:!0,date:i,textVariant:"small",textColor:"dimmest"})})]})]})]})}function ep(e){var t=e.userId,n=e.message,r=e.uploadedFiles,o=e.created;return(0,c.BX)(d.G,{css:ef.userMessage,"data-event-type":"user-message",children:[(0,c.BX)(d.G,{css:ef.userMessageMain,children:[(0,c.tZ)(ev,{attachments:r}),(0,c.tZ)(H.Tg,{css:ef.userMessageSurface,elevated:!0,children:(0,c.tZ)(N.JG,{text:n,messageState:s.he.COMPLETE})}),(0,c.tZ)(d.G,{css:ef.timestamp,children:(0,c.tZ)(F.EK,{live:!0,date:o,textVariant:"small",textColor:"dimmest"})})]}),(0,c.tZ)(d.G,{css:ef.avatar,children:(0,c.tZ)(L.Y,{id:t,showAvatarOnly:!0})})]})}function ev(e){var t=e.attachments,n=function(){var e=(0,Y.Z)().fs;function t(){return(t=(0,p._)(function(t){var n,r;return(0,m.Jh)(this,function(o){switch(o.label){case 0:return[4,e.readFile(t.path)];case 1:if("content"in(n=o.sent()))return r=n.content.toString("base64"),[2,"data:".concat(t.mimeType,";base64,").concat(r)];return[2,t.path]}})})).apply(this,arguments)}return function(e){return t.apply(this,arguments)}}();return(0,c.tZ)(d.G,{css:ef.userMessageAttachments,children:(0,c.tZ)(j.s,{renderedAttachments:t,getImageSrc:n})})}var em=(0,f.X)({root:[h.l0.rowWithGap(8),h.l0.pt(16)]});function eg(e){return 0===e.buttonAction.buttons.length?null:(0,c.tZ)(d.G,{css:em.root,children:e.buttonAction.buttons.map(function(t,n){return(0,c.tZ)(u.zx,{text:t.name,variant:"outlined",disabled:e.isDisabled,onClick:function(){var n;return null===(n=e.onClick)||void 0===n?void 0:n.call(e,t.responseText)}},n)})})}var eb=(0,f.X)({input:[h.l0.pt(8)]});function eZ(e){var t=e.sessionId,n=e.parentEventId,r=e.sender,o=e.agentAction,i=e.isLast,l=e.addSecretEntries,a=V({sessionId:t,parentEventId:n}),u=(0,s.ue)();switch(o.$kind){case"messageButtonAction":return(0,c.BX)(c.HY,{children:[(0,c.tZ)(eg,{buttonAction:o.messageButtonAction,isDisabled:!i,onClick:a}),i&&r===s.FW.AI?(0,c.tZ)(d.G,{css:eb.input,children:(0,c.tZ)(q,{sessionId:t,parentEventId:n})}):null]});case"secretRequestAction":var f=o.secretRequestAction.secrets;return(0,c.tZ)(P,{keys:f.map(function(e){return e.key}),addEntries:l,onComplete:function(){return u({sessionId:t,runState:s.FL.AGENT_STATE_RUNNING})}});default:return null}}function ey(e){if(!e||e.sender.type!==s.FW.AI)return null;var t=e.contents.contents;if((null==t?void 0:t.$kind)==="messageEventContents"){var n=t.messageEventContents.agentAction.optionType;return{message:t.messageEventContents.content,state:e.state,parentEventId:e.parentEventId,sessionId:e.sessionId,action:n,created:e.created}}if((null==t?void 0:t.$kind)!=="agentTimelineEventContents")return null;var r=t.agentTimelineEventContents.toolData;switch(null==r?void 0:r.$kind){case"messageData":var o=r.messageData.agentAction.optionType;return{message:r.messageData.content,parentEventId:e.parentEventId,sessionId:e.sessionId,state:e.state,action:o,created:e.created};case"planProgressData":var i=r.planProgressData.updatedPlanStep;return{message:t.agentTimelineEventContents.message||"Updated "+i.name,parentEventId:e.parentEventId,sessionId:e.sessionId,state:e.state,updatedPlanStep:i,created:e.created};default:return null}}function ex(e){if(!e||e.sender.type!==s.FW.USER)return null;var t=e.contents.contents;if((null==t?void 0:t.$kind)!=="messageEventContents")return null;var n=t.messageEventContents.agentAction.optionType;return{message:t.messageEventContents.content,uploadedFiles:t.messageEventContents.uploadedFiles,userId:Number(e.sender.id),parentEventId:e.parentEventId,sessionId:e.sessionId,action:n,created:e.created}}var eC=(0,Z.memo)(function(e){var t,n=e.eventId,r=e.addSecretEntries,o=e.isLast,i=e.waitingOnUserInput,l=(0,s.Mi)(n,ey);return l?(0,c.BX)(c.HY,{children:[(0,c.tZ)(eh,{message:l.message,state:l.state,created:l.created,isLast:o,waitingOnUserInput:i,children:l.action?(0,c.tZ)(eZ,{sender:s.FW.AI,sessionId:l.sessionId,parentEventId:l.parentEventId,agentAction:l.action,isLast:o,addSecretEntries:r}):null}),(null===(t=l.updatedPlanStep)||void 0===t?void 0:t.status)===s.UL.STEP_COMPLETE?(0,c.tZ)(ew,{step:l.updatedPlanStep,date:l.created}):null]}):null});function ew(e){var t=e.step,n=e.date,r=(0,s.xn)(t.id);return(0,c.tZ)(ee,{stepNumber:r,name:t.name,date:n})}var eS=(0,Z.memo)(function(e){var t=e.eventId,n=(0,s.Mi)(t,ex);return n?(0,c.tZ)(ep,{userId:n.userId,message:n.message,uploadedFiles:n.uploadedFiles,created:n.created}):null})},20564:function(e,t,n){n.d(t,{Q:function(){return v}});var r=n(3796),o=n(85468),i=n(9602),l=n(14548),a=n(93245),c=n(24766),s=n(36809),u=n(45967),d=n(63163),f=n(9220),h=n(75271),p=(0,s.X)({root:[d.l0.borderRadius(4),d.l0.border({color:d.TV.outlineDimmest}),d.l0.overflow("hidden")],header:[d.l0.px(6),d.l0.height(28),d.l0.rowWithGap(4),d.l0.align.center,d.l0.justify.spaceBetween,{backgroundColor:f.o}],left:[d.l0.align.center,d.l0.mr(4)],middle:[d.l0.flex.growAndShrink(1),d.l0.rowWithGap(4),d.l0.align.center],middleText:[d.l0.width("100%"),{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}],right:[d.l0.align.center,d.l0.rowWithGap(2)],divider:[{backgroundColor:d.TV.outlineDimmer,height:16,marginLeft:4}]});function v(e){return(0,r.BX)(a.G,{css:p.root,children:[(0,r.BX)(a.G,{css:p.header,children:[(0,r.tZ)(a.G,{css:p.left,children:(0,h.cloneElement)(e.icon,{size:16})}),(0,r.tZ)(a.G,{css:p.middle,children:(0,r.tZ)(c.xv,{css:p.middleText,children:e.title})}),(0,r.BX)(a.G,{css:p.right,children:[e.right,e.onOpenPane?(0,r.BX)(r.HY,{children:[e.right?(0,r.tZ)(o.X,{css:p.divider}):null,(0,r.tZ)(i.hU,{alt:"Open Pane",onClick:e.onOpenPane,children:(0,r.tZ)(u.Z,{})})]}):null]})]}),(0,r.tZ)(l.Tg,{elevated:!0,children:e.children})]})}},90:function(e,t,n){n.d(t,{ZP:function(){return R},ub:function(){return I}});var r=n(41733),o=n(30509),i=n(66626),l=n(3796),a=n(40713),c=n(79904),s=n(44935),u=n(86466),d=n(24766),f=n(93245),h=n(36809),p=n(27840),v=n(56981),m=n(7935),g=n(10578),b=n(19602),Z=n(63163),y=n(41974),x=n(81202),C=n.n(x),w=n(75271),S=n(92674),_=n(37729),E=n(30043),T=n(37862),k={REVERT_CHANGES:390,ADD_STEP:280,START_BUILDING:200},A=(0,h.X)({wrapper:[Z.l0.colWithGap(8)],editable:[Z.l0.colWithGap(4)],readonly:[Z.l0.colWithGap(8)],buttonContainer:[Z.l0.flex.row,Z.l0.justify.end,Z.l0.rowWithGap(6),Z.l0.pt(2)]});function R(e){var t,n,s,u,d,h=(0,i._)((0,w.useState)(e.agentPlan),2),v=h[0],m=h[1],g=(t={sessionId:e.sessionId,parentEventId:e.parentEventId},n=(0,a.Un)(),s=(0,a.bD)({initialSessionId:t.sessionId}).sendMessage,(0,w.useCallback)(function(e){n&&s({kind:"agentPlan",planId:e.planId,objective:e.objective,step:e.step,requiresApproval:!1,model:a.BY.MODEL_TYPE_UNKNOWN,approved:null==e?void 0:e.approved},{parentEventId:t.parentEventId})},[n,t.parentEventId,s])),b=(0,i._)((0,w.useState)(!1),2),Z=b[0],x=b[1],R=(0,i._)((0,w.useState)(1/0),2),G=R[0],B=R[1],P=(0,a.HP)((null===(u=e.agentPlan)||void 0===u?void 0:u.planId)||"",e.sessionId),X=P?v:e.agentPlan,L=(0,w.useMemo)(function(){return!C()(v,e.agentPlan)},[v,e.agentPlan]),N=function(){m(e.agentPlan)},M=(0,w.useCallback)(function(e){B(e.width)},[]),O=(0,T.Z)(M),U=function(e,t){return G<=t?"":e},q=function(){if(v&&v.step){var e={id:(0,S.v4)(),name:"",status:a.UL.STEP_UNKNOWN,message:"",timelineEventId:(0,S.v4)(),subSteps:[],metadata:{$kind:"codeChangeStats",codeChangeStats:{linesAdded:0,linesRemoved:0,commitId:""}},blueprints:[],mode:"editor",commitId:""};m((0,y.Uy)(v,function(t){t.step.subSteps.push(e)}))}};if(!X||!X.step||!X.step.subSteps.length)return(0,l.tZ)(I,{editable:P,addStep:q});var V=function(e){m((0,y.Uy)(function(t){var n=function(t){for(var r=0;r<t.length;r++){if(t[r].id===e)return t.splice(r,1),!0;if(t[r].subSteps.length>0&&n(t[r].subSteps))return!0}return!1};t&&t.step&&n(t.step.subSteps)}))},H=function(e,t){m((0,y.Uy)(v,function(n){var r=function(n){var o=!0,i=!1,l=void 0;try{for(var a,c=n[Symbol.iterator]();!(o=(a=c.next()).done);o=!0){var s=a.value;if(s.id===e)return s.name=t,!0;if(s.subSteps.length>0&&r(s.subSteps))return!0}}catch(e){i=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(i)throw l}}return!1};n&&n.step&&r(n.step.subSteps)}))},F=function(e){return e.filter(function(e){return""!==e.name.trim()}).map(function(e){return(0,o._)((0,r._)({},e),{subSteps:F(e.subSteps)})})},W=function(){if(v){var e=(0,y.Uy)(v,function(e){e.requiresApproval=!1,e.step.subSteps=F(e.step.subSteps)});m(e),g((0,o._)((0,r._)({},e),{approved:!0}))}};return(0,l.BX)(f.G,{css:A.wrapper,innerRef:O,children:[(0,l.tZ)(f.G,{css:P?A.editable:A.readonly,children:null===(d=X.step)||void 0===d?void 0:d.subSteps.map(function(e,t){return(0,l.tZ)(D,{editable:Z,requiresApproval:X.requiresApproval,step:e,index:"".concat(t+1,"."),onSave:H,onDelete:V},e.id)})}),P?(0,l.tZ)(f.G,{css:A.buttonContainer,children:Z?(0,l.BX)(l.HY,{children:[L?(0,l.tZ)(c.zx,{"aria-label":"Revert changes",text:U("Revert changes",k.REVERT_CHANGES),iconLeft:(0,l.tZ)(_.Z,{}),colorway:"red",onClick:function(){return N()}}):null,(0,l.tZ)(c.zx,{"aria-label":"Add a step",text:U("Add a step",k.ADD_STEP),colorway:"grey",iconLeft:(0,l.tZ)(E.Z,{}),onClick:function(){return q()}}),(0,l.tZ)(c.zx,{"aria-label":"Start building",iconLeft:(0,l.tZ)(p.Z,{}),text:U("Start building",k.START_BUILDING),colorway:"blurple",onClick:function(){return W()}})]}):(0,l.BX)(l.HY,{children:[(0,l.tZ)(c.zx,{text:"Approve plan & start",colorway:"blurple",iconLeft:(0,l.tZ)(p.Z,{}),onClick:function(){return W()}}),(0,l.tZ)(c.zx,{text:"Edit plan",colorway:"grey",onClick:function(){return x(!0)}})]})}):null]},X.planId)}function I(e){var t=e.editable,n=e.addStep;return(0,l.BX)(l.HY,{children:[(0,l.tZ)(d.xv,{color:"dimmer",children:t?"Plan is currently empty":"No plan generated yet"}),t?(0,l.tZ)(c.zx,{iconLeft:(0,l.tZ)(E.Z,{}),text:"Add a step",onClick:function(){return null==n?void 0:n()}}):null]})}var G=(0,h.X)({step:[Z.l0.flex.column,Z.l0.colWithGap(6),Z.l0.align.center,Z.l0.color.foregroundDimmer,Z.l0.align.stretch],iconWrapper:[Z.l0.maxHeight(32),Z.l0.display.flex,Z.l0.flex.column,Z.l0.align.center,Z.l0.justify.center,{alignSelf:"stretch"}],input:[Z.l0.flex.grow(1)],inputRow:[Z.l0.rowWithGap(8),Z.l0.align.center],buttonContainer:[Z.l0.flex.row,Z.l0.justify.end,Z.l0.rowWithGap(6),Z.l0.color.foregroundDefault]});function D(e){var t=e.step,n=e.level,r=void 0===n?0:n,o=e.index,i=e.editable,c=e.requiresApproval,h=e.onSave,p=e.onDelete;return(0,l.BX)(w.Fragment,{children:[(0,l.tZ)(f.G,{css:G.step,style:{marginLeft:8*r},children:(0,l.BX)(f.G,{css:G.inputRow,children:[(0,l.tZ)(f.G,{css:G.iconWrapper,children:i?(0,l.tZ)(d.xv,{children:o}):(0,l.tZ)(B,{status:c||!t.status?a.UL.STEP_UNKNOWN:t.status})}),i?(0,l.tZ)(s.B,{autoSize:!0,rows:1,css:G.input,value:t.name,onChange:function(e){h(t.id,e.target.value)}}):t.name,i?(0,l.tZ)(b.Z,{css:u.gU.nofill,onClick:function(){return p(t.id)}}):null]})}),t.subSteps.map(function(e,t){return(0,l.tZ)(D,{step:e,level:r+1,index:"".concat(t+1,"."),editable:i,requiresApproval:c,onSave:h,onDelete:p},e.id)})]})}function B(e){switch(e.status){case a.UL.STEP_IN_PROGRESS:return(0,l.tZ)(g.Z,{color:Z.TV.blurpleStronger,size:e.size});case a.UL.STEP_COMPLETE:return(0,l.tZ)(p.Z,{color:Z.TV.accentPositiveStronger,size:e.size});case a.UL.STEP_FAILED:return(0,l.tZ)(m.Z,{color:Z.TV.accentNegativeStronger,size:e.size});default:return(0,l.tZ)(v.Z,{color:Z.TV.foregroundDimmer,size:e.size})}}},3710:function(e,t,n){n.d(t,{C:function(){return h},Z:function(){return p}});var r=n(3796),o=n(40713),i=n(93245),l=n(36809),a=n(63163),c=n(90),s=n(24766),u=n(14548),d=(0,l.X)({container:[a.l0.overflowY("auto")],innerContainer:[a.l0.align.center,a.l0.justify.center,a.l0.borderRadius(),a.l0.container()],section:[a.l0.p(8),a.l0.width("100%"),{":not(:last-of-type)":a.l0.border({direction:"bottom",color:a.TV.outlineDimmest})}]});function f(e){var t,n;return(null==e?void 0:null===(n=e.contents)||void 0===n?void 0:null===(t=n.contents)||void 0===t?void 0:t.$kind)==="agentPlanEventContents"?{sessionId:e.sessionId,parentEventId:e.parentEventId,agentPlan:e.contents.contents.agentPlanEventContents,objective:e.contents.contents.agentPlanEventContents.objective.description}:null}function h(){return(0,o.Mq)(f)}function p(e){var t=e.agentPlan,n=e.sessionId,o=e.parentEventId;return(0,r.tZ)(i.G,{css:d.container,children:(0,r.tZ)(u.Tg,{elevated:!0,css:d.innerContainer,children:t?(0,r.BX)(r.HY,{children:[(0,r.tZ)(i.G,{css:d.section,children:(0,r.tZ)(s.xv,{children:t.objective.description})}),(0,r.tZ)(i.G,{css:d.section,children:(0,r.tZ)(c.ZP,{agentPlan:t,sessionId:n,parentEventId:o})})]}):(0,r.tZ)(c.ub,{editable:!1})})})}},92571:function(e,t,n){n.d(t,{a:function(){return o}});var r=n(40713);function o(e){var t=e.contents.contents;if((null==t?void 0:t.$kind)!=="agentTimelineEventContents")return null;var n=e.state===r.he.IN_PROGRESS,o=t.agentTimelineEventContents,i=o.toolName,l=o.toolData;if("screenshot_tool"===i)return"".concat(n?"Taking":"Took"," a screenshot");switch(null==l?void 0:l.$kind){case"fileEditData":return"".concat(n?"Editing":"Edited"," ").concat(l.fileEditData.filePath);case"createFileData":return"".concat(n?"Creating":"Created"," ").concat(l.createFileData.filePath);case"readFileData":case"planProgressData":return null;case"shellExecutionData":return"".concat(n?"Executing":"Executed"," ").concat(l.shellExecutionData.command);case"toolchainInstallData":return"".concat(n?"Adding":"Added"," support for ").concat(l.toolchainInstallData.modules.join(", "));case"packagerInstallData":return"".concat(n?"Installing":"Installed"," ").concat(l.packagerInstallData.inputPackages.join(", "));case"searchFileData":return"".concat(n?"Searching":"Searched"," ").concat(l.searchFileData.filePath," for ").concat(l.searchFileData.query);case"screenshotData":return"".concat(n?"Taking":"Took"," a screenshot");case"presentResultsToolData":return"Presented results to the user";case"workflowsStartToolData":return"Started ".concat(l.workflowsStartToolData.name);case"workflowsRestartToolData":return"Restarted ".concat(l.workflowsRestartToolData.name);case"workflowsStopToolData":return"Stopped ".concat(l.workflowsStopToolData.name);case"workflowsSetRunConfigToolData":return"Configured ".concat(l.workflowsSetRunConfigToolData.name," to run ").concat(l.workflowsSetRunConfigToolData.command);case"workflowsRemoveRunConfigToolData":return"Removed configuration for ".concat(l.workflowsRemoveRunConfigToolData.name);default:return n?"Working...":"Did something..."}}},37121:function(e,t,n){n.d(t,{x:function(){return eR}});var r,o=n(42516),i=n(66626),l=n(3796),a=n(75271),c=n(3030),s=n(91166),u=n(35139),d=n(11515),f=n(79588),h=n(52657),p=n(22192),v=n(68220),m=n(9602),g=n(14548),b=n(93245),Z=n(36809),y=n(98571),x=n(20957),C=n(10578),w=n(63163),S=n(80403),_=n(42305),E=n(64988),T=n(24766),k=S.r$.define({combine:function(e){var t;return null!==(t=e[0])&&void 0!==t?t:0}}),A=new _.j(function(e){return k.of(e)}),R={marker:"cm-empty-state-dom"},I=c.tk.theme((0,o._)({},".".concat(R.marker),{backgroundColor:w.TV.redDefault,opacity:"0.2"})),G=S.QQ.define({create:function(e){return e.doc.length},update:function(e,t){return t.state.doc.length}}),D=function(e){return Math.max(e.doc.length-e.facet(k),0)},B=S.QQ.define({create:D,update:function(e,t){return(0,E.aU)(t,"doc",k)?D(t.state):e},provide:function(e){return[G,I,(0,c.EY)({above:!1,update:function(t){return(0,E.aU)(t,e)},markers:function(t){var n=t.state.field(e);if(0===n)return[];var r=t.state.doc.length;return c.dc.forRange(t,R.marker,S.jT.range(r-n,r))}})]}}),P=(0,Z.X)({charLimit:[w.l0.color.redDefault]});function X(e){var t=e.view,n=(0,u.IK)(t,B);return n?(0,l.tZ)(T.xv,{variant:"small",css:P.charLimit,children:n}):null}var L=n(27387),N=n(96583),M=n(7351),O=n(19016),U=n(52927),q=n(4573),V=n(87915),H=n(27840),F=n(97420),W=n(47423),z=n(81202),j=n.n(z),Y=S.r$.define({combine:function(e){var t;return null!==(t=e[0])&&void 0!==t?t:[]},compare:j()}),$=new _.j(function(e){return Y.of(e)}),K={render:function(e){var t=e.file,n=t.path,r=t.match,o=(0,U.V)((0,l.tZ)(b.G,{css:O.z.root,style:{width:"100%"},className:"option",children:(0,l.BX)(b.G,{css:O.z.content,children:[(0,l.BX)(b.G,{css:O.z.left,children:[(0,l.tZ)(V.Z,{path:n,size:16}),(0,l.tZ)(q.x,{text:r.filename.text,highlight:r.filename.ranges,dimmed:!0}),r.directory?(0,l.tZ)(b.G,{color:"dimmest",css:O.z.dir,children:(0,l.tZ)(q.x,{text:r.directory.text+"/",highlight:r.directory.ranges,dimmed:!0})}):null]}),"included"===t.inclusionStatus?(0,l.tZ)(H.Z,{}):null]})}));return o.style.display="flex",o.style.width="100%",o},position:81},J=c.tk.theme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:F.TV.fontFamilyDefault,fontSize:F.TV.fontSizeSmall},"& > ul > li":{padding:"0px",display:"flex",alignItems:"center"},"& > ul > li[aria-selected] .option":{backgroundColor:F.TV.backgroundHighest}},".cm-completionLabel":{width:0}}),Q=new _.j(function(e){if(!e)return[];function t(){return(t=(0,L._)(function(t){var n,r,o,i,l;return(0,N.Jh)(this,function(a){switch(a.label){case 0:if(!e||!t.matchBefore(/@(\S*)/g)||null===(n=t.matchBefore(/\w*/)))return[2,null];return[4,e(n.text)];case 1:return o=null!==(r=a.sent().files)&&void 0!==r?r:[],i=new Map(t.state.facet(Y).map(function(e){return[e.path,e.inclusionStatus]})),l=o.map(function(e){var t=e.path,n=e.ranges;return{label:t,displayLabel:" ",file:{path:t,inclusionStatus:i.get(t),match:(0,W.Q1)({path:t,ranges:null!=n?n:[]})}}}),[2,{from:n.from,filter:!1,options:l}]}})})).apply(this,arguments)}return[J,(0,M.ys)({defaultKeymap:!1,icons:!1,aboveCursor:!0,addToOptions:[K],override:[function(e){return t.apply(this,arguments)}],maxRenderedOptions:100})]}),ee=new _.j(function(e){return c.tk.updateListener.of(function(t){var n=!0,r=!1,o=void 0;try{for(var i,l=t.transactions[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var a=i.value.annotation(M.Jv);a&&e(a.label)}}catch(e){r=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}})}),et=n(12285),en=n(4955),er=n(41733),eo=n(30509),ei=n(9670),el=n(86466),ea=n(22419),ec=n(54300),es=n(16689),eu=n.n(es),ed=n(35370),ef=(0,Z.X)({root:[w.l0.display.inlineFlex],button:[w.l0.reset.button,w.l0.display.inlineFlex,w.l0.px(2),el.gU.outlined,w.l0.borderRadius(4),w.l0.rowWithGap(2),w.l0.align.center],warning:{color:w.TV.redDefault}}),eh=new U.J(function(e){var t=(0,ed.UO)(e.path),n=(0,ed.Il)(e.path);return(0,l.tZ)(ea.u,{isDisabled:!n&&!e.warning,tooltip:(0,l.BX)(b.G,{children:[e.warning?(0,l.tZ)(T.xv,{variant:"small",css:ef.warning,children:e.warning}):null,n?(0,l.BX)(T.xv,{variant:"small",color:"dimmest",children:[n,"/"]}):null]}),children:function(n,r){return(0,l.tZ)(b.G,(0,eo._)((0,er._)({css:ef.root,innerRef:r},n),{children:(0,l.BX)(b.G,{tag:"button",css:ef.button,onClick:function(){return e.onClick()},children:[(0,l.tZ)(V.Z,{size:12,path:e.path}),(0,l.tZ)(T.xv,{variant:"small",children:t}),e.warning?(0,l.tZ)(ec.Z,{size:12}):null]})}))}})}),ep=function(e){"use strict";(0,en._)(n,e);var t=(0,ei._)(n);function n(e,r){var o;return(0,et._)(this,n),(o=t.call(this)).file=e,o.onClick=r,o}var r=n.prototype;return r.eq=function(e){return this.file.path===e.file.path&&this.file.inclusionStatus===e.file.inclusionStatus},r.toDOM=function(){var e=this.file,t=e.path,n=e.inclusionStatus,r=null;switch(n){case"included":break;case"unsupported":r="File not supported";break;case"truncated":case"overflowing":r="Exceedes memory limit"}var o=eh.create({path:t,onClick:this.onClick,warning:r});return o.style.display="inline",o},n}(c.l9),ev=function(e,t){return new c.Y1({regexp:RegExp("".concat(e.map(function(e){var t=e.path;return"@".concat(eu()(t))}).join("|")),"g"),decoration:function(n,r){var o,i=n[0].substring(1,null===(o=n[0])||void 0===o?void 0:o.length),l=e.find(function(e){return e.path===i});return l?c.p.replace({widget:new ep(l,function(){return t(i)}),inclusive:!0}):null}})},em=new _.j(function(e){return e?c.lg.fromClass(function(){"use strict";function t(n){(0,et._)(this,t);var r=n.state.facet(Y);this.match=r.length&&e?ev(r,e):null,this.placeholders=this.match?this.match.createDeco(n):c.p.none}return t.prototype.update=function(t){var n=t.state.facet(Y);if(0===n.length){this.match=null,this.placeholders=c.p.none;return}if((0,E.aU)(t,Y)){this.match=ev(n,e),this.placeholders=this.match.createDeco(t.view);return}if((0,E.aU)(t,"doc")){if(!this.match){this.match=ev(n,e),this.placeholders=this.match.createDeco(t.view);return}this.placeholders=this.match.updateDeco(t,this.placeholders)}},t}(),{decorations:function(e){return e.placeholders},provide:function(e){return c.tk.atomicRanges.of(function(t){var n;return(null===(n=t.plugin(e))||void 0===n?void 0:n.placeholders)||c.p.none})}}):[]}),eg=n(37505),eb={layer:"cm-placeholder-layer",dom:"cm-placeholder-dom"},eZ=c.tk.theme((r={},(0,o._)(r,".".concat(eb.layer),{width:"100%",height:"100%",pointerEvents:"none"}),(0,o._)(r,".".concat(eb.dom),{position:"absolute",width:"100%",pointerEvents:"none",fontFamily:F.TV.fontFamilyDefault,color:F.TV.foregroundDimmest}),r)),ey=function(e){return 0===e.doc.toString().trim().length};S.r$.define({combine:function(){return!0}});var ex=S.Py.define(),eC=S.QQ.define({create:ey,update:function(e,t){return ey(t.state)}}),ew=n(29017),eS=(0,p.$)(["padding"]),e_=eS.cssVars,eE=eS.styleTokens,eT=c.tk.theme((0,o._)({"&":{flexGrow:1},"& .cm-content":{fontFamily:w.TV.fontFamilyDefault}},"& .".concat(f.ll),{display:"none"})),ek=(0,Z.X)({footer:[w.l0.rowWithGap(8),w.l0.align.end,w.l0.py(4)],left:[w.l0.rowWithGap(8),w.l0.align.center,w.l0.flex.growAndShrink(1),{cursor:"text"}],right:[w.l0.display.flex,w.l0.rowWithGap(8),w.l0.align.end],rightColumn:[w.l0.display.flex,w.l0.flex.column,w.l0.align.center],codemirror:[w.l0.display.flex,w.l0.align.center,w.l0.flex.grow(1),w.l0.overflow("auto"),w.l0.maxHeight(300),w.l0.minHeight(32),{"& .cm-editor":{height:"100%"}}],send:[w.l0.borderRadius()],sendDisabled:[(0,v.ec)("grey")],sendEnabled:[(0,v.ec)("blurple")],chatInput:[w.l0.backgroundColor.backgroundDefault,w.l0.borderRadius(4),{padding:eE.padding,border:"1px solid ".concat(w.TV.outlineDimmest),"&:focus-within, &:hover":{border:"1px solid ".concat(w.TV.outlineDimmer)},"&:active":{border:"1px solid ".concat(w.TV.accentPrimaryDefault)}}]}),eA=new _.j(function(e,t){return c.tk.domEventHandlers({keydown:function(n,r){!((0,M.SI)(r.state).length>0)&&"Enter"===n.key&&!n.shiftKey&&(n.preventDefault(),!(t||r.state.field(eC))&&(e(r.state.doc.toString()),r.dispatch({changes:{from:0,to:r.state.doc.length}})))}})}),eR=(0,a.forwardRef)(function(e,t){var n,r,f,p,v,Z,w,S,_,T=(0,d.Z)(),k=T.ref,R=T.view;r=(n={view:R,setPromptEditor:e.inputRef}).view,f=n.setPromptEditor,p=(0,h.Z)(f),(0,a.useEffect)(function(){if(r){var e=p.current;return e({setValue:function(e){r.state.doc.toString()!==e&&r.dispatch({changes:{from:0,to:r.state.doc.length,insert:e}})},getValue:function(){return r.state.doc.toString()},focus:function(){r.focus(),r.dispatch({selection:{anchor:r.state.doc.length}})},animatePlaceholder:function(){r.dispatch({effects:ex.of(!0)})}}),function(){e(null)}}},[r,p]);var I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.text,n=void 0===t?"Type message…":t;return(0,a.useMemo)(function(){var e;return[eC,eZ,(0,c.EY)((e=Date.now(),{above:!1,class:eb.layer,update:function(t){var n=!1;return(0,eg.j)(t,ex,function(){n=!0,e=Date.now()}),n||(0,E.aU)(t,eC)},markers:function(t){if(!t.state.field(eC))return[];var r,o,i,l,a,c,s=t.coordsAtPos(0);if(!s)return[];var u=t.dom.getBoundingClientRect(),d=s.left-u.left;return[(o=(r={top:s.top-u.top,left:d,height:s.bottom-s.top,animateTimestamp:e,text:n}).top,i=r.left,l=r.height,a=r.animateTimestamp,c=r.text,{draw:function(){var e=document.createElement("div");e.className=eb.dom,e.style.width="100%",e.style.paddingTop=o+"px",e.style.paddingLeft=i+"px",e.style.height=l+"px";var t=c.length;return function n(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;requestAnimationFrame(function(){e.textContent=c.slice(0,r),r<t&&n(r+1)})}(),e},animateTimestamp:a,eq:function(e){return this.animateTimestamp===e.animateTimestamp}})]}}))]},[n])}({text:e.placeholderText}),G=(0,u.IK)(R,eC),D=A.use(e.maxLength),P=(0,h.Z)(e.onSubmit),L=eA.use((0,a.useCallback)(function(e){return P.current(e)},[P]),!e.isConnected),N=Q.use(e.findFiles),M=em.use(e.openFile),O=$.use(e.fileContextInclusions),U=ew.I.use({analyticsSurface:e.analyticsSurface,shouldTrack:!0}),q=e.updateFileContext,V=ee.use((0,a.useCallback)(function(e){return null==q?void 0:q({path:e,preference:"include"})},[q]));if(e.hideInput)return null;var H=(!R||!0===G)&&!e.loading||e.loading&&!e.lastEventInProgress,F=(0,i._)(null!==(_=e.children)&&void 0!==_?_:[],2),W=F[0],z=F[1];return(0,l.BX)(b.G,{css:ek.chatInput,innerRef:t,style:(0,o._)({flexDirection:"compact"===e.variant?"row":void 0},e_.padding,"compact"===e.variant?"2px 5px":"4px 8px"),children:[(0,l.tZ)(s.ZP,{ref:k,language:"markdown",css:ek.codemirror,hideGutter:!0,autocomplete:!1,lineWrapping:!0,fontSize:14,keyboardHandler:null,extensions:[eT,L,U,I,B,D,O,M,N,V]}),(0,l.BX)(b.G,{css:ek.footer,children:["compact"===e.variant?null:(0,l.tZ)(b.G,{css:ek.left,onClick:function(e){e.target===e.currentTarget&&(null==R||R.focus())},children:W}),(0,l.BX)(b.G,{css:ek.right,style:{alignItems:"compact"===e.variant?"flex-end":"center"},children:["compact"===e.variant?null:(0,l.tZ)(X,{view:R}),z,(0,l.BX)(b.G,{css:ek.rightColumn,children:["compact"===e.variant?(0,l.tZ)(X,{view:R}):null,(0,l.tZ)(g.Tg,{elevated:!0,css:ek.send,children:e.isConnected?(0,l.tZ)(m.hU,{css:H?ek.sendDisabled:ek.sendEnabled,disabled:H,dataCy:"ai-chat-send-button",alt:(v=e.loading,Z=e.lastEventInProgress,v?Z?"Stop":"Loading":"Send"),onClick:function(){if(e.loading&&e.lastEventInProgress){e.onStop();return}if(R){var t=R.state.doc.toString();t&&(e.onSubmit(t),R.dispatch({changes:{from:0,to:R.state.doc.length}}))}},children:(w=e.loading,S=e.lastEventInProgress,w?S?(0,l.tZ)(x.Z,{}):(0,l.tZ)(C.Z,{}):(0,l.tZ)(y.Z,{}))}):(0,l.tZ)(m.hU,{disabled:!0,alt:"Connecting....",children:(0,l.tZ)(C.Z,{})})})]})]})]})]})})},19016:function(e,t,n){n.d(t,{p:function(){return eh},z:function(){return eo}});var r,o,i=n(27387),l=n(42516),a=n(41733),c=n(30509),s=n(66626),u=n(96583),d=n(3796),f=n(54455),h=n(4573),p=n(22192),v=n(86466),m=n(87915),g=n(22893),b=n(14548),Z=n(24766),y=n(93245),x=n(36809),C=n(27840),w=n(20904),S=n(10578),_=n(89774),E=n(54300),T=n(63163),k=n(88504),A=n(41974),R=n(75271),I=n(96751),G=n(17437),D=n(35370),B=n(52657),P=n(57785),X=n(82549),L=n(47423);n(42965);var N=(0,x.X)({popover:[T.l0.borderRadius(4),T.l0.border({color:T.TV.outlineDefault}),T.l0.overflow("hidden"),T.l0.maxWidth(260)]}),M=n(22419),O=n(64888),U=n(65958),q=n(79904),V=n(39031),H=n(99677),F=n(85995),W=n(40713),z=n(31718),j=n(16155),Y=n(21262),$=n(71440),K=n(9122);function J(){var e=(0,Y._)(["\n  query GetRagAuthorization($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        authorizations {\n          useRag {\n            isAuthorized\n            code\n            message\n          }\n        }\n      }\n    }\n  }\n"]);return J=function(){return e},e}var Q={},ee=(0,$.Ps)(J()),et=n(14118),en=n(35177),er="rag-preference",eo=(0,x.X)({root:[v.gU.listItem,T.l0.p(4),T.l0.colWithGap(2)],content:[T.l0.rowWithGap(8),T.l0.align.center],left:[T.l0.flex.growAndShrink(1),T.l0.rowWithGap(4),T.l0.align.center,{fontSize:T.TV.fontSizeSmall}],warning:[{color:T.TV.accentNegativeDefault}],dir:[{opacity:.6},T.l0.flex.shrink(100)]});function ei(e){var t=e.path,n=e.highlighted,r=e.ranges,o=e.status,i=n?{backgroundColor:v.vb.interactiveBackgroundActive}:void 0,l=o?({included:(0,d.tZ)(C.Z,{}),overflowing:(0,d.tZ)(E.Z,{}),truncated:(0,d.tZ)(E.Z,{}),unsupported:(0,d.tZ)(E.Z,{})})[o]:null,a=(0,L.Q1)({path:t,ranges:null!=r?r:[]}),c=a.directory,s=a.filename,u=c&&c.text.split("/"),f=u&&u.length>2?"".concat(u[0],"/.../").concat(u[u.length-1],"/"):c&&c.text+"/";return(0,d.tZ)(M.u,{maxWidth:600,closeDelay:"none",tooltip:t,children:(0,d.BX)(y.G,{css:eo.root,style:i,children:[(0,d.BX)(y.G,{css:eo.content,style:i,children:[(0,d.BX)(y.G,{css:eo.left,style:i,children:[(0,d.tZ)(m.Z,{path:t,size:16}),(0,d.tZ)(h.x,{text:s.text,highlight:s.ranges,dimmed:!n}),c?(0,d.tZ)(y.G,{color:"dimmest",css:eo.dir,children:(0,d.tZ)(h.x,{text:f||"",highlight:c.ranges,dimmed:!n})}):null]}),(0,d.tZ)(M.u,{tooltip:"File not supported",isDisabled:"unsupported"!==o,children:l})]}),"overflowing"===o||"truncated"===o?(0,d.tZ)(Z.xv,{css:eo.warning,variant:"small",children:"Exceeds file memory"}):null]})})}var el=(0,p.$)(["iconColor","placeholderColor","itemTransform","inputBorderRadius","inputBorder"]),ea=el.cssVars,ec=el.styleTokens,es=(0,x.X)({root:[T.l0.width(240),T.l0.maxHeight(200),T.l0.display.flex],inputRow:[T.l0.position.relative,(o={},(0,l._)(o,ea.iconColor,T.TV.foregroundDimmest),(0,l._)(o,ea.placeholderColor,T.TV.foregroundDimmer),(0,l._)(o,":focus-within, :hover",(r={},(0,l._)(r,ea.iconColor,T.TV.foregroundDimmer),(0,l._)(r,ea.placeholderColor,T.TV.foregroundDimmest),r)),o)],searchIcon:[T.l0.pl(6),T.l0.coverContainer,T.l0.align.start,T.l0.justify.center,{color:ec.iconColor,pointerEvents:"none"}],input:[v.gU.nofill,T.l0.p(4),T.l0.pl(24),{borderRadius:ec.inputBorderRadius,fontSize:T.TV.fontSizeSmall,margin:"-1px -1px 0",cursor:"text","::placeholder":{color:ec.placeholderColor},"@media (hover: hover)":{":not([disabled]):focus":{outline:"0 none"}}}],header:[T.l0.rowWithGap(2),T.l0.px(4),T.l0.height(24),T.l0.align.center,T.l0.display.flex,T.l0.justify.spaceBetween],selectionButton:[T.l0.reset.button,v.gU.nofill,T.l0.p(2),{fontSize:T.TV.fontSizeSmall}],menu:[T.l0.flex.growAndShrink(1),{overflow:"auto"}],item:[{transform:ec.itemTransform,position:"absolute",top:0,left:0,width:"100%"}],aiContext:[T.l0.flex.row,T.l0.justify.spaceBetween,T.l0.px(6),T.l0.py(2),T.l0.align.center],aiContextCheckboxContainer:[T.l0.rowWithGap(8),T.l0.py(4),T.l0.pl(6),T.l0.align.center,T.l0.backgroundColor.blurpleDimmest,T.l0.color.blurpleStrongest],aiContextCheckbox:[{scale:"0.85"}],aiContextUpsell:[T.l0.rowWithGap(8),T.l0.py(4),T.l0.pl(6),T.l0.align.center,T.l0.backgroundColor.yellowDimmest,T.l0.color.yellowStrongest,v.gU.listItem]});function eu(e,t){return t.status&&!e.status?1:e.status&&!t.status?-1:"included"===t.status&&"included"!==e.status?1:"included"===e.status&&"included"!==t.status?-1:0}function ed(e){var t,n,r,o,h,p,v,m,b,x,C=e.fileContextInclusions,w=e.placement,I=void 0===w?"bottom":w,D=e.findFiles,X=e.overscan,L=e.onChange,N=e.unSelectAllFiles,O=e.selectAllFiles,U=e.useRag,q=e.setUseRag,Y=e.updatePopperPositionRef,$=(0,R.useRef)(null),J=(0,s._)((0,R.useState)(""),2),eo=J[0],el=J[1],ec=(0,s._)((0,R.useState)(!1),2),ed=ec[0],ef=ec[1],eh=(0,W.Lw)(),ep=(r=(n=(0,s._)((0,R.useState)({loading:!0,error:null,items:null}),2))[0],o=n[1],(h=(0,R.useRef)(null)).current||(h.current=(0,G.Z)((t=(0,i._)(function(e){var t;return(0,u.Jh)(this,function(n){switch(n.label){case 0:return[4,D(e)];case 1:return t=n.sent(),(0,R.startTransition)(function(){o(null!==t.error?{error:t.error,loading:!1,items:null}:{items:t.files,total:t.total,error:null,loading:!1})}),[2]}})}),function(e){return t.apply(this,arguments)}),{wait:40})),p=(0,R.useCallback)(function(e){var t;return null===(t=h.current)||void 0===t?void 0:t.call(h,e).catch(function(){})},[]),(0,R.useEffect)(function(){return p(""),function(){try{var e;null===(e=h.current)||void 0===e||e.cancel()}catch(e){}}},[p]),{files:r.items,loading:r.loading,error:r.error,total:r.total,update:p}),ev=ep.files,em=ep.total,eg=ep.loading,eb=ep.error,eZ=ep.update,ey=en.Z.get(er,"boolean"),ex=(0,R.useRef)(null),eC=(0,B.Z)(eo),ew=(0,R.useMemo)(function(){var e=new Map(C.map(function(e){return[e.path,e.inclusionStatus]})),t=null==ev?void 0:ev.map(function(t){var n=t.path;return{path:n,ranges:t.ranges,status:e.get(n)}});if(!t)return null;if(ex.current&&!eC.current)return(0,P.Z)(t,{existing:ex.current,getKey:function(e){return e.path}});if(eC.current)return t;var n=t.sort(eu);return ex.current=n,n},[ev,C,eC]),eS=(0,R.useMemo)(function(){var e;return null!==(e=null==ew?void 0:ew.filter(function(e){return e.status}))&&void 0!==e?e:[]},[ew]);(0,R.useEffect)(function(){if(!eg){var e;null===(e=Y.current)||void 0===e||e.call(Y)}},[eg,Y]);var e_=(0,k.Kb)({inputValue:eo,items:null!=ew?ew:[],isOpen:!0,defaultHighlightedIndex:0,stateReducer:function(e,t){var n=t.changes;switch(t.type){case k.Kb.stateChangeTypes.InputKeyDownEnter:case k.Kb.stateChangeTypes.ItemClick:return(0,A.Uy)(n,function(t){t.highlightedIndex=e.highlightedIndex});default:return n}},onHighlightedIndexChange:function(e){void 0!==e.highlightedIndex&&-1!==e.highlightedIndex&&eT.getVirtualItems()[e.highlightedIndex]&&eT.scrollToIndex(e.highlightedIndex)},onStateChange:function(e){switch(e.type){case k.Kb.stateChangeTypes.InputKeyDownEnter:case k.Kb.stateChangeTypes.ItemClick:if(!e.selectedItem)break;var t,n,r,o=eS.includes(e.selectedItem)?"exclude":"include";L({path:e.selectedItem.path,preference:o}),null===(r=$.current)||void 0===r||r.select();break;case k.Kb.stateChangeTypes.InputChange:el(null!==(t=e.inputValue)&&void 0!==t?t:""),eZ(null!==(n=e.inputValue)&&void 0!==n?n:"")}}}),eE=(0,R.useRef)(null),eT=(0,f.MG)({count:null!==(x=null==ew?void 0:ew.length)&&void 0!==x?x:0,getScrollElement:function(){return eE.current},estimateSize:function(){return 32},getItemKey:function(e){var t,n;return null!==(n=null==ew?void 0:null===(t=ew[e])||void 0===t?void 0:t.path)&&void 0!==n?n:""},overscan:void 0===X?4:X}),ek=(0,d.BX)(y.G,{css:es.inputRow,children:[(0,d.tZ)(y.G,{css:es.searchIcon,children:eg?(0,d.tZ)(S.Z,{size:12}):(0,d.tZ)(_.Z,{size:12})}),(0,d.tZ)("input",(0,a._)({autoFocus:!0,placeholder:"Search files",css:es.input},e_.getInputProps({ref:$})))]}),eA="top"===I?"0 0 ".concat(T.TV.space4," ").concat(T.TV.space4):"".concat(T.TV.space4," ").concat(T.TV.space4," 0 0");!eg||(null==ew?void 0:ew.length)||(eA=T.TV.space4);var eR=(v={variables:{replId:(0,j.Z)()}},m=(0,a._)({},Q,v),K.a(ee,m)).data,eI=(null==eR?void 0:null===(b=eR.repl)||void 0===b?void 0:b.__typename)==="Repl"&&eR.repl.authorizations.useRag.isAuthorized,eG=(0,et.P5)({controlName:"flag-richard-whittington"}),eD=eI&&eG;return(0,R.useEffect)(function(){eD&&q(null===ey||ey)},[eD,ey,q]),(0,d.BX)(y.G,{css:es.root,style:(0,l._)({},ea.inputBorderRadius,eA),children:["bottom"===I?ek:null,eD?(0,d.BX)(y.G,{css:es.aiContext,children:[(0,d.tZ)(Z.xv,{css:T.l0.fontWeight.medium,children:"AI Context"}),(0,d.tZ)(M.u,{tooltip:"Manage what the AI can read to decide how to respond to your messages here.",children:(0,d.tZ)(V.Z,{})})]}):null,eh&&eD?(0,d.BX)(y.G,{css:es.aiContextCheckboxContainer,children:[(0,d.tZ)(z.X,{checked:U,onChange:function(){q(function(e){return en.Z.set(er,!e),!e})},name:"AI Context",css:es.aiContextCheckbox}),(0,d.tZ)(Z.xv,{variant:"small",css:T.l0.fontWeight.normal,children:"AI codebase knowledge"})]}):null,!eh&&eD?(0,d.BX)(y.G,{onClick:function(){return ef(!0)},css:es.aiContextUpsell,children:[(0,d.tZ)(H.Z,{}),(0,d.tZ)(Z.xv,{variant:"small",css:T.l0.fontWeight.normal,children:"Activate AI codebase knowledge"})]}):null,eb?(0,d.tZ)(g.E,{icon:(0,d.tZ)(E.Z,{}),text:eb}):null,void 0!==em?(0,d.BX)(y.G,{css:es.header,style:"bottom"===I?{borderTop:"1px solid "+T.TV.outlineDimmer}:void 0,children:[(0,d.tZ)(Z.xv,{variant:"small",color:"dimmest",children:"".concat(C.length,"/").concat(em," selected")}),C.length?(0,d.tZ)(y.G,{tag:"button",css:es.selectionButton,onClick:function(){return function(){var e=[],t=!0,n=!1,r=void 0;try{for(var o,i=(null!=ev?ev:[])[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var l=o.value;e.push(l.path)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}N({paths:e})}()},children:"Unselect All"}):(0,d.tZ)(y.G,{tag:"button",css:es.selectionButton,onClick:function(){return function(){var e=[],t=!0,n=!1,r=void 0;try{for(var o,i=(null!=ev?ev:[])[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var l=o.value;e.push(l.path)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}O({paths:e})}()},children:"Select All"})]}):null,(0,d.tZ)("div",(0,c._)((0,a._)({style:"top"===I?{borderBottom:"1px solid "+T.TV.outlineDimmer}:void 0,css:es.menu},e_.getMenuProps({ref:eE})),{children:(0,d.tZ)("div",{style:{height:"".concat(eT.getTotalSize(),"px"),width:"100%",position:"relative"},children:eT.getVirtualItems().map(function(e){var t=e.index,n=e.key,r=e.start,o=null==ew?void 0:ew[t];return o?(0,d.tZ)(y.G,(0,c._)((0,a._)({"data-index":t,css:es.item,style:(0,l._)({},ea.itemTransform,"translateY(".concat(r,"px)"))},e_.getItemProps({item:o,index:t,refKey:"innerRef",ref:eT.measureElement})),{"aria-selected":void 0!==o.status,children:(0,d.tZ)(ei,{highlighted:t===e_.highlightedIndex,path:o.path,ranges:o.ranges,status:o.status})}),n):null})})})),"top"===I?ek:null,(0,d.tZ)(F.Z,{isOpen:ed,onClose:function(){ef(!1)},type:"purchase",analyticsContext:{upgrade:{context:"ai_context_menu",surface:"ghostwriter_power_up_dialog"}}})]})}var ef=(0,x.X)({button:[T.l0.height(24),T.l0.reset.button,T.l0.align.center,T.l0.cursor.pointer,T.l0.px(4),T.l0.py(2),T.l0.rowWithGap(4),v.gU.nofill,T.l0.color.foregroundDimmest,{"&:hover":T.l0.color.foregroundDefault}]});function eh(e){var t,n=(0,s._)((0,R.useState)(!1),2),r=n[0],o=n[1],i=(0,s._)((0,R.useState)(null),2),l=i[0],u=i[1],f=(0,s._)((0,R.useState)(null),2),h=f[0],p=f[1];(0,R.useEffect)(function(){var e=function(e){"Escape"===e.key&&o(!1)};if(r)return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}},[r]);var v=(0,I.D)(l,h,{modifiers:[{name:"offset",options:{offset:[0,4]}},{name:"preventOverflow",options:{padding:16}}],placement:e.isInMobileWorkspace?"top-start":"bottom-start"}),m=(0,R.useCallback)(function(){v.update&&v.update()},[v]),g=(0,R.useRef)(m);(0,R.useEffect)(function(){g.current=m},[m]);var Z=e.fileContextInclusions,y=e.findFiles,x="Context",C=Z.filter(function(e){return"included"===e.inclusionStatus});C.length&&(x=1===C.length?(0,D.UO)(C[0].path):C.length+" files");var S=(0,R.useId)();return(0,d.BX)(O.bF,{children:[(0,d.tZ)(q.zx,{css:ef.button,ref:u,onClick:function(){return o(function(e){return!e})},"aria-label":"Select files","aria-haspopup":!0,"aria-expanded":r,"aria-controls":S,size:"small",iconLeft:(0,d.tZ)(w.Z,{}),iconRight:(0,d.tZ)(X.Z,{rotate:r?180:0,size:12}),text:x}),(0,d.tZ)(U.J,{isOpen:r,shouldCloseOnInteractOutside:function(e){var t;return t=[h,l],!(e instanceof Node&&t.some(function(t){return null==t?void 0:t.contains(e)}))&&(o(!1),!0)},isKeyboardDismissDisabled:!0,children:(0,d.tZ)(b.Tg,(0,c._)((0,a._)({id:S,elevated:!0,style:v.styles.popper,innerRef:p,css:N.popover},v.attributes.popper),{children:(0,d.tZ)(ed,{overscan:e.overscan,onChange:e.onChange,unSelectAllFiles:e.unSelectAll,selectAllFiles:e.selectAll,findFiles:y,fileContextInclusions:Z,placement:(null===(t=v.state)||void 0===t?void 0:t.placement.startsWith("top"))?"top":"bottom",useRag:e.useRag,setUseRag:e.setUseRag,updatePopperPositionRef:g})}))})]})}},47305:function(e,t,n){n.d(t,{Dz:function(){return _},HC:function(){return w},NK:function(){return g},Pr:function(){return E},ZA:function(){return b},gg:function(){return Z}});var r=n(41733),o=n(30509),i=n(98924),l=n(3796),a=n(26996),c=n(23802),s=n(95501),u=n(63411),d=n(40713),f=n(93245),h=n(36809),p=n(63163),v=n(24766),m=new Map([[d.BY.BASIC,u.Z],[d.BY.ADVANCED,s.Z]]),g=new Map([[d.BY.BASIC,"Basic"],[d.BY.ADVANCED,"Advanced"]]);function b(e){var t=e.model,n=(0,i._)(e,["model"]),o=m.get(t);return o?(0,l.tZ)(o,(0,r._)({},n)):null}function Z(e){var t=e.model,n=e.icon,i=e.text,a=m.get("string"==typeof t?d.BY.ADVANCED:t),c="string"==typeof t?t:g.get(t);return a&&c?(0,l.BX)(f.G,{css:S.iconLabel,children:[(0,l.tZ)(a,(0,r._)({},n)),(0,l.tZ)(v.xv,(0,o._)((0,r._)({},i),{children:c}))]}):null}var y=new Map([[d.$h.GENERATE,c.Z],[d.$h.TRANSFORM,c.Z],[d.$h.EXPLAIN,a.Z],[d.$h.REPLIT_DOCS,a.Z]]),x=new Map([[d.$h.GENERATE,"Generate"],[d.$h.TRANSFORM,"Modify"],[d.$h.EXPLAIN,"Explain"],[d.$h.REPLIT_DOCS,"Ask replit.com"]]),C=new Map([[d.G_.GENERATE_CODE,c.Z],[d.G_.TRANSFORM_CODE,c.Z],[d.G_.EXPLAIN_CODE,a.Z],[d.G_.DEBUGGER,a.Z]]),w=new Map([[d.G_.GENERATE_CODE,"Generate"],[d.G_.TRANSFORM_CODE,"Modify"],[d.G_.EXPLAIN_CODE,"Explain"],[d.G_.DEBUGGER,"Debug"]]),S=(0,h.X)({iconLabel:[p.l0.rowWithGap(4),p.l0.align.center]});function _(e){var t=e.intent,n=e.icon,i=e.text,a=y.get(t),c=x.get(t);return a&&c?(0,l.BX)(f.G,{css:S.iconLabel,children:[(0,l.tZ)(a,(0,r._)({},n)),(0,l.tZ)(v.xv,(0,o._)((0,r._)({},i),{children:c}))]}):null}function E(e){var t=e.type,n=e.icon,i=e.text,a=C.get(t),c=w.get(t);return a&&c?(0,l.BX)(f.G,{css:S.iconLabel,children:[(0,l.tZ)(a,(0,r._)({},n)),(0,l.tZ)(v.xv,(0,o._)((0,r._)({},i),{children:c}))]}):null}},82231:function(e,t,n){n.d(t,{_l:function(){return ea},M4:function(){return W},JG:function(){return er},UE:function(){return z}});var r=n(27387),o=n(42516),i=n(41733),l=n(30509),a=n(66626),c=n(96583),s=n(3796),u=n(38935),d=n(75271),f=n(71253),h=n(66164),p=n(25462),v=n(13387),m=n(12623),g=n(87915),b=n(14548),Z=n(24766),y=n(93245),x=n(36809),C=n(63163),w=n(62279),S=n(96949),_=n(79904),E=n(23522),T=n(22419),k=n(78272),A=n(918),R=n(55649),I=(0,w.F4)({"0%":{opacity:0,transform:"translateX(8px)"},"10%":{opacity:1,transform:"translateX(0)"},"95%":{opacity:1},"100%":{opacity:0}}),G=(0,x.X)({buttonContainer:[C.l0.position.relative,{transition:"opacity 75ms linear",opacity:1}],buttonWrapper:[C.l0.flex.row],button:[C.l0.backgroundColor.backgroundDefault],buttonToast:{position:"absolute",display:"block",bottom:"100%",paddingBottom:C.TV.space4,paddingRight:C.TV.space8,animation:"".concat(I," 3s"),fontFamily:C.TV.fontFamilyDefault,fontSize:C.TV.fontSizeDefault,whiteSpace:"nowrap",userSelect:"none"}}),D=function(e){var t=e.code,n=e.language;return(0,s.tZ)("div",{css:G.buttonContainer,children:(0,s.tZ)(E.q,{text:"Copy",css:G.button,size:"small",textToCopy:t,tooltipPlacement:"bottom",onCopy:function(){(0,S.j)(S.U3.AI_CHAT_EVENT,{action:"code_copied",intent_type:null,model:null,user_model_selection:null,message_content:t,message_source:"chat_pane"}),(0,S.j)(S.U3.GHOSTWRITER_CHAT_CODE_COPIED,{language:n})}})})},B=function(e){var t=e.code,n=e.disabled,r=e.insertCode,o=(0,a._)((0,d.useState)(!1),2),i=o[0],l=o[1],c=(0,s.tZ)(_.zx,{css:G.button,text:"Insert",disabled:n,size:"small",iconLeft:(0,s.tZ)(R.Z,{}),onClick:function(){r&&((0,S.j)(S.U3.AI_CHAT_EVENT,{action:"code_inserted",intent_type:null,model:null,user_model_selection:null,message_content:t,message_source:"chat_pane"}),r(t),l(!0))}});return(0,s.BX)("div",{css:G.buttonContainer,children:[i?(0,s.tZ)("span",{css:G.buttonToast,onAnimationEnd:function(){requestAnimationFrame(function(){l(!1)})},"aria-hidden":!0,children:"Inserted!"}):null,(0,s.tZ)(T.u,{placement:"bottom",tooltip:n?"Place cursor in a file to insert code":"Insert code at cursor position",children:c})]})},P=function(e){var t=e.code,n=e.revertCodeInsert,r=(0,a._)((0,d.useState)(!1),2),o=r[0],i=r[1],l=(0,s.tZ)(_.zx,{css:G.button,text:"Revert",size:"small",iconLeft:(0,s.tZ)(A.Z,{}),onClick:function(){(0,S.j)(S.U3.AI_CHAT_EVENT,{action:"code_reverted",intent_type:null,model:null,user_model_selection:null,message_content:t,message_source:"chat_pane"}),n(),i(!0)}});return(0,s.BX)("div",{css:G.buttonContainer,children:[o?(0,s.tZ)("span",{css:G.buttonToast,onAnimationEnd:function(){requestAnimationFrame(function(){i(!1)})},"aria-hidden":!0,children:"Reverting..."}):null,(0,s.tZ)(T.u,{placement:"bottom",tooltip:"Revert code insertion",children:l})]})},X=function(e){var t=e.onRunClicked;return(0,s.tZ)("div",{css:G.buttonContainer,children:(0,s.tZ)(_.zx,{css:G.button,text:"Run",size:"small",disabled:!t,iconLeft:(0,s.tZ)(k.Z,{}),onClick:null!=t?t:function(){}})})},L=n(53250),N=n(14118),M=n(67827),O=n(40713),U=n(25414),q=n(42965),V=n(37475),H=n(25722),F=n(10578),W=(0,d.memo)(function(e){var t=(0,O.Ti)(e.id);return(null==t?void 0:t.content)||e.state===O.he.COMPLETE?(null==t?void 0:t.$kind)==="messageEventContents"||(null==t?void 0:t.$kind)==="inlineActionEventContents"?(0,s.tZ)(er,{text:t.content||"",codeComponent:e.markdownCodeComponent,messageState:e.state,disableAnchorTags:e.disableAnchorTags}):null:(0,s.tZ)(F.Z,{})});function z(e){var t=e.eventId,n=e.openFile,r=e.onStartLocalShellExecution;return(0,d.useMemo)(function(){if(n)return function(e){return(0,s.tZ)(ea,(0,l._)((0,i._)({},e),{eventId:t,openFile:n,onStartLocalShellExecution:r}))}},[t,n,r])}var j=[p.Z,h.Z,f.Z],Y=[],$=function(e){return(0,s.tZ)(y.G,{children:(0,s.tZ)(Z.xv,{children:e.children})})},K=function(e){return(0,s.tZ)(y.G,{children:(0,s.tZ)(Z.xv,{children:(0,s.tZ)(J,{children:e.children})})})},J=function(e){var t=e.children;return t?(0,s.tZ)(s.HY,{children:t.map(function(e,t){return e&&"string"==typeof e?e.split(/(\s+)/).map(function(e,n){return(0,s.tZ)("span",{css:ei.fadeInAnimation,children:e},"".concat(t,"-").concat(n))}):(0,s.tZ)("span",{children:e},"".concat(t,"-0"))})}):null},Q=function(e){return(0,s.tZ)("span",{css:ei.anchorReplacement,children:e.children})},ee=function(e){return(0,s.tZ)("input",(0,i._)({disabled:!0},e))},et={h1:$,h2:$,h3:$,h4:$,h5:$,h6:$,input:ee},en={h1:K,h2:K,h3:K,h4:K,h5:K,h6:K,p:function(e){return(0,s.tZ)("p",{children:(0,s.tZ)(J,{children:e.children})})},li:function(e){return(0,s.tZ)("li",{children:(0,s.tZ)(J,{children:e.children})})},strong:function(e){return(0,s.tZ)("strong",{children:(0,s.tZ)(J,{children:e.children})})},input:ee},er=(0,d.memo)(function(e){var t=e.text,n=e.codeComponent,r=e.messageState,o=e.disableAnchorTags,l=n?{code:n}:void 0,a=o?{a:Q}:void 0,c=(0,q.T3)();return(0,s.tZ)(u.ZP,{css:r===O.he.COMPLETE||c?void 0:ei.codeViewerSpanFadeIn,remarkPlugins:j,rehypePlugins:Y,components:r===O.he.COMPLETE||c?(0,i._)({},et,l,a):(0,i._)({},en,l,a),lineBreaks:!0,themed:!0,children:t})}),eo=(0,x.X)({styles0:[C.l0.pl(4),C.l0.fontSize(12),C.l0.color.foregroundDimmer]}),ei=(0,x.X)({root:[C.l0.borderRadius(4),C.l0.border({color:C.TV.outlineDimmest})],header:[C.l0.rowWithGap(8),C.l0.border({color:C.TV.outlineDimmest,direction:"bottom"}),{fontFamily:C.TV.fontFamilyDefault,userSelect:"none"}],headerLeft:[C.l0.rowWithGap(0),C.l0.pl(4),C.l0.flex.growAndShrink(1),C.l0.align.center],headerRight:[C.l0.rowWithGap(0),{"& button":{borderRadius:0},"& > div:last-of-type button":{borderTopRightRadius:4}}],code:[C.l0.p(4)],fadeInAnimation:[{"@keyframes fade-in-animation":{from:{opacity:0},to:{opacity:1}},animation:"fade-in-animation 600ms linear"}],codeViewerSpanFadeIn:(0,o._)({},"& .".concat(L.w),{"@keyframes replit-ai-code-fade-in":{from:{opacity:0},to:{opacity:1}},animation:"replit-ai-code-fade-in 600ms linear"}),anchorReplacement:[C.l0.fontWeight.bold]}),el=new Set(["bash","sh","shell"]),ea=function(e){var t=(0,m.F)(e.className),n=t&&function(e){switch(e){case"crystal":return"main.cr";case"python":case"py":return"main.py";case"sh":case"fish":case"zsh":case"bash":return"main.sh";case"javascript":case"js":return"index.js";case"typescript":case"ts":return"index.ts";case"csharp":case"cs":return"main.cs";case"java":return"Main.java";case"go":return"main.go";case"ruby":case"rb":return"main.rb";case"php":return"main.php";case"rust":return"main.rs";case"swift":return"main.swift";case"kotlin":return"main.kt";case"scala":return"main.scala";case"c":return"main.c";case"cpp":case"c++":return"main.cpp";case"dart":return"main.dart";case"elixir":return"main.ex";case"haskell":return"Main.hs";case"lua":return"main.lua";case"perl":return"main.pl";case"r":return"main.r";case"sql":return"main.sql";case"ocaml":return"main.ml";case"html":return"index.html";case"json":return"main.json";case"css":return"main.css";default:return}}(t),o=n?v.$R.from(n):void 0,l=null==o?void 0:o.name,a=String(e.children).trimEnd(),u=(0,V.iM)(),d=(0,N.P5)({controlName:"flag-pid2-shell-in-ai-chat",logFlagToAnalytics:!1}),f=u&&d&&t&&el.has(t)&&void 0!==e.eventId&&void 0!==e.onStartLocalShellExecution,h=(0,M.U)(function(t){return function(){function n(){return(n=(0,r._)(function(){var n,r;return(0,c.Jh)(this,function(o){switch(o.label){case 0:if(!e.onStartLocalShellExecution||!e.eventId)return[2];return n=a,[4,t.shellExec.spawn.rpc({cmd:"bash",args:["-ci",n]})];case 1:return(r=o.sent()).ok?e.onStartLocalShellExecution({command:n,parentEventId:e.eventId,channelName:r.payload.id}):H.$e(function(e){e.setTag("service","pid2-shell-in-ai-chat"),H.Tb(r.payload)}),[2]}})})).apply(this,arguments)}!function(){n.apply(this,arguments)}()}},[e,a]);return e.inline?(0,s.tZ)(m.Z,(0,i._)({},e)):(0,s.BX)(b.Tg,{css:ei.root,children:[(0,s.BX)(y.G,{css:ei.header,children:[(0,s.BX)(y.G,{css:ei.headerLeft,children:[n?(0,s.tZ)(g.Z,{size:12,path:n}):null,l?(0,s.tZ)(Z.xv,{multiline:!1,css:eo.styles0,children:l}):null]}),(0,s.BX)(y.G,{css:ei.headerRight,children:[(0,s.tZ)(D,{code:a,language:t}),(0,s.tZ)(ec,{code:a}),f?(0,s.tZ)(X,{onRunClicked:h}):null]})]}),(0,s.tZ)(y.G,{css:ei.code,children:(0,s.tZ)(L.Z,{code:a,language:t})})]})},ec=function(e){var t=e.code,n=(0,a._)((0,d.useState)(!1),2),r=n[0],o=n[1],i=(0,U.he)();if(!i)return null;var l=i.insert,c=i.revert;return r?r&&c?(0,s.tZ)(P,{code:t,revertCodeInsert:function(){o(!1),c()}}):null:(0,s.tZ)(B,{disabled:!1,code:t,insertCode:function(){o(!0),null==l||l(t)}})}},7122:function(e,t,n){n.d(t,{NA:function(){return f}});var r=n(41733),o=n(21262),i=n(71440),l=n(9122);function a(){var e=(0,o._)(["\n  fragment AiChatMessageUser on User {\n    id\n    username\n    fullName\n    image\n    url\n  }\n"]);return a=function(){return e},e}function c(){var e=(0,o._)(["\n  query AiChatMessageUserData($id: Int!) {\n    user(id: $id) {\n      ...AiChatMessageUser\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var s={},u=(0,i.Ps)(a()),d=(0,i.Ps)(c(),u);function f(e){var t=(0,r._)({},s,e);return l.a(d,t)}},67465:function(e,t,n){n.d(t,{Y:function(){return u}});var r=n(3796),o=n(6065),i=n(93245),l=n(24766),a=n(7122),c=n(63163),s=(0,n(36809).X)({root:[c.l0.rowWithGap(8),c.l0.align.center]});function u(e){var t,n,c,u,d,f,h,p=(0,a.NA)({variables:{id:e.id}}).data,v=null==p?void 0:p.user;return e.showAvatarOnly?(0,r.tZ)(o.q,{size:24,username:null!==(t=null==v?void 0:v.username)&&void 0!==t?t:"",fullName:null!==(n=null==v?void 0:v.fullName)&&void 0!==n?n:"",src:null!==(c=null==v?void 0:v.image)&&void 0!==c?c:""}):(0,r.BX)(i.G,{css:s.root,children:[(0,r.tZ)(o.q,{size:24,username:null!==(u=null==v?void 0:v.username)&&void 0!==u?u:"",fullName:null!==(d=null==v?void 0:v.fullName)&&void 0!==d?d:"",src:null!==(f=null==v?void 0:v.image)&&void 0!==f?f:""}),(0,r.tZ)(l.xv,{variant:"small",color:"dimmer",children:null!==(h=null==v?void 0:v.username)&&void 0!==h?h:""})]})}},52551:function(e,t,n){n.d(t,{LE:function(){return z},LX:function(){return U},cF:function(){return I},cv:function(){return O},q2:function(){return j}});var r=n(66626),o=n(63257),i=n(3796),l=n(40713),a=n(79904),c=n(68220),s=n(86466),u=n(46321),d=n(379),f=n(14548),h=n(24766),p=n(93245),v=n(36809),m=n(63411),g=n(27840),b=n(82549),Z=n(95501),y=n(99677),x=n(63163),C=n(47305),w=n(75271),S=n(44794),_=n(21882),E=n(89253),T=n(65958),k=n(47483),A=n(87387),R=(0,v.X)({root:[x.l0.rowWithGap(8),x.l0.align.center],left:[x.l0.rowWithGap(2),x.l0.flex.grow(1)],right:[x.l0.width("50%")],rightInline:[x.l0.minWidth(24)],bar:[x.l0.height(6)]});function I(e){var t=e.total-e.used,n=Math.max(0,Math.min(100,Math.round(t/e.total*100)));return(0,i.BX)(p.G,{css:R.root,children:[(0,i.tZ)(p.G,{css:R.left,children:e.used===e.total?(0,i.tZ)(h.xv,{variant:"small",color:"dimmest",children:"No quota left"}):(0,i.BX)(i.HY,{children:[(0,i.BX)(h.xv,{variant:"small",children:[n,"%"]}),(0,i.tZ)(h.xv,{variant:"small",color:"dimmest",children:"left"})]})}),(0,i.tZ)(p.G,{css:e.inline?R.rightInline:R.right,children:(0,i.tZ)(u.J,{css:R.bar,tooltipHidden:!0,current:t,total:e.total,color:x.TV.blurpleDefault})})]})}var G=(0,v.X)({root:[x.l0.rowWithGap(4),x.l0.align.center],title:[{fontFamily:x.TV.fontWeightMedium},x.l0.color.foregroundDefault]});function D(e){return(0,i.BX)(p.G,{css:G.root,children:[e.icon,(0,i.tZ)(h.xv,{css:G.title,variant:"small",children:e.title})]})}var B=(0,v.X)({root:[x.l0.px(8),x.l0.py(6),x.l0.colWithGap(4),x.l0.height(26),x.l0.justify.center],content:[x.l0.colWithGap(0)],header:[x.l0.align.center,x.l0.rowWithGap(4),x.l0.color.foregroundDimmer],headerLeft:[x.l0.rowWithGap(4),x.l0.align.center,x.l0.flex.growAndShrink(1)],pill:[x.l0.borderRadius(4),x.l0.height(16)]}),P=(0,v.X)({root:[x.l0.px(8),x.l0.py(12),x.l0.colWithGap(4)]});function X(){return(0,i.tZ)(d.D,{colorway:"yellow",css:B.pill,text:A.we})}function L(e){var t=e.modelName,n=e.selected;return(0,i.tZ)(p.G,{css:B.root,children:(0,i.tZ)(p.G,{css:B.content,children:(0,i.BX)(p.G,{css:B.header,children:[(0,i.tZ)(p.G,{css:B.headerLeft,children:(0,i.tZ)(D,{icon:(0,i.tZ)(m.Z,{size:12}),title:"Basic (".concat(t,")")})}),n?(0,i.tZ)(g.Z,{}):null]})})})}function N(e){var t=e.hasAccessToAdvancedModel,n=e.modelName,r=e.selected;return(0,i.tZ)(p.G,{css:B.root,children:(0,i.tZ)(p.G,{css:B.content,children:(0,i.BX)(p.G,{css:B.header,children:[(0,i.BX)(p.G,{css:B.headerLeft,children:[(0,i.tZ)(D,{icon:(0,i.tZ)(Z.Z,{size:12}),title:"Advanced (".concat(n,")")}),t?null:(0,i.tZ)(X,{})]}),r?(0,i.tZ)(g.Z,{}):null]})})})}function M(e){var t=e.hasAccessToAdvancedModel,n=e.modelName,r=e.selected;return null==n?null:(0,i.tZ)(p.G,{css:B.root,children:(0,i.tZ)(p.G,{css:B.content,children:(0,i.BX)(p.G,{css:B.header,children:[(0,i.BX)(p.G,{css:B.headerLeft,children:[(0,i.tZ)(D,{icon:(0,i.tZ)(y.Z,{size:12}),title:"Advanced (".concat(n,")")}),t?(0,i.tZ)(d.D,{css:B.pill,text:"Beta"}):(0,i.tZ)(X,{})]}),r?(0,i.tZ)(g.Z,{}):null]})})})}function O(e){var t=e.selected,n=e.quota,r=e.hasAccessToAdvancedModel;return(0,i.BX)(p.G,{css:P.root,children:[(0,i.BX)(p.G,{css:B.content,children:[(0,i.BX)(p.G,{css:B.header,children:[(0,i.tZ)(p.G,{css:B.headerLeft,children:(0,i.tZ)(D,{icon:(0,i.tZ)(m.Z,{size:12}),title:"Basic"})}),t?(0,i.tZ)(g.Z,{}):null]}),(0,i.tZ)(h.xv,{variant:"small",color:"dimmer",children:"Faster. For common tasks like writing boilerplate code or reformatting data."})]}),r?(0,i.BX)(h.xv,{variant:"small",color:"dimmer",children:["Unlimited for ",A.we]}):(0,i.tZ)(I,{used:n.used,total:n.total})]})}function U(e){var t=e.hasAccessToAdvancedModel,n=e.selected,r=e.quota,o=e.onUpgrade,l=(0,i.BX)(i.HY,{children:[(0,i.tZ)(p.G,{css:B.content,children:(0,i.BX)(p.G,{css:B.header,children:[(0,i.BX)(p.G,{css:B.headerLeft,children:[(0,i.tZ)(D,{icon:(0,i.tZ)(Z.Z,{size:12}),title:"Advanced"}),t?null:(0,i.tZ)(d.D,{css:B.pill,text:A.we,color:x.TV.foregroundDimmer})]}),n?(0,i.tZ)(g.Z,{}):null]})}),(0,i.tZ)(h.xv,{variant:"small",color:"dimmer",children:"For complex code generation, editing, and explanation. Limited amount per week."})]});return t?(0,i.BX)(p.G,{css:P.root,children:[l,(0,i.tZ)(I,{used:r.used,total:r.total})]}):(0,i.BX)(p.G,{css:P.root,children:[l,o?(0,i.tZ)(a.zx,{size:"small",text:"Upgrade to Replit ".concat(A.we),colorway:"blurple",onClick:function(){return o()}}):(0,i.tZ)(p.G,{css:q.fakeUpgradeButton,children:(0,i.BX)(h.xv,{variant:"small",children:["Upgrade to Replit ",A.we]})})]})}var q=(0,v.X)({label:x.l0.visuallyHidden,button:[x.l0.reset.button,x.l0.rowWithGap(4),x.l0.cursor.pointer,x.l0.align.center,x.l0.px(4),x.l0.py(2),s.gU.nofill,x.l0.color.foregroundDimmest,x.l0.flex.row,{'&[aria-expanded="true"] .chevron':{transform:"rotate(180deg)"},"&:hover":x.l0.color.foregroundDefault}],fakeUpgradeButton:[(0,c.ec)("blurple"),x.l0.p(4),x.l0.borderRadius(4),x.l0.center],heading:[x.l0.px(8),x.l0.py(4)],header:[x.l0.py(4),x.l0.px(8)],surface:[x.l0.borderRadius(4),x.l0.border({color:x.TV.outlineDefault}),x.l0.overflow("hidden"),x.l0.maxWidth(260),x.l0.minWidth(260)],item:[x.l0.cursor.pointer,s.gU.listItem]});function V(e){var t=(0,r._)(e.children,2),n=t[0],o=t[1];return(0,i.BX)(S.z,{css:q.button,children:[n?(0,w.cloneElement)(n,{size:12}):null,(0,i.tZ)(h.xv,{variant:"small",children:o}),(0,i.tZ)(b.Z,{className:"cevron",size:12})]})}var H=["basic","advanced"],F=(0,o._)(H).concat(["advanced_beta"]),W={basic:l.BY.BASIC,advanced:l.BY.ADVANCED,advanced_beta:l.BY.OVERRIDE};function z(e){return"advanced"===e||"advanced_beta"===e}function j(e){var t=e.advancedChatEngineOverride,n=e.availableModelNames,r=e.hasAccessToAdvancedModel,o=e.onChange,l=e.selectedItem,a=n.basicModelName,c=n.advancedModelName,s=n.advancedBetaModelName;return(0,i.BX)(_.Ph,{selectedKey:l,onSelectionChange:function(e){switch(e){case"basic":case"advanced":case"advanced_beta":o(e)}},children:[(0,i.tZ)(E._,{css:q.label,children:"Model type"}),(0,i.BX)(V,{children:[(0,i.tZ)(C.ZA,{model:W[l]}),function(e){switch(e){case"basic":return"Basic";case"advanced":return"Advanced";case"advanced_beta":return"Advanced (Beta)"}}(l)]}),(0,i.tZ)(T.J,{children:(0,i.BX)(f.Tg,{css:q.surface,elevated:!0,children:[(0,i.tZ)(p.G,{css:q.heading,children:(0,i.tZ)(h.xv,{variant:"small",color:"dimmest",children:"Select a model"})}),(0,i.tZ)(k.wb,{"aria-label":"Model type",items:(null==s?H:F).map(function(e){return{id:e}}),selectionMode:"single",children:function(e){return(0,i.tZ)(k.m9,{css:q.item,textValue:e.id,children:"basic"===e.id?(0,i.tZ)(L,{modelName:a.readable,selected:"basic"===l}):"advanced"===e.id?(0,i.tZ)(N,{hasAccessToAdvancedModel:r,modelName:null!=t?t:c.readable,selected:"advanced"===l}):(0,i.tZ)(M,{hasAccessToAdvancedModel:r,modelName:null==s?void 0:s.readable,selected:"advanced_beta"===l})})}})]})})]})}},25414:function(e,t,n){n.d(t,{Ds:function(){return d},he:function(){return u},sQ:function(){return s}});var r=n(66626),o=n(54129),i=n(19236),l=n(75271),a=n(25731),c=(0,l.createContext)((0,a.u)(null)),s=c.Provider;function u(){var e=(0,l.useContext)(c);return(0,o.Z)(e)}function d(){var e=(0,r._)((0,l.useState)(function(){return(0,a.u)(null)}),1)[0],t=(0,i.qs)();return(0,l.useEffect)(function(){var n=function(t){return e.set((null==t?void 0:t.insertGhostwriterChatCode)&&t.revertGhostwriterChatCode?{insert:t.insertGhostwriterChatCode,revert:t.revertGhostwriterChatCode}:null)};return n(t.current),t.subscribe(n)},[t,e]),e}},7890:function(e,t,n){n.d(t,{S:function(){return nk}});var r,o,i,l=n(66626),a=n(3796),c=n(29574),s=n(15185),u=n(93245),d=n(36809),f=n(63163),h=n(85995),p=n(40713),v=n(3102),m=n(37121),g=n(22893),b=n(54300),Z=(0,d.X)({errorBannerContainer:[f.l0.justify.center,f.l0.display.flex,f.l0.align.center,f.l0.flex.grow(1),f.l0.minHeight(32),f.l0.maxHeight(300),f.l0.overflow("auto")],errorBanner:[f.l0.minHeight("fit-content"),f.l0.p(8)]});function y(){return(0,a.tZ)(u.G,{css:Z.errorBannerContainer,children:(0,a.tZ)(u.G,{css:Z.errorBanner,children:(0,a.tZ)(g.E,{icon:(0,a.tZ)(b.Z,{}),colorway:"red",text:"Connection to AI Chat lost. Try refreshing the page."})})})}var x=n(19016),C=n(52551),w=new Map([["NONE",p.$h.MESSAGE_ACTION_UNKNOWN],["GENERATE",p.$h.GENERATE],["TRANSFORM",p.$h.TRANSFORM],["EXPLAIN",p.$h.EXPLAIN],["REPLIT_DOCS",p.$h.REPLIT_DOCS],["AGENT",p.$h.AGENT]]),S=new Map([["NONE","ask_ai"],["GENERATE","generate"],["TRANSFORM","modify"],["EXPLAIN","explain"],["REPLIT_DOCS","ask_replit"],["AGENT","agent"]]),_=new Map,E=!0,T=!1,k=void 0;try{for(var A,R=w[Symbol.iterator]();!(E=(A=R.next()).done);E=!0){var I=(0,l._)(A.value,2),G=I[0],D=I[1];_.set(D,G)}}catch(e){T=!0,k=e}finally{try{E||null==R.return||R.return()}finally{if(T)throw k}}var B=n(42965),P=n(67790),X=n(96949),L=n(52657),N=n(97687),M=n(11409),O=n(75271),U=n(66791),q=n(92674),V=n.n(q),H=n(72748),F=n(7391),W=n(79904),z=n(87387),j=(0,d.X)({surface:[f.l0.flex.growAndShrink(0),f.l0.borderRadius(8),f.l0.m(8),f.l0.position.relative,{marginTop:"auto"}],messageBoxContainer:[f.l0.p(8)],quotaLimitContainer:[f.l0.p(8),f.l0.colWithGap(8),f.l0.position.relative,{marginTop:"auto"}]});function Y(e){var t=e.text,n=e.type,r=(0,l._)((0,O.useState)(!1),2),o=r[0],i=r[1],c=(0,l._)((0,p.Ni)(),2)[1];return(0,a.BX)(u.G,{css:j.quotaLimitContainer,children:[(0,a.tZ)(g.E,{icon:(0,a.tZ)(b.Z,{}),colorway:"red",text:t}),"basic"===n?(0,a.tZ)(W.zx,{onClick:function(){return i(!0)},colorway:"blurple",text:"Upgrade to Replit ".concat(z.we)}):(0,a.tZ)(W.zx,{onClick:function(){return c("basic")},colorway:"blurple",text:"Switch back to basic model"}),(0,a.tZ)(h.Z,{isOpen:o,onClose:function(){return i(!1)},type:"purchase",analyticsContext:{upgrade:{context:"ai_model_selector",surface:"ghostwriter_power_up_dialog"}}})]})}var $=n(27387),K=n(63257),J=n(96583),Q=n(17437);function ee(e){var t,n,r,o=e.contents.contents;return(null==o?void 0:o.$kind)==="messageEventContents"&&null!==(r=null===(n=o.messageEventContents.extraActions)||void 0===n?void 0:null===(t=n.suggestedTemplates)||void 0===t?void 0:t.suggestedTemplates)&&void 0!==r?r:[]}function et(e){return e.error&&e.error.type!==p.lZ.EVENT_ERROR_TYPE_UNKNOWN?e.error.type:null}var en=n(82231),er=n(67465),eo=n(38775),ei=n(53250),el=n(87915),ea=n(14548),ec=n(77402),es=(0,d.X)({root:[f.l0.borderRadius(4),f.l0.border({color:f.TV.outlineDimmest})],header:[f.l0.rowWithGap(4),f.l0.border({color:f.TV.outlineDimmest,direction:"bottom"})],button:[{borderRadius:0,borderTopLeftRadius:4}]});function eu(e){var t=e.codeReference,n=e.onClick;return(0,a.BX)(ea.Tg,{css:es.root,children:[(0,a.tZ)(u.G,{css:es.header,children:(0,a.tZ)(W.zx,{css:es.button,size:"small",variant:"nofill",iconLeft:(0,a.tZ)(el.Z,{size:12,path:t.filePath}),iconRight:(0,a.tZ)(ec.Z,{}),text:"".concat(t.filePath," ").concat(t.range.lineFrom,":").concat(t.range.lineTo),onClick:n})}),(0,a.tZ)(ei.Z,{lineNumbers:!0,lineNumbersStart:t.range.lineFrom,language:t.language,code:t.code,filePath:t.filePath})]})}function ed(e){if(!e)return null;var t=e.contents.contents,n={id:e.sender.id},r=function(e){var t;switch(null==e?void 0:null===(t=e.contents.contents)||void 0===t?void 0:t.$kind){case"messageEventContents":if(e.contents.contents.messageEventContents.intent===p.$h.DEBUG)break;return e.contents.contents.messageEventContents.codeReference;case"inlineActionEventContents":return e.contents.contents.inlineActionEventContents.codeReference;default:return null}}(e);return(null==t?void 0:t.$kind)==="messageEventContents"?{created:e.created,sender:n,contents:t.messageEventContents,codeReference:r}:(null==t?void 0:t.$kind)==="inlineActionEventContents"?{created:e.created,sender:n,contents:t.inlineActionEventContents,codeReference:r}:null}var ef=(0,d.X)({event:[f.l0.px(16),f.l0.py(8),f.l0.colWithGap(8)],header:[f.l0.rowWithGap(8),f.l0.align.center]}),eh=(0,O.memo)(function(e){var t,n=(0,p.Mi)(e.id,ed),r=(0,en.UE)({eventId:e.id,openFile:e.openFile,onStartLocalShellExecution:e.onStartLocalShellExecution});if(!n)return null;var o=n.sender;return(0,a.BX)(u.G,{css:ef.event,children:[(0,a.BX)(u.G,{css:ef.header,children:[(0,a.tZ)(er.Y,{id:Number(o.id)}),(0,a.tZ)(eo.EK,{textVariant:"small",textColor:"dimmest",date:n.created})]}),(0,a.tZ)(en.M4,{id:e.id,markdownCodeComponent:r,state:p.he.COMPLETE}),(null===(t=n.codeReference)||void 0===t?void 0:t.code)?(0,a.tZ)(eu,{codeReference:n.codeReference,onClick:function(){var t,r,o=null===(t=n.codeReference)||void 0===t?void 0:t.filePath;e.openFile&&o&&e.openFile({path:o,line:null===(r=n.codeReference)||void 0===r?void 0:r.range.lineTo})}}):null]})}),ep=n(68417),ev=n(47305),em=n(97420),eg=n(61663),eb=n(41733),eZ=n(30509),ey=n(22510),ex=n(86466),eC=n(24766),ew=n(15323),eS=n(84042),e_=n(64888),eE=n(65958),eT=n(27840),ek=n(29737),eA=n(96751),eR=(0,K._)(ev.HC.keys()),eI=(0,K._)(ev.NK.keys());function eG(e){var t=(0,l._)((0,O.useState)(e.typeUsed),2),n=t[0],r=t[1],o=(0,l._)((0,O.useState)(e.modelUsed),2),i=o[0],c=o[1];return(0,a.BX)(ey.l0,{css:eB.form,onSubmit:function(t){t.preventDefault(),e.onRerun({model:i,type:n})},children:[(0,a.BX)(u.G,{css:eB.section,children:[(0,a.tZ)(u.G,{css:eB.header,children:(0,a.tZ)(eC.xv,{variant:"small",color:"dimmer",children:"Intent"})}),(0,a.tZ)(eS.Ee,{onChange:function(e){return r(Number(e))},children:eR.map(function(t){return(0,a.tZ)(eS.Y8,{value:t.toString(),children:(0,a.BX)(u.G,{css:eB.radioItemRow,children:[(0,a.BX)(u.G,{css:eB.radioItemText,children:[(0,a.tZ)(ev.Pr,{type:t,text:{variant:"small"}}),t===e.typeUsed?(0,a.tZ)(eC.xv,{variant:"small",color:"dimmer",children:"(Used)"}):null]}),n===t?(0,a.tZ)(eT.Z,{color:f.TV.accentPrimaryStronger}):null]})},t.toString())})})]}),(0,a.BX)(u.G,{css:eB.section,children:[(0,a.tZ)(u.G,{css:eB.header,children:(0,a.tZ)(eC.xv,{variant:"small",color:"dimmer",children:"Model"})}),(0,a.tZ)(eS.Ee,{onChange:function(e){return c(Number(e))},children:eI.map(function(t){return(0,a.tZ)(eS.Y8,{value:t.toString(),children:(0,a.BX)(u.G,{css:eB.radioItemRow,children:[(0,a.BX)(u.G,{css:eB.radioItemText,children:[(0,a.tZ)(ev.gg,{model:t,text:{variant:"small"}}),t===e.modelUsed?(0,a.tZ)(eC.xv,{variant:"small",color:"dimmer",children:"(Used)"}):null]}),i===t?(0,a.tZ)(eT.Z,{color:f.TV.accentPrimaryStronger}):null]})},t.toString())})})]}),(0,a.tZ)(u.G,{css:eB.formFooter,children:(0,a.tZ)(W.zx,{colorway:"primary",type:"submit",iconLeft:(0,a.tZ)(ew.Z,{}),text:"Rerun"})})]})}function eD(e){var t=(0,l._)((0,O.useState)(e.modelUsed),2),n=t[0],r=t[1],o=e.intentUsed;return(0,a.BX)(ey.l0,{css:eB.form,onSubmit:function(t){var r=e.getRerunContent(),i=_.get(o),l=n===p.BY.BASIC?"basic":"advanced";(0,X.j)(X.U3.AI_CHAT_EVENT,{action:"message_reran",intent_type:S.get(i||"NONE"),model:l,user_model_selection:l,message_content:r,message_source:"chat_pane"}),t.preventDefault(),e.onRerun({model:n,intent:o})},children:[(0,a.BX)(u.G,{css:eB.section,children:[(0,a.tZ)(u.G,{css:eB.header,children:(0,a.tZ)(eC.xv,{id:"rerun-button-model-selector",variant:"small",color:"dimmer",children:"Model"})}),(0,a.tZ)(eS.Ee,{"aria-labelledby":"rerun-button-model-selector",onChange:function(e){return r(Number(e))},children:eI.map(function(t){return(0,a.tZ)(eS.Y8,{value:t.toString(),children:(0,a.BX)(u.G,{css:eB.radioItemRow,children:[(0,a.BX)(u.G,{css:eB.radioItemText,children:[(0,a.tZ)(ev.gg,{model:t,text:{variant:"small"}}),t===e.modelUsed?(0,a.tZ)(eC.xv,{variant:"small",color:"dimmer",children:"(Used)"}):null]}),n===t?(0,a.tZ)(eT.Z,{color:f.TV.accentPrimaryStronger}):null]})},t.toString())})})]}),(0,a.tZ)(u.G,{css:eB.formFooter,children:(0,a.tZ)(W.zx,{colorway:"primary",type:"submit",iconLeft:(0,a.tZ)(ew.Z,{}),text:"Rerun"})})]})}var eB=(0,d.X)({form:[f.l0.width(200)],formFooter:[f.l0.px(8),f.l0.py(8)],header:[f.l0.py(4),f.l0.px(8)],radioItemText:[f.l0.rowWithGap(4)],section:{'& [role="radiogroup"]':{"& > label":[f.l0.p(8),f.l0.py(4),ex.gU.listItem,f.l0.display.block],'& > [data-focused="true"]':{backgroundColor:ex.vb.interactiveBackgroundActive,borderColor:f.TV.accentPrimaryDefault}}},radioItemRow:[f.l0.rowWithGap(4),f.l0.align.center,f.l0.justify.spaceBetween],rerunButton:[f.l0.color.foregroundDimmest,f.l0.backgroundColor.backgroundDefault],surface:[f.l0.borderRadius(4),f.l0.border({color:f.TV.outlineDefault}),f.l0.overflow("hidden")]}),eP=(0,O.createContext)(null),eX=eP.Provider;function eL(e){var t,n,r=(0,l._)((0,O.useState)(!1),2),o=r[0],i=r[1],c=(0,l._)((0,O.useState)(null),2),s=c[0],u=c[1],d=(0,l._)((0,O.useState)(null),2),f=d[0],h=d[1],v=(0,O.useContext)(eP),m=(0,p.Un)(),g=(0,eA.D)(s,f,{modifiers:[{name:"offset",options:{offset:[0,6]}},{name:"preventOverflow",options:{padding:16}}]});return(0,a.BX)(e_.bF,{children:[(0,a.tZ)(W.zx,{size:"small",text:"Rerun",ref:u,onClick:function(){return i(function(e){return!e})},css:eB.rerunButton,iconLeft:(0,a.tZ)(ew.Z,{}),iconRight:(0,a.tZ)(ek.Z,{size:12,rotate:o?180:0}),disabled:!m}),(0,a.tZ)(eE.J,{isOpen:o,shouldCloseOnInteractOutside:function(e){var t;return t=[f,s],!(e instanceof Node&&t.some(function(t){return null==t?void 0:t.contains(e)}))&&(i(!1),!0)},isKeyboardDismissDisabled:!0,children:(0,a.tZ)(ea.Tg,(0,eZ._)((0,eb._)({css:eB.surface,innerRef:h,style:g.styles.popper},g.attributes.popper),{elevated:!0,children:"intentUsed"in e?(0,a.tZ)(eD,{onRerun:(t=(0,$._)(function(t){var n,r,o;return(0,J.Jh)(this,function(l){switch(l.label){case 0:if(i(!1),n=e.onRerun,r={intent:t.intent,model:t.model},!v)return[3,2];return[4,v()];case 1:return o=l.sent(),[3,3];case 2:o=void 0,l.label=3;case 3:return n.apply(e,[(r.fileContext=o,r)]),[2]}})}),function(e){return t.apply(this,arguments)}),modelUsed:e.modelUsed,intentUsed:e.intentUsed,getRerunContent:e.getRerunContent}):(0,a.tZ)(eG,{onRerun:(n=(0,$._)(function(t){var n,r,o;return(0,J.Jh)(this,function(l){switch(l.label){case 0:if(i(!1),n=e.onRerun,r={type:t.type,model:t.model},!v)return[3,2];return[4,v()];case 1:return o=l.sent(),[3,3];case 2:o=void 0,l.label=3;case 3:return n.apply(e,[(r.fileContext=o,r)]),[2]}})}),function(e){return n.apply(this,arguments)}),modelUsed:e.modelUsed,typeUsed:e.typeUsed})}))})]})}var eN=n(91466),eM=n(22419),eO=n(39031),eU=n(24969),eq=(0,d.X)({containerCss:[f.l0.py(6),f.l0.px(8)],surface:[f.l0.borderRadius(4),f.l0.border({color:f.TV.outlineDefault}),f.l0.overflow("hidden"),f.l0.width(280)],headingText:[f.l0.color.foregroundDimmest,f.l0.fontWeight.normal,{fontStyle:"italic"}],modelContainer:[f.l0.justify.spaceBetween,f.l0.flex.row,f.l0.align.center,f.l0.pr(8)],modelLabel:[f.l0.py(6),f.l0.px(8),f.l0.rowWithGap(8),f.l0.align.center],button:[f.l0.color.foregroundDimmest,f.l0.backgroundColor.backgroundDefault],divider:[f.l0.backgroundColor.outlineDefault],sourceItem:[f.l0.rowWithGap(8),f.l0.align.center,f.l0.px(8),f.l0.py(4),ex.gU.listItem],messageContextHeader:[f.l0.justify.spaceBetween,f.l0.flex.row,f.l0.align.center,f.l0.py(6),f.l0.px(8)],fileName:[f.l0.maxWidth("70%"),f.l0.overflow("hidden"),{textOverflow:"ellipsis",whiteSpace:"nowrap"}],directory:[f.l0.color.foregroundDimmest,f.l0.flex.shrink(1),f.l0.flex.grow(0),f.l0.overflow("hidden"),{textOverflow:"ellipsis",whiteSpace:"nowrap"}]});function eV(e){var t=e.model,n=e.openFile,r=e.sources,o=(0,l._)((0,O.useState)(!1),2),i=o[0],c=o[1],s=(0,l._)((0,O.useState)(null),2),d=s[0],h=s[1],v=(0,l._)((0,O.useState)(null),2),m=v[0],g=v[1],b=r&&Array.from(new Set(r.map(function(e){return e.url}))).map(function(e){return r.find(function(t){return t.url===e})}).filter(function(e){return!!e}),Z=function(e){if(e.overrideModelName)return e.overrideModelName;var t,n=ev.NK.get(e.type)+" model";return(null===(t=e.modelUsedForResponse)||void 0===t?void 0:t.readable)&&(n+=" (".concat(e.modelUsedForResponse.readable,")")),n}(t);function y(e){var t=e.replace(/^file:\/\/\//,""),n=t.match(/\/home\/runner\/[^/]+\/(.+)/);return n&&n[1]?n[1]:t}var x=(0,eA.D)(d,m,{modifiers:[{name:"offset",options:{offset:[0,6]}},{name:"preventOverflow",options:{padding:16}}]});return(0,a.BX)(e_.bF,{children:[(0,a.tZ)(W.zx,{size:"small",ref:h,onClick:function(){return c(function(e){return!e})},text:"Context",css:eq.button,iconRight:(0,a.tZ)(ek.Z,{size:12,rotate:i?180:0})}),(0,a.tZ)(eE.J,{isOpen:i,shouldCloseOnInteractOutside:function(e){var t;return t=[m,d],!(e instanceof Node&&t.some(function(t){return null==t?void 0:t.contains(e)}))&&(c(!1),!0)},isKeyboardDismissDisabled:!0,children:(0,a.tZ)(ea.Tg,(0,eZ._)((0,eb._)({css:eq.surface,innerRef:g,style:x.styles.popper},x.attributes.popper),{elevated:!0,children:(0,a.BX)(u.G,{children:[(0,a.tZ)(u.G,{css:eq.containerCss,children:(0,a.tZ)(eC.xv,{variant:"small",children:"This message used:"})}),(0,a.tZ)(eN.R,{css:eq.divider}),(0,a.BX)(u.G,{css:eq.modelContainer,children:[(0,a.BX)(u.G,{css:eq.modelLabel,children:[(0,a.tZ)(ev.ZA,{model:t.type,size:12,color:f.TV.foregroundDimmest}),(0,a.tZ)(eC.xv,{css:eq.headingText,children:Z})]}),(0,a.tZ)(eM.u,{tooltip:"This message was generated using a".concat(t.type===p.BY.ADVANCED?"n":""," ").concat(Z),children:(0,a.tZ)(eO.Z,{color:f.TV.foregroundDimmest})})]}),(null==b?void 0:b.length)?(0,a.tZ)(eN.R,{css:eq.divider}):null,(null==b?void 0:b.length)?(0,a.BX)(u.G,{children:[(0,a.BX)(u.G,{css:eq.messageContextHeader,children:[(0,a.tZ)(eC.xv,{css:eq.headingText,children:"Message Context"}),(0,a.tZ)(eM.u,{tooltip:"This shows the files the AI read to get the context to respond to this message.",children:(0,a.tZ)(eO.Z,{color:f.TV.foregroundDimmest})})]}),b.map(function(e){var t,r={fileName:(t=y(e.url).split("/")).pop(),directory:t.length>0?"".concat(t.join("/"),"/"):""},o=r.fileName,i=r.directory;return(0,a.BX)(u.G,{css:eq.sourceItem,onClick:function(){return function(e){if(e.startsWith("file:///")){var t=y(e);null==n||n({path:t})}else{var r=(0,eU.vt)(e);window.open(r,"_blank")}c(!1)}(e.url)},children:[(0,a.tZ)(el.Z,{size:16,path:e.url}),(0,a.tZ)(eC.xv,{css:eq.fileName,children:o}),(0,a.tZ)(eC.xv,{css:eq.directory,children:i})]},e.id)})]}):null]})}))})]})}var eH=(0,d.X)({header:[f.l0.rowWithGap(8),f.l0.align.center]});function eF(e){var t=e.children,n=e.intent,r=e.showUpsell,o=e.date;return(0,a.BX)(u.G,{css:eH.header,children:[(0,a.tZ)(ep.R,{advanced:!0,size:24,showUsername:!0}),r?(0,a.tZ)(eg.C,{}):null,(0,a.tZ)(eo.EK,{textVariant:"small",textColor:"dimmest",date:o}),(null==n?void 0:n.kind)==="message"?(0,a.tZ)(ev.Dz,{intent:n.value,icon:{color:em.TV.foregroundDimmest,size:12},text:{color:"dimmest",variant:"small"}}):null,(null==n?void 0:n.kind)==="inline"?(0,a.tZ)(ev.Pr,{type:n.value,icon:{color:em.TV.foregroundDimmest,size:12},text:{color:"dimmest",variant:"small"}}):null,t]})}function eW(e){var t=e.intent,n=e.model,r=e.getEvents,o=e.setActiveChild,i=e.eventId,l=e.sessionEventId,c=e.sources,s=e.openFile,u=(0,p.oV)(),d=(0,p.$q)(l);function f(e){u(i,e),d&&o({parentEventId:d.parentEventId,eventId:null})}return(0,a.BX)(a.HY,{children:[(0,a.tZ)(eV,{model:n,sources:c,openFile:s}),(null==t?void 0:t.kind)==="message"?(0,a.tZ)(eL,{modelUsed:n.type,intentUsed:null==t?void 0:t.value,getRerunContent:function(){return function(t){var n=r().filter(function(e){return e.id===t}),o=n.length>0?n[0]:null;if(o){var i,l=o.parentEventId,a=e.getEvents().filter(function(e){return e.id===l}),c=a.length>0?a[0]:null;if(c&&(null===(i=c.contents.contents)||void 0===i?void 0:i.$kind)==="messageEventContents")return c.contents.contents.messageEventContents.content}return null}(i)},onRerun:f}):null,(null==t?void 0:t.kind)==="inline"?(0,a.tZ)(eL,{modelUsed:n.type,typeUsed:t.value,onRerun:f}):null]})}function ez(e){switch(e.type){case p.lZ.MANUALLY_ABORTED:return(0,a.tZ)(g.E,{icon:(0,a.tZ)(eO.Z,{}),text:"Message was stopped"});case p.lZ.USAGE_LIMIT:return(0,a.tZ)(g.E,{icon:(0,a.tZ)(b.Z,{}),colorway:"orange",text:"Usage limit reached"});default:return(0,a.tZ)(g.E,{icon:(0,a.tZ)(b.Z,{}),colorway:"red",text:"Something went wrong"})}}var ej=n(9602),eY=n(48155),e$=n(30231),eK=n(98924),eJ=(0,d.X)({root:[f.l0.px(16),f.l0.py(8),f.l0.colWithGap(8)],header:[f.l0.rowWithGap(8),f.l0.align.center],footer:[f.l0.rowWithGap(8),f.l0.align.center,f.l0.justify.spaceBetween],footerRight:[f.l0.rowWithGap(8),f.l0.align.center,f.l0.justify.end,f.l0.flex.growAndShrink(1)],sourceButton:[f.l0.color.foregroundDimmest],eventArrows:[f.l0.rowWithGap(2),f.l0.align.center]});function eQ(e){var t=e.children,n=e.headerProps,r=void 0===n?{showUpsell:!1,intent:null,date:new Date}:n,o=e.headerActions,i=e.footer,l=e.footerActions,c=(0,eK._)(e,["children","headerProps","headerActions","footer","footerActions"]);return(0,a.BX)(u.G,(0,eZ._)((0,eb._)({css:eJ.root},c),{children:[(0,a.tZ)(eF,(0,eZ._)((0,eb._)({},r),{children:o})),t,i||l?(0,a.BX)(u.G,{css:eJ.footer,children:[(0,a.tZ)(u.G,{children:i}),(0,a.tZ)(u.G,{css:eJ.footerRight,children:l})]}):null]}))}var e0=(0,d.X)({event:[f.l0.px(16),f.l0.py(8),f.l0.colWithGap(8)],header:[f.l0.rowWithGap(8),f.l0.align.center],footer:[f.l0.rowWithGap(8),f.l0.align.center,f.l0.justify.spaceBetween],footerRight:[f.l0.rowWithGap(8),f.l0.align.center,f.l0.justify.end,f.l0.flex.growAndShrink(1)],sourceButton:[f.l0.color.foregroundDimmest],eventArrows:[f.l0.rowWithGap(2),f.l0.align.center]});function e1(e){if(!e)return null;var t=e.contents.contents,n={type:p.BY.MODEL_TYPE_UNKNOWN,overrideModelName:"",modelUsedForResponse:{readable:"",qualified:""}},r=null,o=null,i=ee(e);(null==t?void 0:t.$kind)==="messageEventContents"?(r={value:t.messageEventContents.intent,kind:"message"},n=t.messageEventContents.usedModelSelector,o=t.messageEventContents.sources):(null==t?void 0:t.$kind)==="inlineActionEventContents"&&(r={value:t.inlineActionEventContents.messageType,kind:"inline"},n=t.inlineActionEventContents.usedModelSelector);var l=et(e),a=!!((null==t?void 0:t.$kind)==="messageEventContents"&&t.messageEventContents.intent===p.$h.DEBUG);return{id:e.id,created:e.created,state:e.state,intent:r,error:l,usedModelSelector:n,sources:o,isDebugMessage:a,suggestedTemplates:i}}var e2=(0,O.memo)(function(e){var t=(0,p.$q)(e.id),n=(0,en.UE)({eventId:e.id,openFile:e.openFile,onStartLocalShellExecution:e.onStartLocalShellExecution}),r=(0,p.Mi)(e.id,e1);if(!r)return null;var o=r.state===p.he.COMPLETE;return(0,a.tZ)(eQ,{"data-cy":"message-from-ai",headerProps:{showUpsell:!0,date:r.created,intent:r.intent},headerActions:(0,a.tZ)(eW,{intent:r.intent,model:r.usedModelSelector,getEvents:e.getEvents,setActiveChild:e.setActiveChild,eventId:r.id,sessionEventId:e.id,sources:r.sources,openFile:e.openFile}),footer:o&&r.error?(0,a.tZ)(ez,{type:r.error}):null,footerActions:o&&t?(0,a.tZ)(e5,{eventIds:t.eventIds,index:t.index,onClick:function(n){return e.setActiveChild({parentEventId:t.parentEventId,eventId:n})}}):null,children:(0,a.tZ)(en.M4,{id:e.id,markdownCodeComponent:r.isDebugMessage?void 0:n,state:r.state,disableAnchorTags:!!r.suggestedTemplates.length})})}),e5=(0,O.memo)(function(e){var t=e.eventIds,n=e.index,r=e.onClick,o=t.length;return o<2?null:(0,a.BX)(u.G,{css:e0.eventArrows,children:[(0,a.tZ)(ej.hU,{onClick:function(){r(t[n>0?n-1:o-1])},alt:"Previous",tooltipBehavior:"hidden",children:(0,a.tZ)(eY.Z,{})}),(0,a.BX)(eC.xv,{variant:"small",color:"dimmest",children:[n+1,"/",o]}),(0,a.tZ)(ej.hU,{onClick:function(){r(t[n<o-1?n+1:0])},alt:"Next",tooltipBehavior:"hidden",children:(0,a.tZ)(e$.Z,{})})]})}),e7=n(31417),e3=n(98514),e6=n(23979),e4=n(93632),e8=n(39819),e9=n(78371),te=n(13502),tt=n(16642),tn=n(1567),tr=n(40703),to=n(67827),ti=n(24200),tl=n(28670),ta=n(6829),tc=n(91620).lW;function ts(e){if(!e)return null;var t=e.created,n=e.sender,r=e.contents.contents;return(null==r?void 0:r.$kind)!=="localShellExecutionEventContents"?null:{created:t,sender:n,contents:r.localShellExecutionEventContents}}var tu=(0,d.X)({event:[f.l0.px(16),f.l0.py(8),f.l0.colWithGap(8)],header:[f.l0.rowWithGap(8),f.l0.align.center],iconLabel:[f.l0.rowWithGap(4),f.l0.align.center]}),td=(0,O.memo)(function(e){var t=(0,p.Mi)(e.id,ts);if(!t)return null;var n=t.sender,r=t.contents,o=t.created;return(0,a.BX)(u.G,{css:tu.event,children:[(0,a.BX)(u.G,{css:tu.header,children:[(0,a.tZ)(er.Y,{id:Number(n.id)}),(0,a.tZ)(eo.EK,{textVariant:"small",textColor:"dimmest",date:o}),(0,a.BX)(u.G,{css:tu.iconLabel,children:[(0,a.tZ)(e3.Z,{color:f.TV.foregroundDimmest,size:12}),(0,a.tZ)(eC.xv,{color:"dimmest",variant:"small",children:"Shell Execution"})]})]}),(0,a.tZ)(tm,{channelName:r.channelName,command:r.command,result:r.result,executed:r.executed,exitCode:r.exitCode,onExecutionResult:function(t){e.onEndLocalShellExecution((0,eb._)({eventId:e.id,command:r.command,index:r.index,channelName:r.channelName},t))},openFile:e.openFile,openWebview:e.openWebview,listFiles:e.listFiles,isLastEvent:e.isLastEvent})]})});(r=o||(o={})).LOADING="LOADING",r.START_EXECUTING_LOCALLY="START_EXECUTING_LOCALLY",r.EXECUTING_LOCALLY="EXECUTING_LOCALLY",r.FINISHED_EXECUTING_LOCALLY="FINISHED_EXECUTING_LOCALLY",r.RECONNECTING_TO_LOCAL_EXECUTION="RECONNECTING_TO_LOCAL_EXECUTION",r.HAS_STORED_RESULT="HAS_STORED_RESULT";var tf=(0,d.X)({headerWrapper:[f.l0.borderRadius(4,4,0,0),f.l0.border({direction:"top",color:f.TV.outlineDimmest}),f.l0.border({direction:"x",color:f.TV.outlineDimmest}),f.l0.p(4),f.l0.backgroundColor.backgroundDefault,f.l0.color.foregroundDimmer,f.l0.rowWithGap(4),f.l0.align.center,f.l0.justify.spaceBetween],headerLeft:[f.l0.flex.growAndShrink(1),f.l0.align.center,f.l0.rowWithGap(8)],headerRight:[f.l0.align.center,f.l0.pr(4)],headerCode:[f.l0.font.code,f.l0.display.inline,f.l0.fontSize(12),f.l0.truncate],terminalWrapper:[f.l0.position.relative,f.l0.borderRadius(0,0,4,4),f.l0.border({color:f.TV.outlineDimmest}),f.l0.overflow("hidden")],searchWrapper:[{gridRow:1,gridColumn:1,position:"sticky",right:2,height:30,margin:"2px 0 0 auto",zIndex:4}]}),th="\x1b[?25l";function tp(e){var t=e.step,n=e.exitCode,r=0!==n;switch(t){case"LOADING":return null;case"START_EXECUTING_LOCALLY":case"EXECUTING_LOCALLY":case"RECONNECTING_TO_LOCAL_EXECUTION":return(0,a.tZ)(eM.u,{tooltip:"Running...",children:(0,a.tZ)(e8.Z,{color:f.TV.accentPositiveDefault})});case"FINISHED_EXECUTING_LOCALLY":case"HAS_STORED_RESULT":return(0,a.tZ)(eM.u,{tooltip:r?"Exit code: ".concat(n):"Finished",children:r?(0,a.tZ)(b.Z,{}):(0,a.tZ)(eT.Z,{})});default:(0,U.Z)(t)}}function tv(e){var t=e.step,n=e.exitCode,r=e.command,o=e.presence;return(0,a.BX)(u.G,{css:tf.headerWrapper,children:[(0,a.BX)(u.G,{css:tf.headerLeft,children:[(0,a.tZ)(tp,{step:t,exitCode:n}),(0,a.BX)("code",{css:tf.headerCode,children:["$ ",r]})]}),o.length?(0,a.tZ)(u.G,{css:tf.headerRight,children:o.map(function(e){return(0,a.tZ)(tl.Z,{user:e,size:16},e.id)})}):null]})}function tm(e){var t,n,r=e.channelName,o=e.command,i=e.result,c=e.executed,s=e.exitCode,d=e.onExecutionResult,f=e.openFile,h=e.listFiles,p=e.openWebview,v=e.isLastEvent,m=(0,l._)((0,O.useState)("LOADING"),2),g=m[0],b=m[1],Z=(0,L.Z)(g),y=(0,O.useId)(),x=(0,ta.x)(),C=(0,L.Z)(x),w=(0,ti.aG)(),S=(0,l._)((0,O.useState)([]),2),_=S[0],E=S[1],T=(0,L.Z)(_),k=(0,O.useRef)(null),A=(0,l._)((0,O.useState)(null),2),R=A[0],I=A[1],G=(0,l._)((0,O.useState)(!1),2),D=G[0],B=G[1],P=(0,l._)((0,O.useState)(""),2),X=P[0],N=P[1],M=(0,L.Z)(d),U=(0,O.useRef)(""),q=(0,e6.fB)({maxHeight:300,openFile:f,listFiles:h,openWebview:p}),V=q.visibleHeight,H=q.bufferHeight,F=q.wrapperResizeRef,W=q.xterm,z=q.xtermRef,j=(0,e9.av)().onContextMenu,Y=(0,te.j)({xterm:W,openShellSearch:function(e){B(!0),N(e)}}),K=(0,to.U)(function(e){var t;return t=(0,$._)(function(t){var n,o,i,l,a,c,s,u;return(0,J.Jh)(this,function(d){switch(d.label){case 0:n=new Uint8Array([]),o=!1,i=!1,d.label=1;case 1:d.trys.push([1,6,7,12]),a=(0,e7._)(e.shellExec.readBuffer.subscribe({id:r}).resReadable),d.label=2;case 2:return[4,a.next()];case 3:if(!(o=!(c=d.sent()).done))return[3,5];if(!(s=c.value).ok)return M.current({result:"",exitCode:-1}),[3,5];"output"===s.payload.$kind&&(n=tc.concat([n,s.payload.output])),"finished"===s.payload.$kind&&(M.current({result:n.toString(),exitCode:t.exitCode}),e.shellExec.cleanStoredState.rpc({id:r})),d.label=4;case 4:return o=!1,[3,2];case 5:return[3,12];case 6:return u=d.sent(),i=!0,l=u,[3,12];case 7:if(d.trys.push([7,,10,11]),!(o&&null!=a.return))return[3,9];return[4,a.return()];case 8:d.sent(),d.label=9;case 9:return[3,11];case 10:if(i)throw l;return[7];case 11:return[7];case 12:return[2]}})}),function(e){return t.apply(this,arguments)}},[r,M]);(0,O.useEffect)(function(){if(W){if(c&&"LOADING"===Z.current){b("HAS_STORED_RESULT");return}if(!c&&"LOADING"===Z.current){b("START_EXECUTING_LOCALLY");return}}},[c,W,Z]);var Q=(0,to.U)(function(e){var t;return t=(0,$._)(function(t){return(0,J.Jh)(this,function(n){return x?[2,e.shellExec.resize.rpc({id:r,userId:x.id,processViewId:y,size:t})]:[2]})}),function(e){return t.apply(this,arguments)}},[r,x,y]);(0,tr.C)((t=(0,$._)(function(e,t){var n,o,i,l,a,c,s,u,d,f,h,p,v;return(0,J.Jh)(this,function(m){switch(m.label){case 0:if(n=t.signal,!("RECONNECTING_TO_LOCAL_EXECUTION"===g||"START_EXECUTING_LOCALLY"===g)||!W||!R||!x)return[2];o="RECONNECTING_TO_LOCAL_EXECUTION"===g,l=(i=e.shellExec.connect.stream({id:r,processViewId:y,userId:x.id},{signal:n})).reqWritable,a=i.resReadable,k.current=l,null==Q||Q(W.getSize()),o&&W.clear(),c=!1,s=!1,u=!1,m.label=1;case 1:m.trys.push([1,6,7,12]),f=(0,e7._)(a),m.label=2;case 2:return[4,f.next()];case 3:if(!(s=!(h=m.sent()).done))return[3,5];if(p=h.value,c&&(c=!0,b("EXECUTING_LOCALLY")),!p.ok){if("UNEXPECTED_DISCONNECT"===p.payload.code||"CANCEL"===p.payload.code)return b("RECONNECTING_TO_LOCAL_EXECUTION"),[3,5];if("NO_PROCESS_MATCHING_ID"===p.payload.code||"PROCESS_IS_NOT_RUNNING"===p.payload.code)return W.clear(),W.write(th),b("FINISHED_EXECUTING_LOCALLY"),M.current({result:"",exitCode:-1}),[3,5];throw Error("[".concat(p.payload.code,"]: ").concat(p.payload.message))}p.ok&&"output"===p.payload.$kind&&R(p.payload.output),m.label=4;case 4:return s=!1,[3,2];case 5:return[3,12];case 6:return v=m.sent(),u=!0,d=v,[3,12];case 7:if(m.trys.push([7,,10,11]),!(s&&null!=f.return))return[3,9];return[4,f.return()];case 8:m.sent(),m.label=9;case 9:return[3,11];case 10:if(u)throw d;return[7];case 11:return[7];case 12:return[2]}})}),function(e,n){return t.apply(this,arguments)}),[W,R,g,r,x,Q,y,M]),(0,tr.C)((n=(0,$._)(function(e,t){var n,o,i,l,a,c,s,u,d,f,h,p;return(0,J.Jh)(this,function(v){switch(v.label){case 0:if(n=t.signal,!R||!K)return[2];o=new AbortController,i=e.shellExec.monitor.subscribe({id:r},{signal:AbortSignal.any([o.signal,n])}).resReadable,l=!1,a=!1,v.label=1;case 1:v.trys.push([1,8,9,14]),s=(0,e7._)(i),v.label=2;case 2:return[4,s.next()];case 3:if(!(l=!(u=v.sent()).done))return[3,7];if(!(d=u.value).ok){if("NO_PROCESS_MATCHING_ID"===d.payload.code)return[3,6];if("UNEXPECTED_DISCONNECT"===d.payload.code||"CANCEL"===d.payload.code)return[3,7];throw Error("[".concat(d.payload.code,"]: ").concat(d.payload.message))}if("NotStarted"!==(f=d.payload).state&&E(Object.keys(null!==(h=f.userIdsToProcessViewIds)&&void 0!==h?h:{}).map(function(e){return parseInt(e,10)})),!(f.state!==U.current))return[3,6];if("Finished"!==f.state)return[3,5];return b("FINISHED_EXECUTING_LOCALLY"),[4,K({exitCode:f.exitCode})];case 4:v.sent(),R(th),o.abort(),v.label=5;case 5:U.current=f.state,v.label=6;case 6:return l=!1,[3,2];case 7:return[3,14];case 8:return p=v.sent(),a=!0,c=p,[3,14];case 9:if(v.trys.push([9,,12,13]),!(l&&null!=s.return))return[3,11];return[4,s.return()];case 10:v.sent(),v.label=11;case 11:return[3,13];case 12:if(a)throw c;return[7];case 13:return[7];case 14:return[2]}})}),function(e,t){return n.apply(this,arguments)}),[R,r,K,U]),(0,tr.C)(function(e){return function(){var t="EXECUTING_LOCALLY"===Z.current,n=1===T.current.length;t&&n&&(null==K||K({exitCode:-1})),void 0!==C.current&&e.shellExec.disconnect.rpc({id:r,processViewId:y,userId:C.current.id})}},[Z,K,C,r,y,T]),(0,O.useEffect)(function(){v||"EXECUTING_LOCALLY"!==Z.current||(b("FINISHED_EXECUTING_LOCALLY"),null==K||K({exitCode:-1}))},[v,Z,K]),(0,O.useEffect)(function(){"HAS_STORED_RESULT"===g&&W&&(W.write(i),W.write(th))},[W,g,i,o]);var ee=(0,O.useCallback)(function(e){return I(function(){return e}),function(){}},[]),et=(0,O.useMemo)(function(){return _.map(function(e){return w.find(function(t){return t.id===e})}).filter(Boolean)},[_,w]);return(0,a.BX)(u.G,{children:[(0,a.tZ)(tv,{step:g,exitCode:s,command:o,presence:et}),(0,a.BX)(u.G,{css:tf.terminalWrapper,style:{height:V},children:["LOADING"===g?(0,a.tZ)(e4.Z,{}):null,(0,a.BX)(e6.VU,{xterm:W,wrapperResizeRef:F,bufferHeight:H,onInput:function(e){if(!k.current)return!1;var t=new Uint8Array(tc.from(e));k.current.write({$kind:"stdin",stdin:t})},setOnMessage:ee,onResizeTerminal:function(e){null==Q||Q(e)},onKeyDown:function(e){"f"===e.key&&(0,tn.jh)(e)&&(B(!0),e.preventDefault())},children:[W&&D?(0,a.tZ)(u.G,{css:tf.searchWrapper,children:(0,a.tZ)(tt.R,{searchValue:X,setSearchValue:N,findPrevious:W.findPrevious,findNext:W.findNext,exit:function(){return B(!1)}})}):null,(0,a.tZ)(e6.UB,{xtermRef:z,visibleHeight:V,maxHeight:300,onContextMenu:function(e){return j(e,{command:Y})}})]})]})]})}var tg=(0,d.X)({container:[f.l0.colWithGap(12)],list:[f.l0.colWithGap(8),{"& > *":{maxWidth:"320px"}}]});function tb(e){var t=e.suggestedTemplates,n=e.suggestedTemplateCard;if(0===t.length)return null;var r=t[0];return(0,a.BX)(u.G,{css:tg.container,children:[(0,a.tZ)(eN.R,{}),(0,a.tZ)(eC.xv,{variant:"subheadDefault",children:"Here's your Repl"}),(0,a.tZ)(u.G,{css:tg.list,children:n({template:r})})]})}var tZ=(0,d.X)({header:[f.l0.rowWithGap(8),f.l0.align.center]});function ty(e){var t,n;return(0,a.BX)(u.G,{css:tZ.header,children:[(0,a.tZ)(ep.R,{advanced:!0,size:24,showUsername:!0}),e.showUpsell?(0,a.tZ)(eg.C,{}):null,(0,a.tZ)(eo.EK,{textVariant:"small",textColor:"dimmest",date:e.date}),(null===(t=e.intent)||void 0===t?void 0:t.kind)==="message"?(0,a.tZ)(ev.Dz,{intent:e.intent.value,icon:{color:em.TV.foregroundDimmest,size:12},text:{color:"dimmest",variant:"small"}}):null,(null===(n=e.intent)||void 0===n?void 0:n.kind)==="inline"?(0,a.tZ)(ev.Pr,{type:e.intent.value,icon:{color:em.TV.foregroundDimmest,size:12},text:{color:"dimmest",variant:"small"}}):null,(0,a.tZ)(ev.gg,{model:e.model,icon:{color:em.TV.foregroundDimmest,size:12},text:{color:"dimmest",variant:"small"}})]})}function tx(e){if(!e)return null;var t=e.contents.contents,n={type:p.BY.MODEL_TYPE_UNKNOWN,overrideModelName:"",modelUsedForResponse:{readable:"",qualified:""}},r=null,o=ee(e);(null==t?void 0:t.$kind)==="messageEventContents"&&(r={value:t.messageEventContents.intent,kind:"message"},n=t.messageEventContents.usedModelSelector);var i=et(e);return{id:e.id,created:e.created,state:e.state,intent:r,error:i,model:n,suggestedTemplates:o}}var tC=(0,d.X)({event:[f.l0.px(16),f.l0.py(8),f.l0.colWithGap(8)]}),tw=(0,O.memo)(function(e){var t,n=(0,p.Mi)(e.id,tx);return n?(0,a.BX)(u.G,{css:tC.event,dataCy:"message-from-ai",children:[(0,a.tZ)(ty,{date:n.created,intent:n.intent,model:n.model.type}),(0,a.tZ)(en.M4,{id:e.id,disableAnchorTags:!!(null===(t=n.suggestedTemplates)||void 0===t?void 0:t.length),state:n.state}),n.state===p.he.COMPLETE?(0,a.BX)(a.HY,{children:[void 0!==n.suggestedTemplates&&e.suggestedTemplateCard?(0,a.tZ)(tb,{suggestedTemplates:n.suggestedTemplates.map(function(e){return{title:e.name,description:e.description,iconUrl:e.icon,ownerUsername:e.ownerUsername,slug:e.slug}}),suggestedTemplateCard:e.suggestedTemplateCard}):null,n.error?(0,a.tZ)(ez,{type:n.error}):null]}):null]}):null}),tS=n(27030);function t_(e){if((null==e?void 0:null===(t=e.contents.contents)||void 0===t?void 0:t.$kind)!=="benchmarkConclusion")return null;var t,n=e.contents.contents.benchmarkConclusion;return{completionReason:n.completionReason,exception:n.exception,steps:n.steps}}function tE(e){var t=(0,tS.k)(),n=(0,p.Mi)(e.id,t_);return t&&n?(0,a.BX)(u.G,{children:[(0,a.tZ)(u.G,{children:(0,a.tZ)(eC.xv,{variant:"headerDefault",children:"Benchmark Conclusion:"})}),(0,a.tZ)(u.G,{children:(0,a.BX)(eC.xv,{color:"dimmer",children:["Reason: ",n.completionReason]})}),(0,a.tZ)(u.G,{children:(0,a.BX)(eC.xv,{color:"dimmer",children:["Exception: ",n.exception]})}),(0,a.tZ)(u.G,{children:(0,a.BX)(eC.xv,{color:"dimmer",children:["Steps: ",n.steps]})})]}):null}var tT=n(14118),tk=n(37475),tA=n(25731),tR=n(25414),tI=n(10182),tG=n(64206),tD=n(34763),tB=function(){var e=(0,tD.r)(),t=e.showAiUpsell,n=e.refetch,r=(0,l._)((0,O.useState)(!1),2),o=r[0],i=r[1];return t?(0,a.BX)(a.HY,{children:[(0,a.tZ)(u.G,{tag:"button",css:tP.bannerWrapper,onClick:function(){return i(!0)},children:(0,a.tZ)(g.E,{icon:(0,a.tZ)(tG.Z,{}),colorway:"yellow",text:"You’re using the free Basic AI model. Upgrade to get better AI responses and more accurate code generation and analysis.",css:tP.banner})}),(0,a.tZ)(h.Z,{isOpen:o,onClose:function(){return i(!1)},onPurchaseComplete:function(){return n()},type:"purchase",contextualUpsell:(0,a.BX)(a.HY,{children:[(0,a.tZ)(eC.xv,{variant:"subheadBig",children:"Upgrade for Advanced AI"}),(0,a.tZ)(eC.xv,{multiline:!0,children:"Get the most advanced model with higher quality responses and generation"})]}),analyticsContext:{upgrade:{context:"ai_chat_upsell"}}})]}):null},tP=(0,d.X)({bannerWrapper:[f.l0.cursor.pointer,f.l0.textAlign.left],banner:[f.l0.borderRadius(0),f.l0.minHeight(46)]}),tX=n(10578),tL=(0,d.X)({upsellWrapper:[f.l0.position.sticky],loading:[f.l0.center,f.l0.flex.growAndShrink(1)]});function tN(e){var t,n,r,o=e.workspace,i=e.sessionId,l=e.parentToActiveChild,c=e.replCreationSession,s=e.setActiveChild,d=e.onStartLocalShellExecution,f=e.onEndLocalShellExecution,h=e.getFileContext,v=e.shouldAutoscrollRef,m=(0,p.Q4)(i),g=(0,tk.iM)(),b=(0,tT.P5)({controlName:"flag-pid2-shell-in-ai-chat",logFlagToAnalytics:!1}),Z=g&&b,y=(0,p.nW)(null!==(t=null==m?void 0:m.id)&&void 0!==t?t:null,l),x=y.chatEvents,C=y.loading,w=y.getEvents,S=x.length?x[x.length-1].id:void 0,_=(0,O.useRef)(new Map),E=null!==(n=null==m?void 0:m.id)&&void 0!==n?n:"";return C&&!x.length?(0,a.tZ)(u.G,{css:tL.loading,children:(0,a.tZ)(tX.Z,{})}):(0,a.tZ)(tR.sQ,{value:null!==(r=null==o?void 0:o.codeInsertObservable)&&void 0!==r?r:(0,tA.u)(null),children:(0,a.BX)(tI.h,{shouldAutoScrollRef:v,scrollCacheKey:E,scrollCache:_.current,children:[o?(0,a.tZ)(u.G,{css:tL.upsellWrapper,children:(0,a.tZ)(tB,{})}):null,x.map(function(e){var t=e.id;switch(e.view){case"userMessage":return(0,a.tZ)(eh,{id:t,openFile:null==o?void 0:o.openFile,onStartLocalShellExecution:d},t);case"aiMessage":if(!o)return(0,a.tZ)(tw,{id:t,suggestedTemplateCard:null==c?void 0:c.suggestedTemplateCard,isLastEvent:t===S},t);return(0,a.tZ)(eX,{value:null!=h?h:null,children:(0,a.tZ)(e2,{id:t,getEvents:w,setActiveChild:s,openFile:o.openFile,openWebview:o.openWebview,listFiles:o.listFiles,addSecretEntries:o.addSecretEntries,onStartLocalShellExecution:d,isLastEvent:t===S})},t);case"localShellExecution":return Z&&(null==o?void 0:o.openFile)&&(null==o?void 0:o.listFiles)?(0,a.tZ)(td,{id:t,openFile:o.openFile,openWebview:o.openWebview,listFiles:o.listFiles,onEndLocalShellExecution:f,isLastEvent:t===S},t):null;case"benchmarkConclusion":return(0,a.tZ)(tE,{id:t},t);default:return null}})]})})}var tM=n(42516),tO=n(22192),tU=n(75710),tq=n(41960),tV=n(63062),tH=n(17695),tF=n(82549),tW=n(71137),tz=n(30043),tj=n(88504),tY=n(84238),t$=n(44935),tK=(0,tO.$)(["fontSize","padding","border"]),tJ=tK.cssVars,tQ=tK.styleTokens,t0=(0,d.X)({root:[f.l0.rowWithGap(4),f.l0.center,f.l0.flex.growAndShrink(1)],input:[{backgroundColor:"transparent",border:tQ.border,fontSize:tQ.fontSize,padding:tQ.padding},f.l0.flex.growAndShrink(1)]});function t1(e){var t,n,r=(0,l._)((0,O.useState)(e.initialValue),2),o=r[0],i=r[1],c=(0,L.Z)(e.onCancel),s=(0,tY.Z)(function(){return c.current()},[]),d=(0,O.useRef)(null);(0,O.useEffect)(function(){var e;null===(e=d.current)||void 0===e||e.select()},[]);var h=e.compact?(t={},(0,tM._)(t,tJ.border,"0 none"),(0,tM._)(t,tJ.fontSize,f.TV.fontSizeSmall),(0,tM._)(t,tJ.padding,"0 ".concat(f.TV.space2)),t):(n={},(0,tM._)(n,tJ.padding,"".concat(f.TV.space8)),(0,tM._)(n,tJ.fontSize,f.TV.fontSizeDefault),n);return(0,a.tZ)(u.G,{style:h,innerRef:s,css:t0.root,tag:"form",onSubmit:function(t){t.preventDefault(),o&&e.onSubmit(o)},children:(0,a.tZ)(t$.II,{placeholder:"Name this chat",ref:d,css:t0.input,value:o,onChange:function(e){return i(e.currentTarget.value)},onKeyDown:function(t){"Escape"===t.key&&e.onCancel()}})})}function t2(e){var t=e.text,n=(0,eK._)(e,["text"]),r=(0,O.useRef)(null),o=(0,O.useRef)(t);return(0,O.useEffect)(function(){if(o.current!==t){var e=t.length;!function n(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;requestAnimationFrame(function(){var i=r.current;i&&(i.textContent=t.slice(0,o),o!==e&&n(o+1))})}()}},[t]),(0,O.useEffect)(function(){o.current=t},[t]),(0,a.tZ)(eC.xv,(0,eZ._)((0,eb._)({},n),{ref:r,children:t}))}var t5=n(51361),t7=n(86280),t3=n(41026),t6=n(379),t4=(0,tO.$)(["sessionBackground","actionsButtonDisplay"]),t8=t4.cssVars,t9=t4.styleTokens,ne=(0,d.X)({loading:[f.l0.coverContainer,f.l0.center],tabList:[f.l0.position.sticky,f.l0.top(0),f.l0.backgroundColor.backgroundDefault,f.l0.rowWithGap(4),f.l0.p(8),f.l0.align.center,f.l0.justify.spaceBetween],tabListLeft:[f.l0.viewStyle,f.l0.rowWithGap(2)],tabListRight:{justifySelf:"end"},tab:[f.l0.viewStyle,ex.gU.nofill,f.l0.px(8),f.l0.height(30),f.l0.justify.center,f.l0.borderRadius(4),{"&[data-selected]":{backgroundColor:ex.vb.interactiveBackgroundActive}}],sessions:[f.l0.overflowY("auto"),f.l0.flex.growAndShrink(1),f.l0.px(8)],editTimestamp:[f.l0.px(4)],session:[f.l0.p(8),f.l0.border({direction:"bottom"}),ex.gU.listItem,f.l0.borderRadius(4),(i={backgroundColor:t9.sessionBackground},(0,tM._)(i,f.BC.canHover,(0,tM._)({},t8.actionsButtonDisplay,"none")),(0,tM._)(i,"&:hover",(0,tM._)({},t8.actionsButtonDisplay,"block")),i)],emptyState:[f.l0.center,f.l0.p(16)],header:[f.l0.rowWithGap(4),f.l0.height(24),f.l0.align.center],title:[f.l0.flex.growAndShrink(1)],actionsButton:[{opacity:.5,display:t9.actionsButtonDisplay,"&:hover":{opacity:1}}]});function nt(e){var t=e.onClick;return(0,a.BX)(u.G,{style:(0,tM._)({},t8.sessionBackground,f.TV.accentPrimaryDimmest),css:ne.session,onClick:t,children:[(0,a.tZ)(u.G,{css:ne.header,children:(0,a.tZ)(u.G,{css:ne.title,children:(0,a.tZ)(eC.xv,{multiline:!1,children:"New Chat"})})}),(0,a.tZ)(eC.xv,{multiline:!1,color:"dimmest",variant:"small",children:"just now"})]})}var nn=(0,d.X)({root:[f.l0.p(4),f.l0.borderRadius(),f.l0.flex.growAndShrink(0)]});function nr(){return(0,a.tZ)(t6.D,{css:nn.root,colorway:"blurple",text:"Agent"})}function no(e){var t,n=e.selected,r=e.onClick,o=e.onRename,i=e.onToggleArchived,c=e.session,s=(0,l._)((0,O.useState)(!1),2),d=s[0],h=s[1],v=(0,t7.av)(),m=v.menuProps,g=v.triggerProps,b=v.open;return d?(0,a.BX)(u.G,{children:[(0,a.tZ)(t1,{initialValue:null!==(t=c.title)&&void 0!==t?t:"",onCancel:function(){return h(!1)},onSubmit:function(e){o(e),h(!1)}}),(0,a.tZ)(u.G,{css:ne.editTimestamp,children:(0,a.tZ)(eo.EK,{textColor:"dimmest",textVariant:"small",date:c.created})})]}):(0,a.BX)(a.HY,{children:[(0,a.BX)(u.G,(0,eZ._)((0,eb._)({style:n?(0,tM._)({},t8.sessionBackground,f.TV.backgroundHigher):void 0,css:ne.session,onClick:r},g),{children:[(0,a.BX)(u.G,{css:ne.header,children:[c.sessionType===p.FF.AGENT_SESSION?(0,a.tZ)(nr,{}):null,(0,a.tZ)(u.G,{css:ne.title,children:(0,a.tZ)(t2,{multiline:!1,text:c.title||"Untitled"})}),(0,a.tZ)(ej.hU,{css:ne.actionsButton,alt:"Actions",tooltipBehavior:"hidden",onClick:function(e){var t=e.target.getBoundingClientRect();b({x:t.x,y:t.y})},children:(0,a.tZ)(t3.Z,{})})]}),(0,a.tZ)(eo.EK,{textColor:"dimmest",textVariant:"small",date:c.created})]})),(0,a.BX)(t7.xV,(0,eZ._)((0,eb._)({},m),{children:[(0,a.tZ)(t7.Zo,{onClick:function(){return h(!0)},children:"Rename"}),(0,a.tZ)(t7.Zo,{onClick:i,children:c.archived?"Unarchive":"Archive"})]}))]})}function ni(){return(0,a.tZ)(u.G,{css:ne.emptyState,children:(0,a.tZ)(eC.xv,{color:"dimmest",children:"No chats"})})}function nl(e){var t=e.currentSessionId,n=e.loading,r=(0,p.u0)();return n&&!r.length?(0,a.tZ)(u.G,{css:ne.loading,children:(0,a.tZ)(tX.Z,{})}):(0,a.BX)(u.G,{css:ne.sessions,children:[n||0!==r.length?null:(0,a.tZ)(ni,{}),r.map(function(n){return(0,a.tZ)(no,{session:n,selected:n.id===t,onClick:function(){return e.onSessionClick(n.id)},onToggleArchived:function(){return e.onToggleArchived(n,e.currentSessionId)},onRename:function(t){return e.updateSession(n.id,{title:t})}},n.id)})]})}function na(e){var t=e.currentSessionId,n=e.loading,r=(0,p.Ik)();return n&&!r.length?(0,a.tZ)(u.G,{css:ne.loading,children:(0,a.tZ)(tX.Z,{})}):(0,a.BX)(u.G,{css:ne.sessions,children:[0===r.length?(0,a.tZ)(nt,{onClick:function(){return e.onNewSessionClick()}}):null,r.map(function(n){return(0,a.tZ)(no,{session:n,selected:n.id===t,onClick:function(){return e.onSessionClick(n.id)},onToggleArchived:function(){return e.onToggleArchived(n,e.currentSessionId)},onRename:function(t){return e.updateSession(n.id,{title:t})}},n.id)})]})}var nc=["Chats","Archived"];function ns(e){var t=(0,l._)((0,O.useState)("Chats"),2),n=t[0],r=t[1];return(0,a.BX)(t5.mQ,{selectedKey:n,onSelectionChange:function(t){r(t),e.refetch({archivedOnly:"Archived"===t})},children:[(0,a.BX)(u.G,{css:ne.tabList,children:[(0,a.tZ)(t5.td,{"aria-label":"Chats",css:ne.tabListLeft,children:nc.map(function(e){return(0,a.tZ)(t5.OK,{id:e,css:ne.tab,children:(0,a.tZ)(eC.xv,{color:"dimmer",children:e})},e)})}),(0,a.tZ)(u.G,{css:ne.tabListRight,children:(0,a.tZ)(ej.hU,{alt:"New chat",onClick:function(){"Chats"!==n&&r("Chats"),e.onNewSessionClick()},children:(0,a.tZ)(tz.Z,{})})})]}),nc.map(function(t){return(0,a.tZ)(t5.x4,{id:t,children:"Chats"===t?(0,a.tZ)(na,(0,eb._)({},e)):(0,a.tZ)(nl,(0,eb._)({},e))},t)})]})}function nu(e){var t,n=(0,l._)((0,O.useState)(!1),2),r=n[0],o=n[1];return r?(0,a.tZ)(t1,{compact:!0,initialValue:null!==(t=e.session.title)&&void 0!==t?t:"",onCancel:function(){return o(!1)},onSubmit:function(t){o(!1),e.onRename(t)}}):(0,a.tZ)(nf,{session:e.session,onRename:function(){return o(!0)},onToggleArchived:e.onToggleArchived})}var nd=(0,d.X)({root:[f.l0.flex.growAndShrink(1),{maxWidth:"100%"}],button:[f.l0.px(4),f.l0.reset.button,f.l0.rowWithGap(4),f.l0.align.center,f.l0.flex.growAndShrink(1),ex.gU.nofill,{fontWeight:f.TV.fontWeightMedium,svg:[f.l0.color.foregroundDimmest],"&:hover svg":[f.l0.color.foregroundDimmer]}],popover:[f.l0.borderRadius(4),f.l0.shadow(1),f.l0.border()],item:[ex.gU.listItem,f.l0.minWidth(140),f.l0.px(4),f.l0.py(2)]});function nf(e){var t=["Rename",e.session.archived?"Unarchive":"Archive"],n=(0,tj.L7)({items:t,onSelectedItemChange:function(t){switch(t.selectedItem){case"Rename":e.onRename();break;case"Archive":case"Unarchive":e.onToggleArchived()}}}),r=(0,l._)((0,O.useState)(null),2),o=r[0],i=r[1],c=(0,l._)((0,O.useState)(null),2),s=c[0],d=c[1],f=(0,eA.D)(o,s,{modifiers:[{name:"offset",options:{offset:[0,8]}},{name:"preventOverflow",options:{padding:16}}],placement:"bottom"});return(0,a.tZ)(a.HY,{children:(0,a.BX)(u.G,{css:nd.root,children:[(0,a.BX)(u.G,(0,eZ._)((0,eb._)({tag:"button",css:nd.button},n.getToggleButtonProps({refKey:"innerRef",ref:i})),{children:[e.session.sessionType===p.FF.AGENT_SESSION?(0,a.tZ)(nr,{}):null,(0,a.tZ)(t2,{variant:"small",color:e.session.title?"default":"dimmest",multiline:!1,text:e.session.title||"New chat"}),(0,a.tZ)(tF.Z,{rotate:n.isOpen?180:0,size:12})]})),(0,a.tZ)(u.G,(0,eZ._)((0,eb._)({},n.getMenuProps({refKey:"innerRef"})),{children:n.isOpen?(0,a.tZ)(tV.h,{children:(0,a.tZ)(ea.Tg,(0,eZ._)((0,eb._)({elevated:!0,style:f.styles.popper,innerRef:d,css:nd.popover},f.attributes.popper),{children:t.map(function(e,t){var r=n.highlightedIndex===t?{backgroundColor:ex.vb.interactiveBackground}:void 0;return(0,a.tZ)(u.G,(0,eZ._)((0,eb._)({css:nd.item,style:r},n.getItemProps({refKey:"innerRef",item:e,index:t})),{children:(0,a.tZ)(eC.xv,{variant:"small",children:e})}),e)})}))}):null}))]})})}var nh=(0,d.X)({root:[f.l0.rowWithGap(4)],items:[f.l0.border({direction:"bottom"}),f.l0.maxWidth(280)],divider:[f.l0.border({direction:"bottom",color:f.TV.outlineDimmest})]});function np(e){var t=e.basic,n=e.advanced,r=e.isPro,o=e.onUpgrade,i="basic"===e.currentModel?t:n,c=i.usage/i.limit>.95,s=(0,l._)((0,O.useState)(!1),2),d=s[0],f=s[1];return(0,a.BX)(u.G,{css:nh.root,children:[c?(0,a.tZ)(C.cF,{used:i.usage,total:i.limit,inline:!0}):null,(0,a.BX)(tq.xo,{label:"usage",isOpen:d,onOpenChange:function(e){e&&(0,X.j)(X.U3.AI_CHAT_EVENT,{action:"viewed_usage",intent_type:null,model:null,user_model_selection:null,message_content:null,message_source:"chat_pane"}),f(e)},children:[(0,a.tZ)(ej.hU,{alt:"Usage",children:(0,a.tZ)(tH.Z,{})}),(0,a.BX)(u.G,{css:nh.items,children:[(0,a.tZ)(C.cv,{quota:{used:t.usage,total:t.limit},selected:!1,hasAccessToAdvancedModel:r}),(0,a.tZ)(u.G,{css:nh.divider}),(0,a.tZ)(C.LX,{hasAccessToAdvancedModel:r,selected:!1,quota:{used:n.usage,total:n.limit},onUpgrade:o})]})]})]})}var nv=(0,d.X)({root:[f.l0.height(36),f.l0.rowWithGap(4),f.l0.px(2),f.l0.justify.spaceBetween,f.l0.align.center,f.l0.border({color:f.TV.outlineDimmest,direction:"bottom"})],center:[f.l0.flex.growAndShrink(1),f.l0.align.center],right:[f.l0.rowWithGap(0)]});function nm(e){var t=(0,l._)(e.children,2),n=t[0],r=t[1];return(0,a.BX)(u.G,{css:nv.root,children:[(0,a.tZ)(ej.hU,{alt:"All Chats",onClick:function(){return e.onSidebarButtonClick()},children:(0,a.tZ)(tW.Z,{})}),(0,a.tZ)(u.G,{css:nv.center,children:n}),(0,a.BX)(u.G,{css:nv.right,children:[r,(0,a.tZ)(ej.hU,{alt:"New Chat",onClick:function(){return e.onAddButtonClick()},children:(0,a.tZ)(tz.Z,{})})]})]})}var ng=n(37862),nb=n(14074),nZ=n(82973),ny=(0,tO.$)(["sidebarTransform","mainPaddingLeft"]),nx=ny.cssVars,nC=ny.styleTokens,nw=(0,d.X)({main:[f.l0.position.relative,f.l0.flex.growAndShrink(1),f.l0.justify.end]}),nS=(0,d.X)({content:[f.l0.position.relative,f.l0.flex.growAndShrink(1),f.l0.height("100%"),f.l0.container("content")],header:[{zIndex:1}],sidebar:[f.l0.border({direction:"right",color:f.TV.outlineDimmest}),f.l0.position.absolute,f.l0.top(0),f.l0.left(0),f.l0.height("100%"),f.l0.width("100%"),f.l0.maxWidth(200),f.l0.overflowY("auto"),(0,tM._)({zIndex:1,transform:nC.sidebarTransform,transitionProperty:"transform",transitionDuration:tU.H.duration},f.nC.min(500,"content"),[f.l0.width(200),{transitionDuration:"0s"}])],main:[nw.main],mainWithSidebar:[nw.main,(0,tM._)({},f.nC.min(500,"content"),{paddingLeft:nC.mainPaddingLeft})]});function n_(e){var t,n,r,o,i,c,s,d,f,h,v,m,g=e.sessionId,b=e.children,Z=e.backgroundColor,y=e.hideHeader,x=e.hideSidebar,C=e.setSessionId,w=e.onUpgrade,S=(0,eK._)(e,["sessionId","children","backgroundColor","hideHeader","hideSidebar","setSessionId","onUpgrade"]),_=(0,p.ZR)().hasAccessToAdvancedModel,E=(0,p.lw)(),T=(0,p.xe)(),k=(0,l._)((0,p.Ni)(),1)[0],A=(t=(0,p.Ik)().length>1,n=(0,B.T3)(),o=(r=(0,l._)((0,O.useState)(function(){var e=nZ.Z.get("chat-sidebar-open","boolean");return(null!==e?e:t)&&!n}),2))[0],i=r[1],c=(0,O.useRef)(0),s=(0,ng.Z)(function(e){return c.current=e.width}),d=(0,O.useRef)(null),f=(0,O.useRef)(null),h=(0,O.useCallback)(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).ifNecessary;if(!e){i(!1);return}c.current<500&&i(!1)},[]),(0,O.useEffect)(function(){d.current&&null===nZ.Z.get("chat-sidebar-open","boolean")&&t&&i(d.current.clientWidth>500)},[t]),(0,O.useEffect)(function(){var e=function(e){var t;!(!f.current||e.target instanceof HTMLElement&&f.current.contains(e.target))&&e.target instanceof HTMLElement&&(null===(t=d.current)||void 0===t?void 0:t.contains(e.target))&&h({ifNecessary:!0})};if(o)return document.addEventListener("mousedown",e),function(){document.removeEventListener("mousedown",e)}},[o,h]),v=(0,O.useCallback)(function(){i(function(e){return e||(0,X.j)(X.U3.AI_CHAT_EVENT,{action:"chat_sidebar_opened",intent_type:null,model:null,user_model_selection:null,message_content:null,message_source:"chat_pane"}),nZ.Z.set("chat-sidebar-open",!e),!e})},[]),{rootRef:(0,nb.l)(d,s),sidebarRef:f,toggle:v,close:h,isOpen:o}),R=(0,p.nV)(),I=(0,p.Q4)(g);function G(){(0,X.j)(X.U3.AI_CHAT_EVENT,{action:"new_chat",intent_type:null,model:null,user_model_selection:null,message_content:null,message_source:"chat_pane"}),A.close({ifNecessary:!0}),S.onNewSessionClick()}var D=(0,p.om)(),P=(0,p._X)();function L(e,t){if((0,X.j)(X.U3.AI_CHAT_EVENT,{action:e.archived?"chat_unarchived":"chat_archived",intent_type:null,model:null,user_model_selection:null,message_content:null,message_source:"chat_pane"}),e.id===t){var n=e.archived?D():P();if(n.length>1){var r=n.find(function(t){return t.id!==e.id});C(r?r.id:null)}else G()}R(e.id,{archived:!e.archived})}return(0,a.BX)(u.G,{innerRef:A.rootRef,css:nS.content,style:(m={},(0,tM._)(m,nx.sidebarTransform,"translateX(".concat(A.isOpen?"0":"-100%",")")),(0,tM._)(m,nx.mainPaddingLeft,(A.isOpen?200:0)+"px"),(0,tM._)(m,"backgroundColor",Z),m),children:[y?null:(0,a.tZ)(ea.Tg,{css:nS.header,children:(0,a.BX)(nm,{onAddButtonClick:G,onSidebarButtonClick:function(){return A.toggle()},children:[I?(0,a.tZ)(nu,{session:I,onRename:function(e){(0,X.j)(X.U3.AI_CHAT_EVENT,{action:"chat_renamed",intent_type:null,model:null,user_model_selection:null,message_content:null,message_source:"chat_pane"}),R(I.id,{title:e})},onToggleArchived:function(){L(I,I.id)}},I.id):null,T?(0,a.tZ)(np,{basic:T.basicModelLimits,advanced:T.advancedModelLimits,isPro:_,currentModel:k,onUpgrade:w}):null]})}),(0,a.BX)(u.G,{css:x?nS.main:nS.mainWithSidebar,children:[x?null:(0,a.tZ)(ea.Tg,{css:nS.sidebar,innerRef:A.sidebarRef,children:(0,a.tZ)(ns,{loading:E.loading,refetch:E.refetch,currentSessionId:g,onSessionClick:C,onNewSessionClick:G,updateSession:R,onToggleArchived:L})}),b]})]})}var nE=n(17098),nT=(0,d.X)({chatLoadingWrapper:[f.l0.flex.growAndShrink(1),f.l0.justify.start,f.l0.align.center,f.l0.p(16)],chatInputWrapper:[f.l0.px(8),f.l0.pb(8),{justifySelf:"end"}],chatErrorWrapper:[f.l0.px(8),f.l0.pb(8),{justifySelf:"end"}]}),nk=(0,O.forwardRef)(function(e,t){var n,r,o,i,d,g,b,Z,_,E,T,k,A,R,I,G,D,q,W,z,j,ee=(0,s.Z)(),et=(0,l._)((0,O.useState)(!1),2),en=et[0],er=et[1],eo=(0,l._)((0,O.useState)("NONE"),2),ei=eo[0],el=eo[1],ea=(0,l._)((0,p.Ni)(),2),ec=ea[0],es=ea[1],eu=(0,l._)((0,O.useState)(!1),2),ed=eu[0],ef=eu[1],eh=e.workspace,ep=e.onSessionChange,ev=(r=(n={recentFilesObservable:e.recentFilesObservable,getFileContext:null==eh?void 0:eh.getFileContext,model:ec}).recentFilesObservable,o=n.getFileContext,i=n.model,d=(0,L.Z)(o),g=(0,p.p)(),b=(0,p.Bk)(),Z=(0,p.Tt)(),E=(_=(0,l._)((0,O.useState)([]),2))[0],T=_[1],(0,O.useEffect)(function(){var e=function(e){return t.apply(this,arguments)};if(r)return e(r.current),r.subscribe((0,Q.Z)(e,{wait:2e3}));function t(){return(t=(0,$._)(function(e){var t,n;return(0,J.Jh)(this,function(r){switch(r.label){case 0:return[4,null===(t=d.current)||void 0===t?void 0:t.call(d,{modelType:"advanced"===i&&b()?p.BY.ADVANCED:p.BY.BASIC,filePreferences:Z,recentFiles:e})];case 1:if(!(n=r.sent()))return[2];return T(function(e){var t=e.filePreferences,n=e.fileContextState,r=new Map(n.fileContext.map(function(e){return[e.filePath,"included"]})),o=!0,i=!1,a=void 0;try{for(var c,s=t[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=(0,l._)(c.value,2),d=u[0],f=u[1];if("exclude"===f){r.delete(d);continue}if(n.unsupportedPreferredFiles.has(d)){r.set(d,"unsupported");continue}r.set(d,"included"===r.get(d)?"included":"overflowing")}}catch(e){i=!0,a=e}finally{try{o||null==s.return||s.return()}finally{if(i)throw a}}return(0,K._)(r.entries()).map(function(e){var t=(0,l._)(e,2);return{path:t[0],inclusionStatus:t[1]}})}({fileContextState:n,filePreferences:Z})),[2]}})})).apply(this,arguments)}},[r,Z,i,d,b]),{fileContextInclusions:E,getFileContext:(0,O.useMemo)(function(){if(o)return function(){var e;return o({modelType:"advanced"===i&&b()?p.BY.ADVANCED:p.BY.BASIC,filePreferences:g(),recentFiles:null!==(e=null==r?void 0:r.current)&&void 0!==e?e:[]})}},[o,g,b,i,r])}),em=ev.fileContextInclusions,eg=ev.getFileContext,eb=(null===(q=e.initialSession)||void 0===q?void 0:q.type)==="session"?e.initialSession.id:void 0,eZ=(0,p.bD)({initialSessionId:eb,getFileContext:eg}),ey=eZ.sendMessage,ex=eZ.sendUpdateEvent,eC=eZ.stopMessage,ew=eZ.loading,eS=eZ.setSessionId,e_=eZ.sessionId,eE=eZ.setActiveChild,eT=eZ.parentToActiveChild;(0,O.useImperativeHandle)(t,function(){return{updateActiveSessionId:function(e){eS(null!=e?e:null)}}});var ek=!e_&&(null===(W=e.initialSession)||void 0===W?void 0:W.type)==="mostRecent";!function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skip,r=(0,L.Z)(t);(0,O.useEffect)(function(){if(!n&&e){e.current&&r.current(e.current);var t=e.subscribe(function(e){r.current(e)});return function(){t()}}},[n,r,e])}((0,p.Zc)(),function(e){!e_&&e&&eS(e)},{skip:!ek}),(0,O.useEffect)(function(){null==ep||ep(e_)},[ep,e_]);var eA=(0,p.Q4)(e_),eR=(0,p.Un)(),eI=(0,p.UK)(),eG=(0,c.Gn)("chatEngine").preferences,eD=(0,O.useRef)(!1),eB=(0,p.G9)({sendMessage:ey,sendUpdateEvent:ex}),eP=eB.onStartLocalShellExecution,eX=eB.onEndLocalShellExecution,eL=(0,p.ZR)().hasAccessToAdvancedModel,eN=(0,p.KV)(),eM=(0,p.xe)(),eO=(0,p.vl)(),eU=(0,v.yL)(eO.qualified).messageCharacters,eq=(0,l._)((0,O.useState)(null),2),eV=eq[0],eH=eq[1],eF=(0,F.useRouter)(),eW=(0,B.S7)(eF,"hideChatInput")||(null==eA?void 0:eA.sessionType)===p.FF.AGENT_SESSION,ez=(0,B.Gv)(eF),ej=(0,B.T3)();function eY(e){if(eS(e),!ee&&(null==eV||eV.focus(),!e)){var t;null==eV||null===(t=eV.setValue)||void 0===t||t.call(eV,"")}}A=(k={enableBridge:ez,sendChatMessage:function(e){ey({kind:"message",message:e,model:"advanced"===ec?p.BY.ADVANCED:p.BY.BASIC,intent:p.$h.NONE})},abortResponse:function(){eC()}}).enableBridge,R=k.sendChatMessage,I=k.abortResponse,G=(0,L.Z)(R),D=(0,L.Z)(I),(0,O.useEffect)(function(){if(A){var e=function(e){return(0,N.I6)(e,function(e){var t=e.type;switch(t){case M.cF.GHOSTWRITER_CHAT_SEND:G.current(e.chatMessage),(0,N.gU)(e.id);break;case M.cF.GHOSTWRITER_CHAT_ABORT_RESPONSE:D.current(),(0,N.gU)(e.id);break;default:(0,U.Z)(t)}})};return window.addEventListener("message",e),function(){return window.removeEventListener("message",e)}}},[D,A,G]),(0,O.useCallback)(function(){var e={messageType:M.cF.GHOSTWRITER_CHAT_FOCUS_INPUT};(0,N.bG)(e,V()())},[]);var e$=(0,p.fX)(),eK=(0,p.dR)(),eJ=(0,p._i)(),eQ=(0,O.useRef)(null),e0=eM?function(e,t){var n=e.basicModelLimits,r=e.advancedModelLimits;switch(t){case p.BY.BASIC:if(n.usage<n.limit)break;return{resetTime:n.resetTime};case p.BY.ADVANCED:if(r.usage<r.limit||0===r.limit)break;return{resetTime:r.resetTime}}return null}(eM,"advanced"===ec?p.BY.ADVANCED:p.BY.BASIC):null,e1=(0,p.gn)(e_,eT),e2=!!(e1&&e1.state===p.he.IN_PROGRESS),e5=null==eh?void 0:eh.performPaneOperation,e7=(0,O.useCallback)(function(){null==e5||e5({operation:"open",pane:{type:"agentProgress"}})},[e5]);return(0,a.BX)(a.HY,{children:[(0,a.BX)(n_,{hideSidebar:e.hideSidebar,hideHeader:e.hideHeader,sessionId:e_,onUpgrade:function(){return er(!0)},onNewSessionClick:function(){eY(null),null==eV||eV.animatePlaceholder(),(0,P.A)(eQ,"border-color",f.TV.accentPrimaryDefault),setTimeout(function(){requestAnimationFrame(function(){var e;null===(e=eQ.current)||void 0===e||e.style.removeProperty("border-color")})},60)},setSessionId:eY,backgroundColor:ez||(null==eh?void 0:eh.isInAgentMode)?void 0:"color-mix(in srgb, ".concat(f.TV.blurpleDefault," 5%, transparent)"),children:[eA&&(null==eA?void 0:eA.sessionType)!==p.FF.AGENT_SESSION?(0,a.tZ)(tN,{workspace:eh,parentToActiveChild:eT,setActiveChild:eE,replCreationSession:e.replCreationSession,sessionId:null==eA?void 0:eA.id,getFileContext:eg,onStartLocalShellExecution:eP,onEndLocalShellExecution:eX,shouldAutoscrollRef:eD}):null,(null==eA?void 0:eA.sessionType)===p.FF.AGENT_SESSION&&(null==eh?void 0:eh.addSecretEntries)?(0,a.tZ)(nE.z,{sessionId:eA.id,shouldAutoscrollRef:eD,onEventClick:e7,addSecretEntries:null==eh?void 0:eh.addSecretEntries,padding:"0 16px"}):null,e_||(null===(z=e.initialSession)||void 0===z?void 0:z.type)==="mostRecent"?null:null===(j=e.renderEmptyState)||void 0===j?void 0:j.call(e,{onPromptClick:eV?function(t){var n,r;t.intent&&el(t.intent),"AGENT"===t.intent&&(null===(r=e.onEnterAgentMode)||void 0===r||r.call(e)),null==eV||null===(n=eV.setValue)||void 0===n||n.call(eV,t.value),ee||null==eV||eV.focus()}:void 0}),eI?(0,a.tZ)(u.G,{css:nT.chatErrorWrapper,children:(0,a.tZ)(y,{})}):(0,a.BX)(u.G,{css:nT.chatInputWrapper,children:[e0?(0,a.tZ)(Y,{type:ec,text:"basic"===ec?"100% quota reached. Upgrade to get unlimited quota.":"Quota reached. Refreshes ".concat((0,H.Z)(new Date(e0.resetTime),"do MMM, hh:mm a"))}):null,eW?null:(0,a.BX)(m.x,{ref:eQ,isConnected:eR,inputRef:function(t){var n;eH(t),null===(n=e.inputRef)||void 0===n||n.call(e,t)},lastEventInProgress:e2,findFiles:null==eh?void 0:eh.findFiles,fileContextInclusions:em,updateFileContext:function(e){return eJ(e.path,e.preference)},openFile:null==eh?void 0:eh.openFile,maxLength:eU,loading:ew,onStop:eC,onSubmit:function(t){var n;eR&&((0,X.j)(X.U3.AI_CHAT_EVENT,{action:"message_sent",intent_type:S.get(ei),model:ec,user_model_selection:ec,message_content:t,message_source:"chat_pane",message_surface:e.analyticsMessageSurface}),ey({kind:"message",message:t,model:(0,p.XM)(ec),intent:(null==eh?void 0:eh.isInAgentMode)||(null==eA?void 0:eA.sessionType)===p.FF.AGENT_SESSION?p.$h.AGENT:null!==(n=w.get(ei))&&void 0!==n?n:p.$h.MESSAGE_ACTION_UNKNOWN,useRag:ed,extraResources:[]},{newSessionType:e.newSessionType}),eD.current=!0)},analyticsSurface:e.analyticsMessageSurface,variant:e.inputVariant,children:[eh?(0,a.tZ)(x.p,{onChange:function(e){return eJ(e.path,e.preference)},unSelectAll:function(e){return eK(e.paths)},selectAll:function(e){return e$(e.paths)},findFiles:eh.findFiles,fileContextInclusions:em,isInMobileWorkspace:ej,useRag:ed,setUseRag:ef}):null,!e.hideModelSelector&&eM?(0,a.tZ)(C.q2,{availableModelNames:eN,userLimits:eM,selectedItem:ec,hasAccessToAdvancedModel:eL,onChange:function(t){if(!eL&&(0,C.LE)(t)){er(!0);return}t!==ec&&(0,X.j)(X.U3.AI_CHAT_EVENT,{action:"model_changed",intent_type:null,model:t,user_model_selection:t,message_content:null,message_source:"chat_pane",message_surface:e.analyticsMessageSurface}),es(t)},advancedChatEngineOverride:eG.chatEngine}):null]}),(null==eA?void 0:eA.sessionType)===p.FF.AGENT_SESSION?(0,a.tZ)(nR,{}):null]})]}),(0,a.tZ)(h.Z,{isOpen:en,onClose:function(){return er(!1)},type:"purchase",analyticsContext:{upgrade:{context:"ai_model_selector",surface:"ghostwriter_power_up_dialog"}}})]})}),nA=(0,d.X)({root:[f.l0.borderRadius(),f.l0.border(),f.l0.p(8),f.l0.colWithGap(4)],text:[{textAlign:"center"}]});function nR(){var e=(0,p.Fv)();return(0,a.BX)(ea.Tg,{css:nA.root,children:[(0,a.BX)(eC.xv,{css:nA.text,color:"dimmer",children:["Return to ",p.oN," to chat"]}),(0,a.tZ)(W.zx,{colorway:"blurple",text:"Enter ".concat(p.oN),onClick:e})]})}},23979:function(e,t,n){n.d(t,{Cn:function(){return x},Dq:function(){return y},J:function(){return b},UB:function(){return S},VU:function(){return w},_5:function(){return T},fB:function(){return _}});var r=n(41733),o=n(30509),i=n(98924),l=n(66626),a=n(3796),c=n(52657),s=n(37862),u=n(22192),d=n(93245),f=n(36809),h=n(63163),p=n(75271),v=n(56738),m=n(37633);function g(e){for(var t=1,n=e.buffer.active._buffer.lines._array,r=e.buffer.active.length;r-- >0;){var o=n[r];if(o){for(var i=!1,l=0;l<e.cols;l++)if(0!==o.hasContent(l)){i=!0;break}if(i){t=r+1;break}}}return t}var b=8,Z=(0,u.$)(["topOffset"]),y=Z.cssVars,x=Z.styleTokens,C=(0,f.X)({wrapper:{display:"grid"},terminal:{gridRow:1,gridColumn:1,position:"sticky",top:x.topOffset,"& .xterm":[h.l0.py(b),h.l0.pl(b),h.l0.height("100%"),h.l0.overflow("hidden")],"& .xterm-viewport":[h.l0.overflow("hidden")]},terminalForHistoricalOutputWrapper:[h.l0.overflow("hidden")]});function w(e){var t=e.autoFocus,n=e.wrapperResizeRef,l=e.xterm,c=e.bufferHeight,s=e.onInput,u=e.setOnMessage,f=e.onResizeTerminal,h=e.children,v=(0,i._)(e,["autoFocus","wrapperResizeRef","xterm","bufferHeight","onInput","setOnMessage","onResizeTerminal","children"]);return(0,p.useEffect)(function(){t&&l&&l.focus()},[l,t]),(0,p.useEffect)(function(){if(l){var e=l.onData(function(e){s(e)}),t=l.onResize(function(){f(l.getSize())});return function(){e.dispose(),t.dispose()}}},[l,s,f]),(0,p.useEffect)(function(){if(l)return u(function(e){return l.write(e)})},[u,l]),(0,a.tZ)(d.G,{innerRef:n,children:(0,a.tZ)(d.G,(0,o._)((0,r._)({},v),{css:C.wrapper,style:(0,r._)({height:c},v.style),children:h}))})}function S(e){var t=e.xtermRef,n=e.visibleHeight,l=e.maxHeight,c=(0,i._)(e,["xtermRef","visibleHeight","maxHeight"]);return(0,a.tZ)(d.G,(0,o._)((0,r._)({innerRef:t,css:C.terminal},c),{style:(0,o._)((0,r._)({},c.style),{height:n,maxHeight:l})}))}function _(e){var t=e.maxHeight,n=e.openFile,r=e.listFiles,o=e.openWebview,i=e.performPaneOperation,a=(0,l._)((0,v.Z)({autoFit:!1,size:{rows:10},openFile:n,listFiles:r,openWebview:o,performPaneOperation:i}),2),u=a[0],d=a[1],f=(0,p.useMemo)(function(){return null==u?void 0:u._term},[u]),h=(0,l._)((0,p.useState)(function(){var e,t,n=null==f?void 0:f._core;return null!==(t=null==n?void 0:null===(e=n._renderService)||void 0===e?void 0:e.dimensions.css.cell.height)&&void 0!==t?t:8}),2),m=h[0],Z=h[1];(0,p.useEffect)(function(){if(f){var e,t=null==f?void 0:f._core,n=null==t?void 0:null===(e=t._renderService)||void 0===e?void 0:e.onDimensionsChange(function(e){Z(e.css.cell.height)});return function(){null==n||n.dispose()}}},[f]);var y=(0,p.useMemo)(function(){return Math.floor((t-2*b)/m)},[t,m]),x=(0,l._)((0,p.useState)("normal"),2),C=x[0],w=x[1],S=(0,l._)((0,p.useState)(1),2),_=S[0],E=S[1],T=(0,l._)((0,p.useState)(1),2),k=T[0],A=T[1],R=(0,l._)((0,p.useState)(!1),2),I=R[0],G=R[1],D=(0,c.Z)(_),B=(0,c.Z)(k),P=(0,c.Z)(C);(0,p.useEffect)(function(){if(f){var e=f.buffer.onBufferChange(function(e){w(e.type),"alternate"===e.type&&(E(y),A(y),G(!1))});return function(){e.dispose()}}},[f,y]);var X=(0,p.useCallback)(function(){if(f){if("alternate"===P.current)E(y);else{var e=g(f),t=e>y;A(e),E(Math.min(e,y)),G(t)}}},[f,y,P]),L=(0,s.Z)(function(e){var t=e.widthChanged;f&&u&&t&&(u.fit(),X())},{type:"debounce",wait:200});(0,p.useEffect)(function(){var e=function(){if(f&&"alternate"!==P.current){var e=g(f),t=Math.min(e,y);e>B.current&&A(e),t>D.current&&E(t),e>y&&G(!0)}};if(f){var t=[f.onLineFeed(e),f.onCursorMove(e)];return function(){t.forEach(function(e){return e.dispose()})}}},[f,D,P,B,y]),(0,p.useEffect)(function(){if(f&&u){var e=u.getSize();e.rows!==y&&f.resize(e.cols,y),X()}},[f,u,y,X]);var N=(0,p.useMemo)(function(){return Math.ceil((Math.min(_,k)+1)*m+2*b)},[_,k,m]),M=(0,p.useMemo)(function(){return Math.ceil(I?(k+1)*m+2*b:N)},[m,I,N,k]);return(0,p.useEffect)(function(){u&&u.fit()},[u,_,k]),{visibleHeight:N,visibleLines:_,bufferHeight:M,bufferLines:k,bufferMode:C,hasScrollback:I,wrapperResizeRef:L,xterm:u,xtermRef:d}}function E(){}function T(e){var t=e.output,n=e.maxHeight,r=_({maxHeight:n,openFile:E,listFiles:function(){return Promise.resolve({error:null,files:[]})},openWebview:E}),o=r.visibleHeight,i=r.bufferHeight,l=r.wrapperResizeRef,c=r.xterm,s=r.xtermRef,u=(0,p.useCallback)(function(e){return c&&(null==c||c.clear(),e(t)),E},[c,t]),f=(0,m.f)();return(0,a.tZ)(d.G,{css:C.terminalForHistoricalOutputWrapper,style:{height:o,background:null==f?void 0:f.background},children:(0,a.tZ)(w,{onInput:E,xterm:c,wrapperResizeRef:l,bufferHeight:i,setOnMessage:u,onResizeTerminal:E,children:(0,a.tZ)(S,{xtermRef:s,visibleHeight:o,maxHeight:n})})})}},47423:function(e,t,n){n.d(t,{Q1:function(){return x},Rz:function(){return Z},xy:function(){return C}});var r=n(27387),o=n(96583),i=n(3796),l=n(4573),a=n(87915),c=n(93245),s=n(24766),u=n(36809),d=n(63163),f=n(85045),h=n(35370),p=n(80137),v=n(13213),m=(0,u.X)({root:[d.l0.rowWithGap(8),d.l0.align.center,d.l0.flex.growAndShrink(1),d.l0.px(8),{userSelect:"none"}],header:[{fontSize:d.TV.fontSizeSmall,opacity:.6},d.l0.color.foregroundDimmest,d.l0.truncate],result:[d.l0.colWithGap(0)],mainRow:[d.l0.rowWithGap(8),d.l0.align.center],fileName:[d.l0.truncate,d.l0.flex.row]});function g(e){var t=e.height,n=e.active,r=e.match,o=r.directory,u=r.filename,d=e.description;return(0,i.BX)(c.G,{css:m.root,style:{height:t},children:[(0,i.tZ)(a.Z,{path:u.text,size:16}),(0,i.BX)(c.G,{css:m.result,children:[o?(0,i.tZ)(c.G,{css:m.header,children:(0,i.tZ)(l.x,{text:o.text+"/",highlight:o.ranges,dimmed:!n})}):null,(0,i.BX)(c.G,{css:m.mainRow,children:[(0,i.tZ)(c.G,{css:m.fileName,children:(0,i.tZ)(l.x,{text:u.text,highlight:u.ranges,dimmed:!n})}),(0,i.tZ)(s.xv,{variant:"small",color:"dimmest",children:d})]})]})]})}var b={match:f.kN,forward:!1,tiebreakers:[function(e,t,n){var r=n(e.item),o=n(t.item),i=r.lastIndexOf("/"),l=o.lastIndexOf("/"),a=Array.from(e.positions).filter(function(e){return e>i}).length;return Array.from(t.positions).filter(function(e){return e>l}).length-a},function(e,t,n){return n(e.item).trim().length-n(t.item).trim().length}]};function Z(e,t){return y.apply(this,arguments)}function y(){return(y=(0,r._)(function(e,t){var n,r;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return[4,new f.Zn(t,b).find(e)];case 1:return n=o.sent().map(function(e){return{path:e.item,score:Math.floor(e.score*v.r.files),ranges:(0,p.Od)(e.positions)}}),[2,(r=(0,p.b8)({queryLength:e.length}))?n.filter(function(e){return e.score>=r}):n]}})})).apply(this,arguments)}function x(e){var t=e.ranges,n=e.path,r=(0,h.UO)(n),o=(0,h.Il)(n);if(!o)return{filename:{text:r,ranges:t.length?t:void 0}};var i=o.length,l=i+1,a=[],c=[],s=!0,u=!1,d=void 0;try{for(var f,p=t[Symbol.iterator]();!(s=(f=p.next()).done);s=!0){var v=f.value;if(v.from<i){a.push({from:v.from,to:Math.min(v.to,i)});var m=v.to-l;if(m<=0)continue;c.push({from:0,to:m});continue}v.from<l||c.push({from:v.from-l,to:v.to-l})}}catch(e){u=!0,d=e}finally{try{s||null==p.return||p.return()}finally{if(u)throw d}}return{filename:{text:r,ranges:c.length?c:void 0},directory:{text:o,ranges:a.length?a:void 0}}}function C(e){var t=e.path,n=e.ranges,r=e.description,o=x({path:t,ranges:null!=n?n:[]}),l=o.directory?44:32;return{height:l,content:(0,i.tZ)(g,{match:o,height:l,description:r})}}},78371:function(e,t,n){n.d(t,{xV:function(){return K},du:function(){return E},av:function(){return j}});var r=n(42516),o=n(41733),i=n(3796),l=n(85451),a=n(15185),c=n(95281),s=n(63062),u=n(14548),d=n(36809),f=n(63163),h=n(75271),p=n(11195),v=n(41974),m=n(48941),g=n(78054),b=n(66626),Z=n(3702),y=n(36309),x=(0,h.createContext)(null);function C(){var e=(0,h.useContext)(x);if(!e)throw Error("Expected store in context");return e}function w(e){return(0,y.Dv)(e,{store:C()})}function S(e){return(0,Z.b)(e,C())}var _=function(e){return(0,y.b9)(e,{store:C()})};function E(e){var t=(0,b._)((0,h.useState)(function(){return(0,m.MT)()}),1)[0];return(0,i.tZ)(x.Provider,{value:t,children:e.children})}var T=(0,n(22192).$)(["display","visibility","transform","maxHeight","width"]),k=T.cssVars,A=T.styleTokens,R=(0,m.cn)(null),I=(0,m.cn)("default"),G=(0,m.cn)({command:null,offset:{x:0,y:0},visible:!1}),D=(0,g.kv)(G,function(e){return e.offset}),B=(0,g.kv)(G,function(e){return e.command}),P=(0,g.kv)(G,function(e){return e.visible}),X=(0,g.kv)(G,function(e){return e.onKeyDownHandler}),L=(0,g.kv)(R,function(e){var t;return null!==(t=null==e?void 0:e.initial)&&void 0!==t?t:null}),N=(0,m.cn)(function(e){var t=e(D);if(!t)return null;var n=t.y,r=window.innerHeight-n,o=e(L),i=null!==o?o-r:0;return i>0&&(n=Math.max(16,n-Math.min(200,i))),n}),M=(0,m.cn)(function(e){var t=e(D);if(!t)return null;var n=t.x,r=window.innerWidth,o=e(U),i=n+(null!=o?o:q)-r+16;return i>0&&(n=Math.max(16,n-i)),n}),O=(0,m.cn)(function(e){var t=e(M),n=e(N);return null==t||null===n?null:(0,r._)({},k.transform,"translate(".concat(t,"px, ").concat(n,"px)"))}),U=(0,m.cn)(null),q=180,V=(0,m.cn)(function(e){var t=e(U);return(0,r._)({},k.width,(null===t?q:t)+"px")}),H=(0,m.cn)(function(e){var t=e(N);return null===t?null:(0,r._)({},k.maxHeight,"calc(100vh - ".concat(f.TV.space16," - ").concat(t,"px)"))}),F=(0,m.cn)(null,function(e,t){t(R,null),t(U,null),t(W,null),t(G,function(e){return(0,v.Uy)(e,function(e){e.visible=!1,e.command=null})})}),W=(0,m.cn)(null),z=(0,m.cn)(null,function(e,t,n){if(t(I,n.background),n.width&&t(U,n.width),n.target){var r=n.target.getBoundingClientRect(),o={x:r.x,y:r.y+r.height+8};t(W,r),t(G,function(e){return(0,v.Uy)(e,function(e){e.command=n.command,e.offset=o,e.visible=!0,e.onKeyDownHandler=n.onKeyDownHandler})});return}t(G,function(e){return(0,v.Uy)(e,function(e){e.command=n.command,e.offset=n.offset,e.visible=!0,e.onKeyDownHandler=n.onKeyDownHandler})})});function j(){var e=_(z),t=_(F),n=S(P),r=(0,u.nZ)({elevated:!0});return{openContextMenu:(0,h.useCallback)(function(t){e(t.target instanceof HTMLElement?{command:t.command,target:t.target,width:t.width,background:r,onKeyDownHandler:t.onKeyDownHandler}:{command:t.command,offset:t.target,target:null,width:t.width,background:r,onKeyDownHandler:t.onKeyDownHandler})},[e,r]),closeContextMenu:t,isVisible:n,onContextMenu:(0,h.useCallback)(function(t,n){var o=n.command,i=n.width,l=n.onKeyDownHandler;t.preventDefault(),e({command:o,offset:{x:t.clientX,y:Math.min(window.innerHeight-64,t.clientY)},target:null,width:i,background:r,onKeyDownHandler:l})},[e,r])}}var Y=(0,d.X)({surface:[f.l0.shadow(3),f.l0.borderRadius(8),f.l0.position.absolute,{top:0,left:0,border:"1px solid",borderColor:f.TV.outlineDefault,maxWidth:"min(500px, calc(100vw - ".concat(f.TV.space16,"))"),minWidth:"min(100px, calc(100vw - ".concat(f.TV.space16,"))"),maxHeight:A.maxHeight,width:A.width,transform:A.transform,visibility:A.visibility,display:A.display}]});function $(){var e=w(W);return e?(0,i.tZ)("div",{style:{position:"fixed",width:e.width,height:e.height,top:e.y,left:e.x}}):null}var K=(0,h.memo)(function(e){var t=e.fontSize,n=_(F),d=w(B),f=w(X),v=S(P),m=(0,h.useRef)(function(){});(0,h.useEffect)(function(){var e=function(e){if(e){var t;null===(t=m.current)||void 0===t||t.call(m);return}};return e(v.current),v.subscribe(e)},[v]);var g=_(R),b=(0,h.useRef)(null);(0,h.useEffect)(function(){var e=function(e){var t;e.target instanceof HTMLElement&&(null===(t=b.current)||void 0===t?void 0:t.contains(e.target))||n()},t=function(){n()},r=function(n){n?(window.addEventListener("blur",t),document.addEventListener("pointerdown",e)):(window.removeEventListener("blur",t),document.removeEventListener("pointerdown",e))},o=v.subscribe(r);return function(){o(),r(!1)}},[v,n]);var Z=S(O);(0,c.j)(b,Z),(0,c.j)(b,S(H)),(0,c.j)(b,v,function(e){var t;return t={},(0,r._)(t,k.visibility,e?"visible":"hidden"),(0,r._)(t,k.display,e?"flex":"none"),t});var y=S(V);(0,c.j)(b,y);var x=(0,a.Z)(),C=w(P)&&!x,E=w(I),T=(0,o._)({},Z.current,y.current);return d?(0,i.BX)(s.h,{children:[(0,i.tZ)($,{}),(0,i.tZ)(p.MT,{autoFocus:C,restoreFocus:!0,contain:!0,children:(0,i.tZ)(u.Tg,{onKeyDown:function(e){"Escape"===e.key&&n()},innerRef:b,css:Y.surface,style:T,background:E,children:(0,i.tZ)(l.X,{iconBreadcrumbs:!0,command:d,onAction:n,onSelect:n,onTotalHeightChange:g,onKeyDown:f,focusRef:m,fontSize:void 0===t?14:t,compact:!0,minimalInputBar:!0})})})]}):null})},35723:function(e,t,n){n.d(t,{E:function(){return o}});var r=[{title:"OpenAI",description:"Integrate with GPT-4, DALL-E, Whisper, and more.",pattern:/^OPENAI_.*/,defaultLink:"https://replit.com/guides/gpt-4o-quickstart-guide#set-up-your-openai-api-key",presetSecrets:[{key:"OPENAI_API_KEY"},{key:"OPENAI_ORG_ID"}]},{title:"Gemini",description:"Leverage Google's latest AI models.",pattern:/^(GEMINI_.*|GOOGLE_API_KEY)/,defaultLink:"https://replit.com/guides/gemini-flash-quickstart-guide#set-up-a-google-api-key"},{title:"Groq",description:"Try a variety of AI models with Groq.",pattern:/^GROQ_.*/,defaultLink:"https://replit.com/guides/groq-chatbot-quickstart#set-up-your-groq-api-key"},{title:"Anthropic",description:"Explore Anthropic's latest Claude AI models.",pattern:/^ANTHROPIC_.*/,defaultLink:"https://replit.com/guides/image2text-ai-app-with-anthropic#add-anthropic-api-key-to-secrets"},{title:"Slack",description:"Use Slack to build interactive apps and bots.",pattern:/^SLACK_.*/,defaultLink:"https://replit.com/guides/slackbot-quickstart#add-secrets",presetSecrets:[{key:"SLACK_SIGNING_SECRET"},{key:"SLACK_APP_TOKEN"},{key:"SLACK_BOT_TOKEN"}]},{title:"HubSpot",description:"Use HubSpot's API to pull customer data.",pattern:/^HUBSPOT_.*/,defaultLink:"https://replit.com/guides/hubspot-deal-data-api-python-flask#getting-started"}];function o(e){var t,n,o=r.find(function(t){return t.pattern.test(e)}),i=null==o?void 0:null===(t=o.presetSecrets)||void 0===t?void 0:t.find(function(t){return t.key===e});return null!==(n=null==i?void 0:i.link)&&void 0!==n?n:null==o?void 0:o.defaultLink}},53616:function(e,t,n){n.d(t,{s:function(){return p}});var r=n(42516),o=n(3796),i=n(36809),l=n(63163),a=n(47767),c=n(22192),s=n(93245),u=(0,c.$)(["fontSize"]),d=u.cssVars,f=u.styleTokens,h=(0,i.X)({button:[l.l0.reset.button,l.l0.flex.row,l.l0.align.center,l.l0.cursor.pointer,l.l0.hover({opacity:1}),{opacity:.6,fontFamily:l.TV.fontFamilyDefault,"*":{fontSize:f.fontSize,borderColor:l.TV.foregroundDimmest,color:l.TV.foregroundDimmest},":hover *":{borderColor:l.TV.foregroundDefault,color:l.TV.foregroundDefault}}],keyCombo:[l.l0.justify.center,{marginLeft:"calc(".concat(f.fontSize," * 0.3)")}]});function p(e){return(0,o.BX)(s.G,{className:e.className,tag:"button",css:h.button,style:(0,r._)({},d.fontSize,e.fontSize+"px"),onClick:e.onClick,children:[(0,o.tZ)(s.G,{children:e.text}),e.keyCombo?(0,o.tZ)(s.G,{css:h.keyCombo,children:(0,o.tZ)(a.bM,{fontSize:.8*e.fontSize,keyCombo:e.keyCombo})}):null]})}},13502:function(e,t,n){n.d(t,{j:function(){return w}});var r=n(27387),o=n(96583),i=n(3796),l=n(62764),a=n(14118),c=n(54505),s=n(86201),u=n(6674),d=n(85551),f=n(26996),h=n(43447),p=n(89774),v=n(98514),m=n(71920),g=n(63163),b=n(31252),Z=n(70625),y=n(75271),x=n(6843),C=n(70108);function w(e){var t,n,w,S,_,E,T,k,A,R,I,G,D,B=e.xterm,P=e.openAIWithMessage,X=e.openShellSearch,L=e.openSearchAndReplace,N=e.openGeneratePrompt,M=e.isOutputsTerminal,O=(n=(t={xterm:B,openAIWithMessage:P,openGeneratePrompt:N}).xterm,w=t.openAIWithMessage,S=t.openGeneratePrompt,_=(0,a.P5)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1}),E=(0,a.P5)({controlName:"flag-ai-in-the-shell",logFlagToAnalytics:!1}),T=(0,b.gf)(C.CH.id),(0,y.useMemo)(function(){if(!_){var e=[];if(E&&S&&e.push({match:x.pl,data:{type:"action",label:"Generate",icon:(0,i.tZ)(h.Z,{color:g.TV.blurpleStronger}),keyboardShortcut:T,run:function(){S()}}}),w&&e.push({match:x.pl,data:{type:"action",label:"Explain",icon:(0,i.tZ)(f.Z,{color:g.TV.blurpleStronger}),run:function(){var e,t;w((t=null!==(e=null==n?void 0:n._term.getSelection())&&void 0!==e?e:"","\nCan you explain this shell output?\n\n```\n".concat(t,"\n```\n")))}}}),0!==e.length)return{data:{type:"context",label:"AI",icon:(0,i.tZ)(d.Z,{})},commands:function(){return e}}}},[E,_,w,T,S,null==n?void 0:n._term])),U=(A=(k={xterm:B,openShellSearch:X,openSearchAndReplace:L,isOutputsTerminal:void 0!==M&&M}).xterm,R=k.openShellSearch,I=k.openSearchAndReplace,G=k.isOutputsTerminal,(0,y.useMemo)(function(){var e=[];if(R){var t=G?(0,i.tZ)(m.Z,{}):(0,i.tZ)(v.Z,{});e.push({match:x.pl,data:{type:"action",label:G?"Find in Console":"Find in Shell",icon:t,run:function(){var e;R(null!==(e=null==A?void 0:A._term.getSelection())&&void 0!==e?e:"")}}})}if(I&&e.push({match:x.pl,data:{type:"action",label:"Find in Repl",icon:(0,i.tZ)(p.Z,{}),run:function(){var e;I(null!==(e=null==A?void 0:A._term.getSelection())&&void 0!==e?e:"")}}}),0!==e.length)return{data:{type:"context",label:"Search",icon:(0,i.tZ)(p.Z,{})},commands:function(){return e}}},[A,R,I,G])),q=(D=function(){return window.navigator.userAgent.includes("Linux")},(0,y.useMemo)(function(){return{data:{type:"context",label:"Clipboard",icon:(0,i.tZ)(s.Z,{})},commands:function(){return[{match:x.pl,data:{type:"action",label:"Copy",icon:(0,i.tZ)(u.Z,{}),keyboardShortcut:(0,Z.l2)({cmdOrCtrl:!0,shift:D(),key:"c"}),run:function(){var e,t=null!==(e=null==B?void 0:B._term.getSelection())&&void 0!==e?e:"";(0,c.Z)(t)}}},{match:x.pl,data:{type:"action",label:"Paste",icon:(0,i.tZ)(s.Z,{}),keyboardShortcut:(0,Z.l2)({cmdOrCtrl:!0,shift:D(),key:"v"}),run:function(){return(0,r._)(function(){var e,t;return(0,o.Jh)(this,function(n){switch(n.label){case 0:e="",n.label=1;case 1:return n.trys.push([1,3,,4]),[4,window.navigator.clipboard.readText()];case 2:return e=n.sent(),[3,4];case 3:return t=n.sent(),l.kg.error("Shell context menu paste failed",{message:t.message}),[2];case 4:return null==B||B._term.paste(e),[2]}})})()}}}]}}},[B]));return(0,y.useMemo)(function(){var e=[];return O&&e.push(O),U&&e.push(U),q&&e.push(q),{data:{type:"context",label:"Search actions",icon:(0,i.tZ)(p.Z,{})},commands:function(){return e}}},[O,U,q])}},16642:function(e,t,n){n.d(t,{R:function(){return s}});var r=n(3796),o=n(62279),i=n(63163),l=n(7420),a=n(75271),c=(0,o.iv)(i.l0.display.flex,i.l0.align.center,i.l0.height(30),{"input, button":[i.l0.my(0),i.l0.mx(4)],input:[i.l0.py(4),i.l0.px(8),i.l0.backgroundColor.backgroundDefault,i.l0.color.foregroundDefault,i.l0.height(24),i.l0.width(85),i.l0.borderRadius(4),i.l0.focusRing,{border:"none",boxShadow:"none","&::placeholder":[i.l0.color.foregroundDefault],"&:focus":[{outline:"none",borderColor:i.TV.accentPrimaryDefault}]}]});function s(e){var t=e.searchValue,n=e.setSearchValue,o=e.findNext,i=e.findPrevious,s=e.exit,u=(0,a.useRef)(null);(0,a.useEffect)(function(){u.current&&u.current.focus()},[]);var d=function(e){if("Escape"===e.key){s();return}"Enter"===e.key&&(e.shiftKey?i(t):o(t))};return(0,r.BX)("div",{css:c,children:[(0,r.tZ)("input",{ref:u,placeholder:"Find",value:t,onChange:function(e){return n(e.target.value)},onKeyDown:function(e){return d(e)}}),(0,r.tZ)(l.Z,{size:"small",onClick:function(){return o(t)},children:"Next"}),(0,r.tZ)(l.Z,{size:"small",onClick:function(){return i(t)},children:"Previous"}),(0,r.tZ)(l.Z,{size:"small",onClick:s,children:"Exit"})]})}},70108:function(e,t,n){n.d(t,{CH:function(){return m},Ch:function(){return b},bW:function(){return Z},qj:function(){return o}});var r,o,i=n(3796),l=n(14118),a=n(42965),c=n(31252),s=n(38751),u=n(75271),d=n(70625),f=n(36809),h=n(53616),p=n(29574);(r=o||(o={})).Prompt="Prompt",r.CommandStart="CommandStart",r.CommandExecuted="CommandExecuted",r.CommandFinished="CommandFinished";var v={A:"Prompt",B:"CommandStart",C:"CommandExecuted",D:"CommandFinished"},m={id:"shell.generateWithAI",name:"Generate with AI in the shell",default:(0,d.l2)({cmdOrCtrl:!0,key:"i"})},g=(0,f.X)({root:{marginLeft:"auto"}}),b=133;function Z(e){var t=e.onFTCSState,n=e.onOpenGeneratePrompt,r=e.onUpdateCurrentPromptLineNumber,o=(0,l.P5)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1}),d=(0,l.P5)({controlName:"flag-ai-in-the-shell",logFlagToAnalytics:!1}),f=!o&&d,b=(0,p.Gn)("fontSize").preferences.fontSize,Z=(0,u.useRef)(null),y=(0,u.useRef)(null),x=(0,a.T3)(),C=(0,c.gf)(m.id),w=(0,u.useRef)(null);return(0,u.useCallback)(function(e,o){var l=v[o.split(";")[0]];if(l&&t&&t({state:l,data:o.split(";")[1]}),"B"===o){if(!f)return;var a,c,u=e.buffer.active,d=u.cursorX,p=u.cursorY;r(p),Z.current&&Z.current.dispose(),y.current&&y.current.dispose(),w.current&&(w.current.unmount(),w.current=null);var m=Math.round(12.6);Z.current=e.registerMarker(0),y.current=null!==(c=e.registerDecoration({marker:Z.current,x:Math.max(0,e.cols-m),width:m,layer:"top"}))&&void 0!==c?c:null,null===(a=y.current)||void 0===a||a.onRender(function(t){for(var r=!1,o=e.buffer.active._buffer.lines._array[p],l=d;l<e.cols;l++)if((null==o?void 0:o.hasContent(l))!==0){r=!0;break}var a=!r;w.current||(w.current=(0,s.createRoot)(t)),w.current.render(a?(0,i.tZ)(h.s,{css:g.root,onClick:function(e){e.stopPropagation(),n()},keyCombo:x?void 0:C,text:"Generate",fontSize:Math.round(.9*b)}):null)})}},[f,n,r,x,C,b,t])}},6829:function(e,t,n){n.d(t,{x:function(){return u}});var r=n(41733),o=n(21262),i=n(71440),l=n(9122);function a(){var e=(0,o._)(["\n  query CurrentUserEnv {\n    currentUser {\n      id\n      username\n    }\n  }\n"]);return a=function(){return e},e}var c={},s=(0,i.Ps)(a());function u(){var e,t=(e=(0,r._)({},c,void 0),l.a(s,e)).data;return(null==t?void 0:t.currentUser)||void 0}},27030:function(e,t,n){n.d(t,{k:function(){return d}});var r=n(7391),o=n(41733),i=n(21262),l=n(71440),a=n(9122);function c(){var e=(0,i._)(["\n  query WorkspaceShowAdmin {\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n    }\n  }\n"]);return c=function(){return e},e}var s={},u=(0,l.Ps)(c());function d(){var e,t,n=(e=(0,o._)({},s,void 0),a.a(u,e)).data,i=(0,r.useRouter)();return(null==n?void 0:null===(t=n.currentUser)||void 0===t?void 0:t.isAdmin)||!!i.query.debug}},9220:function(e,t,n){n.d(t,{o:function(){return o}});var r=n(86466),o="color-mix(in srgb, ".concat(r.vb.interactiveBackground," 60%, ").concat(r.vb.surfaceBackground,")")},19236:function(e,t,n){n.d(t,{L5:function(){return Z},Wk:function(){return G},Xq:function(){return X},Y6:function(){return y},bS:function(){return D},c4:function(){return k},dr:function(){return x},qs:function(){return S},sb:function(){return C},u1:function(){return T}});var r=n(27387),o=n(66626),i=n(63257),l=n(96583),a=n(52657),c=n(83059),s=n(15185),u=n(41974),d=n(48941),f=n(78054),h=n(75271),p=n(65559),v=n(6038),m=n(572),g=(0,d.cn)({}),b=(0,d.cn)(null,function(e,t,n){t(g,function(e){return(0,u.Uy)(e,function(e){null===n.actions?delete e[n.paneId]:e[n.paneId]=n.actions})})});function Z(e,t){var n=P(),r=(0,v.$X)(b),o=(0,a.Z)(e);(0,h.useLayoutEffect)(function(){var e;return r({paneId:n,actions:null!==(e=o.current())&&void 0!==e?e:null}),function(){r({paneId:n,actions:null})}},[r,n,o].concat((0,i._)(t)))}function y(e){var t=(0,c.Z)(function(){return(0,f.kv)(g,function(t){return e?t[e]:{}})},[e]);return(0,v.Hg)(t)}function x(){var e=(0,v.XD)(g);return(0,h.useCallback)(function(t){var n;return null!==(n=e()[t])&&void 0!==n?n:null},[e])}function C(){var e=(0,v.XD)(g),t=(0,v.XD)(p.A1);return(0,h.useCallback)(function(n){var r,i=t().find(function(e){var t=(0,o._)(e,2);return n([t[0],t[1]])});if(!i)return null;var l=i?i[0]:void 0;if(!l)return null;var a=null!==(r=e()[l])&&void 0!==r?r:null;return a?{bindings:a,paneId:l,pane:i}:null},[t,e])}var w=(0,d.cn)(function(e){var t=e(m._s);if(!t||!t.isVisible)return null;var n=!0,r=!1,i=void 0;try{for(var l,a=e(p.A1)[Symbol.iterator]();!(n=(l=a.next()).done);n=!0){var c,s=(0,o._)(l.value,2),u=s[0],d=s[1];if("codeEditor"===d.type&&d.data.path===t.path){var f=null!==(c=e(g)[u])&&void 0!==c?c:null;return(null==f?void 0:f.type)==="codeEditor"?f:null}}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return null});function S(){return(0,v.yL)(w)}var _=(0,d.cn)(new Map),E=(0,d.cn)(null,function(e,t,n,r){t(_,function(e){var t=new Map(e);return null===r?t.delete(n):r&&t.set(n,r),t})});function T(){return(0,v.$X)(E)}function k(){var e,t,n=(e=(0,v.rF)(),(0,h.useCallback)(function(t){return e((0,f.kv)(g,function(e){return e[t]}))},[e]));return(0,h.useCallback)((t=(0,r._)(function(e){return(0,l.Jh)(this,function(t){return[2,new Promise(function(t){var r=n(e);if(r.current){t(r.current);return}var o=r.subscribe(function(e){e&&(t(e),o())})})]})}),function(e){return t.apply(this,arguments)}),[n])}var A=(0,d.cn)(new Map),R=(0,d.cn)(null,function(e,t,n){t(A,function(e){return(0,u.Uy)(e,function(e){null===n.focus?e.delete(n.paneId):e.set(n.paneId,n.focus)})})});function I(e){var t=document.activeElement;return!!e&&!!t&&e!==t&&e.contains(t)}function G(e,t){var n=(0,a.Z)(e),r=P(),l=(0,s.Z)(),c=(0,h.useRef)(!l),u=(0,v.$X)(R),d=(0,v.XD)(p.J1),f=(0,v.XD)(_),m=(0,o._)((0,h.useState)(null),2),g=m[0],b=m[1];return(0,h.useEffect)(function(){n.current&&b(n.current())},t?(0,i._)(t):[]),(0,h.useEffect)(function(){var e=function(e){d()===r&&e.target!==f().get(r)&&(c.current=!1)};return document.body.addEventListener("focus",e,!0),function(){document.body.removeEventListener("focus",e,!0)}},[d,f,r]),(0,h.useEffect)(function(){if(g){var e=function(){g.focus()};return c.current&&d()===r&&!I(f().get(r))&&e(),u({paneId:r,focus:e}),function(){u({paneId:r,focus:null})}}},[g,u,r,d,f,l]),b}function D(){var e=(0,v.XD)(A),t=(0,v.XD)(_);return(0,c.Z)(function(){return function(n){var r=e().get(n),o=t().get(n);if(!I(o)){if(r){r();return}null==o||o.focus()}}},[e,t])}var B=(0,h.createContext)(null);function P(){var e=(0,h.useContext)(B);if(!e)throw Error("Expected pane id in context");return e}var X=B.Provider},56738:function(e,t,n){n.d(t,{F:function(){return M},Z:function(){return U}});var r,o=n(27387),i=n(66626),l=n(63257),a=n(96583),c=n(25722),s=n(29574),u=n(32622),d=n(23666),f=n(52657),h=n(54505),p=n(70657),v=n(76881),m=n(70625),g=n(10126),b=n(75271),Z=n(37862),y=n(30826),x=n.n(y)()(function(){if("undefined"!=typeof AudioContext){var e=(r||(r=new AudioContext),r),t=e.createBufferSource();e.decodeAudioData(function(e){for(var t=window.atob(e),n=t.length,r=new Uint8Array(n),o=0;o<n;o++)r[o]=t.charCodeAt(o);return r.buffer}("SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"),function(n){t.buffer=n,t.connect(e.destination),t.start(0)})}},500,{leading:!0,trailing:!0}),C="replit-icons-font",w=n(10777),S="BESbswy";function _(e){return E.apply(this,arguments)}function E(){return(E=(0,o._)(function(e){return(0,a.Jh)(this,function(t){switch(t.label){case 0:if(!document.fonts)return[3,2];return[4,function(e,t){return k.apply(this,arguments)}(document.fonts,e)];case 1:case 3:return t.sent(),[2];case 2:return[4,Promise.all([A("serif",e),A("sans-serif",e),A("monospace",e)])]}})})).apply(this,arguments)}function T(e){var t=e.family,n=e.style,r=e.weight;return"".concat(void 0===n?"normal":n," ").concat(void 0===r?"normal":r," 100px ").concat(t)}function k(){return(k=(0,o._)(function(e,t){var n,r,o,i,l,c;return(0,a.Jh)(this,function(a){return n=t.fontInfo,o=void 0===(r=t.characters)?S:r,l=void 0===(i=t.timeout)?3e3:i,c=T(n),[2,new Promise(function(t,r){var i=!1,a=w.kg.timeStart({family:n.family,style:n.style,weight:n.weight}),s=setTimeout(function(){i=!0,a("xterm font loading timed out"),t()},l);e.load(c,o).then(function(){i||(clearTimeout(s),t())}).catch(function(e){i||(clearTimeout(s),r(e))})})]})})).apply(this,arguments)}function A(e,t){return R.apply(this,arguments)}function R(){return(R=(0,o._)(function(e,t){var n,r,o,i,l,c,s,u,d;return(0,a.Jh)(this,function(a){return(n=t.fontInfo,o=void 0===(r=t.characters)?S:r,l=void 0===(i=t.timeout)?3e3:i,c=T(n),(s=document.createElement("span")).innerText=o,s.style.font="normal normal 100px ".concat(e),s.style.position="absolute",s.style.left="-9999px",s.style.top="-9999px",document.body.appendChild(s),u=s.offsetWidth,s.style.font=c,(d=function(){return u!==s.offsetWidth})())?[2]:[2,new Promise(function(e,t){var r=setInterval(function(){d()&&(clearInterval(r),clearTimeout(o),document.body.removeChild(s),e())},50),o=setTimeout(function(){if(clearInterval(r),document.body.removeChild(s),d()){e();return}t(Error("Font loading timed out "+n.family))},l)})]})})).apply(this,arguments)}function I(e){c.Tb(e)}var G='"ReplitHack"',D=String.fromCharCode(61095);function B(){return(B=(0,o._)(function(){return(0,a.Jh)(this,function(e){switch(e.label){case 0:return!function(){if(!document.getElementById(C)){var e=document.createElement("style");e.id=C,e.type="text/css",e.appendChild(document.createTextNode("\n@font-face {\n  font-family: 'replit-icons';\n  font-style: normal;\n  font-weight: normal;\n  font-stretch: normal;\n  src: url(".concat("/public/fonts/replit-icons.woff",") format('woff'),\n    url(").concat("/public/fonts/replit-icons.ttf",") format('truetype');\n}"))),document.head.appendChild(e)}}(),[4,Promise.all([_({fontInfo:{family:"replit-icons"},characters:D}).catch(I),_({fontInfo:{family:G,weight:"400"}}).catch(I),_({fontInfo:{family:G,weight:"400",style:"italic"}}).catch(I),_({fontInfo:{family:G,weight:"700"}}).catch(I),_({fontInfo:{family:G,weight:"700",style:"italic"}}).catch(I)])];case 1:return e.sent(),[2]}})})).apply(this,arguments)}var P=n(37633),X=n(97432),L=n(14118),N=n(49500),M=1e4;function O(){return/^((?!chrome|android).)*safari/i.test(window.navigator.userAgent)}function U(e){var t,r,y,C,w,S,_,E,T=(0,i._)((0,b.useState)(null),2),k=T[0],A=T[1],R=(0,i._)((0,b.useState)(null),2),I=R[0],D=R[1],U=(0,P.f)(),q=(0,s.Gn)("fontSize","accessibleTerminal","shellBellAudio").preferences,V=q.fontSize,H=q.accessibleTerminal,F=q.shellBellAudio,W=(0,v.uV)(),z=(0,d.Z)(),j=(0,X.d)(),Y=null==e?void 0:e.openFile,$=(0,f.Z)(null==e?void 0:e.openWebview),K=null==e?void 0:e.listFiles,J=(0,b.useMemo)(function(){return Y&&K?{openFile:Y,listFiles:K}:null},[Y,K]),Q=(0,L.P5)({controlName:"flag-nudges-pane-linking",logFlagToAnalytics:!1}),ee=(0,f.Z)(null==e?void 0:e.onInBandOSCMessages),et={screenReaderMode:H,fileLinking:J,terminalTheme:U,fontSize:V,scrollback:null==e?void 0:e.scrollback,performPaneOperation:null!==(E=null==e?void 0:e.performPaneOperation)&&void 0!==E?E:null,flagNudgesPaneLinking:Q,emitPaneMetrics:null==e?void 0:e.emitPaneMetrics},en=(0,f.Z)(et),er=(0,Z.Z)(function(){(null==e?void 0:e.autoFit)!==!1&&(null==I||I.fit())},{type:"debounce",wait:200}),eo=(0,b.useRef)(null),ei=(0,b.useRef)(null),el=(0,f.Z)(null==e?void 0:e.size),ea=(0,g.Sy)();return(0,b.useLayoutEffect)(function(){if(k){var t=[];return(function(){return r.apply(this,arguments)})().catch(function(e){if(e.message&&e.message.toLowerCase().includes("loading chunk")){c.$e(function(t){t.setExtra("message",e.message),t.setExtra("stack",e.stack),c.Tb(Error("Loading chunk failed"))});return}W({error:e,origin:"Xterm: init"})}),function(){t.forEach(function(e){return e()})}}function r(){return(r=(0,o._)(function(){var r,o,s,d,f,v,b,Z,y,x,C,w,S,_,E,T,A,R,I,P,X,L,U,q,V,H;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return[4,Promise.all([Promise.all([(0,p.u)(function(){return n.e(573).then(n.t.bind(n,25295,23))}),(0,p.u)(function(){return n.e(9970).then(n.t.bind(n,9970,23))}),(0,p.u)(function(){return n.e(4819).then(n.t.bind(n,14819,23))}),(0,p.u)(function(){return n.e(8650).then(n.t.bind(n,8650,23))}),(0,p.u)(function(){return n.e(7040).then(n.t.bind(n,57040,23))}),(0,p.u)(function(){return n.e(5901).then(n.bind(n,95901))}),(0,p.u)(function(){return n.e(6141).then(n.bind(n,76141))}),(0,p.u)(function(){return n.e(2527).then(n.t.bind(n,72527,23))}),(0,p.u)(function(){return n.e(783).then(n.t.bind(n,20783,23))})]),function(){return B.apply(this,arguments)}()])];case 1:var F;if(b=i._.apply(void 0,[a.sent(),1]),y=(Z=(0,i._)(b[0],9))[0].Terminal,x=Z[1].FitAddon,C=Z[2].SearchAddon,w=Z[3].WebLinksAddon,S=Z[4].Unicode11Addon,_=Z[5].FileLinkAddon,E=Z[6].PaneLinkAddon,T=Z[7].CanvasAddon,A=Z[8].WebglAddon,!k)return[2];return I={allowProposedApi:!0,cursorBlink:!1,scrollback:null!==(R=en.current.scrollback)&&void 0!==R?R:M,tabStopWidth:4,fontFamily:"".concat(G,', replit-icons, Monaco, "Ubuntu Mono", Consolas, monospace'),fontSize:en.current.fontSize,lineHeight:1,fontWeight:400,fontWeightBold:700,drawBoldTextInBrightColors:!1,minimumContrastRatio:4.5,theme:en.current.terminalTheme,screenReaderMode:en.current.screenReaderMode,logger:{trace:function(e,t){return(r=N).trace.apply(r,["xterm: "+e].concat((0,l._)(t)))},debug:function(e,t){return(o=N).debug.apply(o,["xterm: "+e].concat((0,l._)(t)))},info:function(e,t){return(s=N).info.apply(s,["xterm: "+e].concat((0,l._)(t)))},warn:function(e,t){return(d=N).warn.apply(d,["xterm: "+e].concat((0,l._)(t)))},error:function(e,t){"string"==typeof e&&e.includes("Parsing error")||N.error("xterm: "+e,t)}}},(null===(f=el.current)||void 0===f?void 0:f.cols)!==void 0&&(I.cols=el.current.cols),(null===(v=el.current)||void 0===v?void 0:v.rows)!==void 0&&(I.rows=el.current.rows),P=new y(I),en.current.fileLinking?(eo.current=new _(en.current.fileLinking.openFile,en.current.fileLinking.listFiles),P.loadAddon(eo.current)):eo.current=null,!ei.current&&(null==e?void 0:e.performPaneOperation)&&(ei.current=new E(e.performPaneOperation,Q,e.emitPaneMetrics)),ei.current&&P.loadAddon(ei.current),X=new x,P.loadAddon(X),L=new w((F=function(e){z?u.X.openExternalUrl(e):window.open(e,"_blank")},function(e,t){var n;try{n=new URL(t)}catch(e){return}if(("0.0.0.0"===n.hostname||"localhost"===n.hostname)&&void 0!==$.current){$.current(n.pathname,parseInt(n.port,10));return}F(t)})),P.loadAddon(L),U=new C,P.loadAddon(U),q=new S,P.loadAddon(q),P.unicode.activeVersion="11",P.open(k),t.push(function(){try{P.dispose()}catch(e){}}),function(){try{if(!(!function(){if(!O())return!1;var e=window.navigator.userAgent.match(/Version\/(\d+)/);return null===e||e.length<2||16>parseInt(e[1],10)}()&&(O()||!j||!(window.devicePixelRatio>1))&&document.createElement("canvas").getContext("webgl2"))){var e=new T;P.loadAddon(e);return}var t=new A;P.loadAddon(t),t.onContextLoss(function(){t.dispose(),P.loadAddon(new T)})}catch(e){var n=new T;P.loadAddon(n)}}(),V=!1,H=null,P.attachCustomKeyEventHandler(function(e){var t=(0,m.IX)(e);if(t){var n=t;H&&(n=(0,m.cZ)(H,t));var r=ea(n);switch(r.kind){case g.Xp.NoMatch:H=null;break;case g.Xp.WaitingForChord:return H=r.key,!1;case g.Xp.MatchFound:return H=null,!1}}return(!window.navigator.clipboard||"c"!==e.key.toLowerCase()||!e.ctrlKey||!e.shiftKey||("keyup"===e.type&&P.hasSelection()&&(0,h.Z)(P.getSelection()).catch(function(e){c.$e(function(t){t.setTag("xterm-clipboard",!0),t.setExtra("type","copy"),c.Tb(e)})}),e.preventDefault(),e.stopPropagation(),!1))&&("shift"===e.key.toLowerCase()||"ctrl"===e.key.toLowerCase()||"alt"===e.key.toLowerCase()||"meta"===e.key.toLowerCase()||("tab"!==e.key.toLowerCase()||!V)&&(V="escape"===e.key.toLowerCase(),!0))}),ee.current&&Object.entries(ee.current).forEach(function(e){var t=(0,i._)(e,2),n=t[0],r=t[1];P.parser.registerOscHandler(Number(n),function(e){return r(P,e),!0})}),D({onKey:P.onKey.bind(P),onData:P.onData.bind(P),onResize:P.onResize.bind(P),write:P.write.bind(P),fit:function(){var e=k.getBoundingClientRect(),t=e.width,n=e.height;t>0&&n>0&&X.fit()},focus:function(){return P.focus()},clear:function(){return P.clear()},findPrevious:function(e,t){return U.findPrevious(e,t)},findNext:function(e,t){return U.findNext(e,t)},getSize:function(){return{cols:P.cols,rows:P.rows}},paste:function(e){return P.paste(e)},_term:P}),er(k),[2]}})})).apply(this,arguments)}},[k,er,en,W,el,ea,z,j,$,ee,null==e?void 0:e.performPaneOperation,null==e?void 0:e.emitPaneMetrics,Q]),t=null==I?void 0:I._term,r=et.screenReaderMode,y=et.fileLinking,C=et.terminalTheme,w=et.performPaneOperation,S=et.emitPaneMetrics,_=et.flagNudgesPaneLinking,(0,b.useEffect)(function(){t&&C&&(t.options.theme=C)},[t,C]),(0,b.useEffect)(function(){t&&(t.options.screenReaderMode=r)},[t,r]),(0,b.useEffect)(function(){if(t){if(y){if(!eo.current){var e=!1;return n.e(5901).then(n.bind(n,95901)).then(function(n){var r=n.FileLinkAddon;e||(eo.current=new r(y.openFile,y.listFiles),t.loadAddon(eo.current))}),function(){e=!0}}eo.current.update(y.openFile,y.listFiles),eo.current.reactivate()}else eo.current&&eo.current.deactivate();if(w){if(!ei.current){var r=!1;return n.e(6141).then(n.bind(n,76141)).then(function(e){var n=e.PaneLinkAddon;r||(ei.current=new n(w,_,S),t.loadAddon(ei.current))}),function(){r=!0}}ei.current.update(w,null!=S?S:null)}else ei.current&&ei.current.deactivate()}},[t,y,eo,ei,w,S,_]),(0,b.useEffect)(function(){var e=null==I?void 0:I._term;e&&V&&e.options.fontSize!==V&&(e.options.fontSize=V,e.refresh(0,e.rows-1),I.fit())},[V,I]),(0,b.useEffect)(function(){if(F){var e=null==I?void 0:I._term;if(e)return e.onBell(x).dispose}},[F,I]),[I,A]}},37633:function(e,t,n){n.d(t,{f:function(){return l}});var r=n(14861),o=n(97420),i=n(75271);function l(){var e=(0,r.F)().values;return(0,i.useMemo)(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.Sj.values;return{foreground:e.global.foregroundDefault,background:e.global.backgroundDefault,cursor:e.global.foregroundDefault,cursorAccent:e.global.backgroundHigher,selectionBackground:e.global.foregroundDefault,black:e.global.backgroundRoot,red:e.global.redStronger,green:e.global.accentPositiveDefault,yellow:e.global.yellowDefault,blue:e.global.blueStronger,magenta:e.global.magentaDefault,cyan:e.global.tealDefault,white:e.global.foregroundDefault,brightBlack:e.global.outlineDimmest,brightRed:e.global.redStrongest,brightGreen:e.global.accentPositiveStronger,brightYellow:e.global.yellowStronger,brightBlue:e.global.blueStrongest,brightMagenta:e.global.magentaStronger,brightCyan:e.global.tealStronger,brightWhite:e.global.foregroundDefault}}(e)},[e])}},35177:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(12285),o=n(45077),i=function(){"use strict";function e(){(0,r._)(this,e)}return e.get=function(e,t){var n,r;try{n=sessionStorage.getItem(e)}catch(e){}if(null==n)return null;try{r=JSON.parse(n)}catch(e){}return null==r||"array"===t&&!Array.isArray(r)||t&&(void 0===r?"undefined":(0,o._)(r))!==t?null:r},e.set=function(e,t){try{sessionStorage.setItem(e,JSON.stringify(t))}catch(e){}},e.remove=function(e){try{sessionStorage.removeItem(e)}catch(e){}},e.keys=function(){try{return Object.keys(sessionStorage)}catch(e){return[]}},e}()}}]);
//# sourceMappingURL=6095-c3234fe831b745e1.js.map